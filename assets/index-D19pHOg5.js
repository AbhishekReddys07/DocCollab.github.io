function _T(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var vn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function CT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Yw={exports:{}},Yc={},Qw={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bl=Symbol.for("react.element"),TT=Symbol.for("react.portal"),ET=Symbol.for("react.fragment"),MT=Symbol.for("react.strict_mode"),PT=Symbol.for("react.profiler"),OT=Symbol.for("react.provider"),AT=Symbol.for("react.context"),NT=Symbol.for("react.forward_ref"),DT=Symbol.for("react.suspense"),RT=Symbol.for("react.memo"),jT=Symbol.for("react.lazy"),xy=Symbol.iterator;function IT(t){return t===null||typeof t!="object"?null:(t=xy&&t[xy]||t["@@iterator"],typeof t=="function"?t:null)}var Xw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e1=Object.assign,t1={};function jo(t,e,n){this.props=t,this.context=e,this.refs=t1,this.updater=n||Xw}jo.prototype.isReactComponent={};jo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function n1(){}n1.prototype=jo.prototype;function dm(t,e,n){this.props=t,this.context=e,this.refs=t1,this.updater=n||Xw}var fm=dm.prototype=new n1;fm.constructor=dm;e1(fm,jo.prototype);fm.isPureReactComponent=!0;var wy=Array.isArray,r1=Object.prototype.hasOwnProperty,hm={current:null},s1={key:!0,ref:!0,__self:!0,__source:!0};function i1(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)r1.call(e,r)&&!s1.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:bl,type:t,key:i,ref:o,props:s,_owner:hm.current}}function LT(t,e){return{$$typeof:bl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pm(t){return typeof t=="object"&&t!==null&&t.$$typeof===bl}function $T(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ky=/\/+/g;function Gd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$T(""+t.key):e.toString(36)}function bu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bl:case TT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Gd(o,0):r,wy(s)?(n="",t!=null&&(n=t.replace(ky,"$&/")+"/"),bu(s,e,n,"",function(u){return u})):s!=null&&(pm(s)&&(s=LT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ky,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",wy(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Gd(i,a);o+=bu(i,e,n,l,s)}else if(l=IT(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Gd(i,a++),o+=bu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bl(t,e,n){if(t==null)return t;var r=[],s=0;return bu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function VT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jt={current:null},Su={transition:null},FT={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:Su,ReactCurrentOwner:hm};function o1(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:Bl,forEach:function(t,e,n){Bl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bl(t,function(){e++}),e},toArray:function(t){return Bl(t,function(e){return e})||[]},only:function(t){if(!pm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=jo;de.Fragment=ET;de.Profiler=PT;de.PureComponent=dm;de.StrictMode=MT;de.Suspense=DT;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FT;de.act=o1;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=e1({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=hm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)r1.call(e,l)&&!s1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:bl,type:t.type,key:s,ref:i,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:AT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OT,_context:t},t.Consumer=t};de.createElement=i1;de.createFactory=function(t){var e=i1.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:NT,render:t}};de.isValidElement=pm;de.lazy=function(t){return{$$typeof:jT,_payload:{_status:-1,_result:t},_init:VT}};de.memo=function(t,e){return{$$typeof:RT,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Su.transition;Su.transition={};try{t()}finally{Su.transition=e}};de.unstable_act=o1;de.useCallback=function(t,e){return jt.current.useCallback(t,e)};de.useContext=function(t){return jt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return jt.current.useDeferredValue(t)};de.useEffect=function(t,e){return jt.current.useEffect(t,e)};de.useId=function(){return jt.current.useId()};de.useImperativeHandle=function(t,e,n){return jt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return jt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return jt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return jt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return jt.current.useReducer(t,e,n)};de.useRef=function(t){return jt.current.useRef(t)};de.useState=function(t){return jt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return jt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return jt.current.useTransition()};de.version="18.3.1";Qw.exports=de;var b=Qw.exports;const ve=Zw(b),BT=_T({__proto__:null,default:ve},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT=b,UT=Symbol.for("react.element"),WT=Symbol.for("react.fragment"),HT=Object.prototype.hasOwnProperty,qT=zT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KT={key:!0,ref:!0,__self:!0,__source:!0};function a1(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HT.call(e,r)&&!KT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:UT,type:t,key:i,ref:o,props:s,_owner:qT.current}}Yc.Fragment=WT;Yc.jsx=a1;Yc.jsxs=a1;Yw.exports=Yc;var w=Yw.exports,l1={exports:{}},rn={},u1={exports:{}},c1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,W){var Y=I.length;I.push(W);e:for(;0<Y;){var G=Y-1>>>1,be=I[G];if(0<s(be,W))I[G]=W,I[Y]=be,Y=G;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var W=I[0],Y=I.pop();if(Y!==W){I[0]=Y;e:for(var G=0,be=I.length,Lt=be>>>1;G<Lt;){var on=2*(G+1)-1,Qn=I[on],Tt=on+1,bn=I[Tt];if(0>s(Qn,Y))Tt<be&&0>s(bn,Qn)?(I[G]=bn,I[Tt]=Y,G=Tt):(I[G]=Qn,I[on]=Y,G=on);else if(Tt<be&&0>s(bn,Y))I[G]=bn,I[Tt]=Y,G=Tt;else break e}}return W}function s(I,W){var Y=I.sortIndex-W.sortIndex;return Y!==0?Y:I.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(I){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=I)r(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(u)}}function k(I){if(m=!1,x(I),!p)if(n(l)!==null)p=!0,ie(_);else{var W=n(u);W!==null&&ke(k,W.startTime-I)}}function _(I,W){p=!1,m&&(m=!1,g(C),C=-1),h=!0;var Y=f;try{for(x(W),d=n(l);d!==null&&(!(d.expirationTime>W)||I&&!ee());){var G=d.callback;if(typeof G=="function"){d.callback=null,f=d.priorityLevel;var be=G(d.expirationTime<=W);W=t.unstable_now(),typeof be=="function"?d.callback=be:d===n(l)&&r(l),x(W)}else r(l);d=n(l)}if(d!==null)var Lt=!0;else{var on=n(u);on!==null&&ke(k,on.startTime-W),Lt=!1}return Lt}finally{d=null,f=Y,h=!1}}var T=!1,M=null,C=-1,P=5,A=-1;function ee(){return!(t.unstable_now()-A<P)}function J(){if(M!==null){var I=t.unstable_now();A=I;var W=!0;try{W=M(!0,I)}finally{W?X():(T=!1,M=null)}}else T=!1}var X;if(typeof v=="function")X=function(){v(J)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,we=se.port2;se.port1.onmessage=J,X=function(){we.postMessage(null)}}else X=function(){y(J,0)};function ie(I){M=I,T||(T=!0,X())}function ke(I,W){C=y(function(){I(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,ie(_))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var Y=f;f=W;try{return I()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,W){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Y=f;f=I;try{return W()}finally{f=Y}},t.unstable_scheduleCallback=function(I,W,Y){var G=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?G+Y:G):Y=G,I){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=Y+be,I={id:c++,callback:W,priorityLevel:I,startTime:Y,expirationTime:be,sortIndex:-1},Y>G?(I.sortIndex=Y,e(u,I),n(l)===null&&I===n(u)&&(m?(g(C),C=-1):m=!0,ke(k,Y-G))):(I.sortIndex=be,e(l,I),p||h||(p=!0,ie(_))),I},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(I){var W=f;return function(){var Y=f;f=W;try{return I.apply(this,arguments)}finally{f=Y}}}})(c1);u1.exports=c1;var JT=u1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT=b,en=JT;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d1=new Set,Fa={};function xi(t,e){po(t,e),po(t+"Capture",e)}function po(t,e){for(Fa[t]=e,t=0;t<e.length;t++)d1.add(e[t])}var vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yh=Object.prototype.hasOwnProperty,ZT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,by={},Sy={};function YT(t){return yh.call(Sy,t)?!0:yh.call(by,t)?!1:ZT.test(t)?Sy[t]=!0:(by[t]=!0,!1)}function QT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XT(t,e,n,r){if(e===null||typeof e>"u"||QT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var mm=/[\-:]([a-z])/g;function gm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mm,gm);ht[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mm,gm);ht[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mm,gm);ht[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function ym(t,e,n,r){var s=ht.hasOwnProperty(e)?ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XT(e,n,s,r)&&(n=null),r||s===null?YT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cr=GT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zl=Symbol.for("react.element"),Fi=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),vm=Symbol.for("react.strict_mode"),vh=Symbol.for("react.profiler"),f1=Symbol.for("react.provider"),h1=Symbol.for("react.context"),xm=Symbol.for("react.forward_ref"),xh=Symbol.for("react.suspense"),wh=Symbol.for("react.suspense_list"),wm=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),p1=Symbol.for("react.offscreen"),_y=Symbol.iterator;function Wo(t){return t===null||typeof t!="object"?null:(t=_y&&t[_y]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Zd;function oa(t){if(Zd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zd=e&&e[1]||""}return`
`+Zd+t}var Yd=!1;function Qd(t,e){if(!t||Yd)return"";Yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Yd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oa(t):""}function eE(t){switch(t.tag){case 5:return oa(t.type);case 16:return oa("Lazy");case 13:return oa("Suspense");case 19:return oa("SuspenseList");case 0:case 2:case 15:return t=Qd(t.type,!1),t;case 11:return t=Qd(t.type.render,!1),t;case 1:return t=Qd(t.type,!0),t;default:return""}}function kh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bi:return"Fragment";case Fi:return"Portal";case vh:return"Profiler";case vm:return"StrictMode";case xh:return"Suspense";case wh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case h1:return(t.displayName||"Context")+".Consumer";case f1:return(t._context.displayName||"Context")+".Provider";case xm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wm:return e=t.displayName||null,e!==null?e:kh(t.type)||"Memo";case Dr:e=t._payload,t=t._init;try{return kh(t(e))}catch{}}return null}function tE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kh(e);case 8:return e===vm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function m1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nE(t){var e=m1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ul(t){t._valueTracker||(t._valueTracker=nE(t))}function g1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=m1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Uu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bh(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function y1(t,e){e=e.checked,e!=null&&ym(t,"checked",e,!1)}function Sh(t,e){y1(t,e);var n=gs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_h(t,e.type,n):e.hasOwnProperty("defaultValue")&&_h(t,e.type,gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ty(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _h(t,e,n){(e!=="number"||Uu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var aa=Array.isArray;function so(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ch(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ey(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(aa(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gs(n)}}function v1(t,e){var n=gs(e.value),r=gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function My(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function x1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Th(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?x1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wl,w1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wl=Wl||document.createElement("div"),Wl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ba(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rE=["Webkit","ms","Moz","O"];Object.keys(ga).forEach(function(t){rE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ga[e]=ga[t]})});function k1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ga.hasOwnProperty(t)&&ga[t]?(""+e).trim():e+"px"}function b1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=k1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var sE=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eh(t,e){if(e){if(sE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Mh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ph=null;function km(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oh=null,io=null,oo=null;function Py(t){if(t=Cl(t)){if(typeof Oh!="function")throw Error(D(280));var e=t.stateNode;e&&(e=nd(e),Oh(t.stateNode,t.type,e))}}function S1(t){io?oo?oo.push(t):oo=[t]:io=t}function _1(){if(io){var t=io,e=oo;if(oo=io=null,Py(t),e)for(t=0;t<e.length;t++)Py(e[t])}}function C1(t,e){return t(e)}function T1(){}var Xd=!1;function E1(t,e,n){if(Xd)return t(e,n);Xd=!0;try{return C1(t,e,n)}finally{Xd=!1,(io!==null||oo!==null)&&(T1(),_1())}}function za(t,e){var n=t.stateNode;if(n===null)return null;var r=nd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Ah=!1;if(vr)try{var Ho={};Object.defineProperty(Ho,"passive",{get:function(){Ah=!0}}),window.addEventListener("test",Ho,Ho),window.removeEventListener("test",Ho,Ho)}catch{Ah=!1}function iE(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var ya=!1,Wu=null,Hu=!1,Nh=null,oE={onError:function(t){ya=!0,Wu=t}};function aE(t,e,n,r,s,i,o,a,l){ya=!1,Wu=null,iE.apply(oE,arguments)}function lE(t,e,n,r,s,i,o,a,l){if(aE.apply(this,arguments),ya){if(ya){var u=Wu;ya=!1,Wu=null}else throw Error(D(198));Hu||(Hu=!0,Nh=u)}}function wi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function M1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Oy(t){if(wi(t)!==t)throw Error(D(188))}function uE(t){var e=t.alternate;if(!e){if(e=wi(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Oy(s),t;if(i===r)return Oy(s),e;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function P1(t){return t=uE(t),t!==null?O1(t):null}function O1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=O1(t);if(e!==null)return e;t=t.sibling}return null}var A1=en.unstable_scheduleCallback,Ay=en.unstable_cancelCallback,cE=en.unstable_shouldYield,dE=en.unstable_requestPaint,ze=en.unstable_now,fE=en.unstable_getCurrentPriorityLevel,bm=en.unstable_ImmediatePriority,N1=en.unstable_UserBlockingPriority,qu=en.unstable_NormalPriority,hE=en.unstable_LowPriority,D1=en.unstable_IdlePriority,Qc=null,Wn=null;function pE(t){if(Wn&&typeof Wn.onCommitFiberRoot=="function")try{Wn.onCommitFiberRoot(Qc,t,void 0,(t.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:yE,mE=Math.log,gE=Math.LN2;function yE(t){return t>>>=0,t===0?32:31-(mE(t)/gE|0)|0}var Hl=64,ql=4194304;function la(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=la(a):(i&=o,i!==0&&(r=la(i)))}else o=n&~s,o!==0?r=la(o):i!==0&&(r=la(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nn(e),s=1<<n,r|=t[n],e&=~s;return r}function vE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Nn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=vE(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Dh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function R1(){var t=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),t}function ef(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nn(e),t[e]=n}function wE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Nn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Sm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xe=0;function j1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var I1,_m,L1,$1,V1,Rh=!1,Kl=[],es=null,ts=null,ns=null,Ua=new Map,Wa=new Map,Fr=[],kE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ny(t,e){switch(t){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wa.delete(e.pointerId)}}function qo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Cl(e),e!==null&&_m(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function bE(t,e,n,r,s){switch(e){case"focusin":return es=qo(es,t,e,n,r,s),!0;case"dragenter":return ts=qo(ts,t,e,n,r,s),!0;case"mouseover":return ns=qo(ns,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ua.set(i,qo(Ua.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Wa.set(i,qo(Wa.get(i)||null,t,e,n,r,s)),!0}return!1}function F1(t){var e=qs(t.target);if(e!==null){var n=wi(e);if(n!==null){if(e=n.tag,e===13){if(e=M1(n),e!==null){t.blockedOn=e,V1(t.priority,function(){L1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _u(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ph=r,n.target.dispatchEvent(r),Ph=null}else return e=Cl(n),e!==null&&_m(e),t.blockedOn=n,!1;e.shift()}return!0}function Dy(t,e,n){_u(t)&&n.delete(e)}function SE(){Rh=!1,es!==null&&_u(es)&&(es=null),ts!==null&&_u(ts)&&(ts=null),ns!==null&&_u(ns)&&(ns=null),Ua.forEach(Dy),Wa.forEach(Dy)}function Ko(t,e){t.blockedOn===e&&(t.blockedOn=null,Rh||(Rh=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,SE)))}function Ha(t){function e(s){return Ko(s,t)}if(0<Kl.length){Ko(Kl[0],t);for(var n=1;n<Kl.length;n++){var r=Kl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(es!==null&&Ko(es,t),ts!==null&&Ko(ts,t),ns!==null&&Ko(ns,t),Ua.forEach(e),Wa.forEach(e),n=0;n<Fr.length;n++)r=Fr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fr.length&&(n=Fr[0],n.blockedOn===null);)F1(n),n.blockedOn===null&&Fr.shift()}var ao=Cr.ReactCurrentBatchConfig,Ju=!0;function _E(t,e,n,r){var s=xe,i=ao.transition;ao.transition=null;try{xe=1,Cm(t,e,n,r)}finally{xe=s,ao.transition=i}}function CE(t,e,n,r){var s=xe,i=ao.transition;ao.transition=null;try{xe=4,Cm(t,e,n,r)}finally{xe=s,ao.transition=i}}function Cm(t,e,n,r){if(Ju){var s=jh(t,e,n,r);if(s===null)df(t,e,r,Gu,n),Ny(t,r);else if(bE(s,t,e,n,r))r.stopPropagation();else if(Ny(t,r),e&4&&-1<kE.indexOf(t)){for(;s!==null;){var i=Cl(s);if(i!==null&&I1(i),i=jh(t,e,n,r),i===null&&df(t,e,r,Gu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else df(t,e,r,null,n)}}var Gu=null;function jh(t,e,n,r){if(Gu=null,t=km(r),t=qs(t),t!==null)if(e=wi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=M1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gu=t,null}function B1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fE()){case bm:return 1;case N1:return 4;case qu:case hE:return 16;case D1:return 536870912;default:return 16}default:return 16}}var Kr=null,Tm=null,Cu=null;function z1(){if(Cu)return Cu;var t,e=Tm,n=e.length,r,s="value"in Kr?Kr.value:Kr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Cu=s.slice(t,1<r?1-r:void 0)}function Tu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jl(){return!0}function Ry(){return!1}function sn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Jl:Ry,this.isPropagationStopped=Ry,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jl)},persist:function(){},isPersistent:Jl}),e}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Em=sn(Io),_l=Ie({},Io,{view:0,detail:0}),TE=sn(_l),tf,nf,Jo,Xc=Ie({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(tf=t.screenX-Jo.screenX,nf=t.screenY-Jo.screenY):nf=tf=0,Jo=t),tf)},movementY:function(t){return"movementY"in t?t.movementY:nf}}),jy=sn(Xc),EE=Ie({},Xc,{dataTransfer:0}),ME=sn(EE),PE=Ie({},_l,{relatedTarget:0}),rf=sn(PE),OE=Ie({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),AE=sn(OE),NE=Ie({},Io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DE=sn(NE),RE=Ie({},Io,{data:0}),Iy=sn(RE),jE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $E(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LE[t])?!!e[t]:!1}function Mm(){return $E}var VE=Ie({},_l,{key:function(t){if(t.key){var e=jE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mm,charCode:function(t){return t.type==="keypress"?Tu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FE=sn(VE),BE=Ie({},Xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ly=sn(BE),zE=Ie({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mm}),UE=sn(zE),WE=Ie({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),HE=sn(WE),qE=Ie({},Xc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KE=sn(qE),JE=[9,13,27,32],Pm=vr&&"CompositionEvent"in window,va=null;vr&&"documentMode"in document&&(va=document.documentMode);var GE=vr&&"TextEvent"in window&&!va,U1=vr&&(!Pm||va&&8<va&&11>=va),$y=" ",Vy=!1;function W1(t,e){switch(t){case"keyup":return JE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zi=!1;function ZE(t,e){switch(t){case"compositionend":return H1(e);case"keypress":return e.which!==32?null:(Vy=!0,$y);case"textInput":return t=e.data,t===$y&&Vy?null:t;default:return null}}function YE(t,e){if(zi)return t==="compositionend"||!Pm&&W1(t,e)?(t=z1(),Cu=Tm=Kr=null,zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return U1&&e.locale!=="ko"?null:e.data;default:return null}}var QE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!QE[t.type]:e==="textarea"}function q1(t,e,n,r){S1(r),e=Zu(e,"onChange"),0<e.length&&(n=new Em("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xa=null,qa=null;function XE(t){rk(t,0)}function ed(t){var e=Hi(t);if(g1(e))return t}function eM(t,e){if(t==="change")return e}var K1=!1;if(vr){var sf;if(vr){var of="oninput"in document;if(!of){var By=document.createElement("div");By.setAttribute("oninput","return;"),of=typeof By.oninput=="function"}sf=of}else sf=!1;K1=sf&&(!document.documentMode||9<document.documentMode)}function zy(){xa&&(xa.detachEvent("onpropertychange",J1),qa=xa=null)}function J1(t){if(t.propertyName==="value"&&ed(qa)){var e=[];q1(e,qa,t,km(t)),E1(XE,e)}}function tM(t,e,n){t==="focusin"?(zy(),xa=e,qa=n,xa.attachEvent("onpropertychange",J1)):t==="focusout"&&zy()}function nM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ed(qa)}function rM(t,e){if(t==="click")return ed(e)}function sM(t,e){if(t==="input"||t==="change")return ed(e)}function iM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rn=typeof Object.is=="function"?Object.is:iM;function Ka(t,e){if(Rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!yh.call(e,s)||!Rn(t[s],e[s]))return!1}return!0}function Uy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wy(t,e){var n=Uy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uy(n)}}function G1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?G1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Z1(){for(var t=window,e=Uu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uu(t.document)}return e}function Om(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oM(t){var e=Z1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&G1(n.ownerDocument.documentElement,n)){if(r!==null&&Om(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Wy(n,i);var o=Wy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aM=vr&&"documentMode"in document&&11>=document.documentMode,Ui=null,Ih=null,wa=null,Lh=!1;function Hy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lh||Ui==null||Ui!==Uu(r)||(r=Ui,"selectionStart"in r&&Om(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wa&&Ka(wa,r)||(wa=r,r=Zu(Ih,"onSelect"),0<r.length&&(e=new Em("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ui)))}function Gl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wi={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},af={},Y1={};vr&&(Y1=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function td(t){if(af[t])return af[t];if(!Wi[t])return t;var e=Wi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Y1)return af[t]=e[n];return t}var Q1=td("animationend"),X1=td("animationiteration"),ek=td("animationstart"),tk=td("transitionend"),nk=new Map,qy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(t,e){nk.set(t,e),xi(e,[t])}for(var lf=0;lf<qy.length;lf++){var uf=qy[lf],lM=uf.toLowerCase(),uM=uf[0].toUpperCase()+uf.slice(1);_s(lM,"on"+uM)}_s(Q1,"onAnimationEnd");_s(X1,"onAnimationIteration");_s(ek,"onAnimationStart");_s("dblclick","onDoubleClick");_s("focusin","onFocus");_s("focusout","onBlur");_s(tk,"onTransitionEnd");po("onMouseEnter",["mouseout","mouseover"]);po("onMouseLeave",["mouseout","mouseover"]);po("onPointerEnter",["pointerout","pointerover"]);po("onPointerLeave",["pointerout","pointerover"]);xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cM=new Set("cancel close invalid load scroll toggle".split(" ").concat(ua));function Ky(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lE(r,e,void 0,t),t.currentTarget=null}function rk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ky(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ky(s,a,u),i=l}}}if(Hu)throw t=Nh,Hu=!1,Nh=null,t}function Pe(t,e){var n=e[zh];n===void 0&&(n=e[zh]=new Set);var r=t+"__bubble";n.has(r)||(sk(e,t,2,!1),n.add(r))}function cf(t,e,n){var r=0;e&&(r|=4),sk(n,t,r,e)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function Ja(t){if(!t[Zl]){t[Zl]=!0,d1.forEach(function(n){n!=="selectionchange"&&(cM.has(n)||cf(n,!1,t),cf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zl]||(e[Zl]=!0,cf("selectionchange",!1,e))}}function sk(t,e,n,r){switch(B1(e)){case 1:var s=_E;break;case 4:s=CE;break;default:s=Cm}n=s.bind(null,e,n,t),s=void 0,!Ah||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function df(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=qs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}E1(function(){var u=i,c=km(n),d=[];e:{var f=nk.get(t);if(f!==void 0){var h=Em,p=t;switch(t){case"keypress":if(Tu(n)===0)break e;case"keydown":case"keyup":h=FE;break;case"focusin":p="focus",h=rf;break;case"focusout":p="blur",h=rf;break;case"beforeblur":case"afterblur":h=rf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=jy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=ME;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=UE;break;case Q1:case X1:case ek:h=AE;break;case tk:h=HE;break;case"scroll":h=TE;break;case"wheel":h=KE;break;case"copy":case"cut":case"paste":h=DE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Ly}var m=(e&4)!==0,y=!m&&t==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var v=u,x;v!==null;){x=v;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,g!==null&&(k=za(v,g),k!=null&&m.push(Ga(v,k,x)))),y)break;v=v.return}0<m.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Ph&&(p=n.relatedTarget||n.fromElement)&&(qs(p)||p[xr]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?qs(p):null,p!==null&&(y=wi(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=jy,k="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=Ly,k="onPointerLeave",g="onPointerEnter",v="pointer"),y=h==null?f:Hi(h),x=p==null?f:Hi(p),f=new m(k,v+"leave",h,n,c),f.target=y,f.relatedTarget=x,k=null,qs(c)===u&&(m=new m(g,v+"enter",p,n,c),m.target=x,m.relatedTarget=y,k=m),y=k,h&&p)t:{for(m=h,g=p,v=0,x=m;x;x=Ei(x))v++;for(x=0,k=g;k;k=Ei(k))x++;for(;0<v-x;)m=Ei(m),v--;for(;0<x-v;)g=Ei(g),x--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=Ei(m),g=Ei(g)}m=null}else m=null;h!==null&&Jy(d,f,h,m,!1),p!==null&&y!==null&&Jy(d,y,p,m,!0)}}e:{if(f=u?Hi(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=eM;else if(Fy(f))if(K1)_=sM;else{_=nM;var T=tM}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=rM);if(_&&(_=_(t,u))){q1(d,_,n,c);break e}T&&T(t,f,u),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&_h(f,"number",f.value)}switch(T=u?Hi(u):window,t){case"focusin":(Fy(T)||T.contentEditable==="true")&&(Ui=T,Ih=u,wa=null);break;case"focusout":wa=Ih=Ui=null;break;case"mousedown":Lh=!0;break;case"contextmenu":case"mouseup":case"dragend":Lh=!1,Hy(d,n,c);break;case"selectionchange":if(aM)break;case"keydown":case"keyup":Hy(d,n,c)}var M;if(Pm)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else zi?W1(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(U1&&n.locale!=="ko"&&(zi||C!=="onCompositionStart"?C==="onCompositionEnd"&&zi&&(M=z1()):(Kr=c,Tm="value"in Kr?Kr.value:Kr.textContent,zi=!0)),T=Zu(u,C),0<T.length&&(C=new Iy(C,t,null,n,c),d.push({event:C,listeners:T}),M?C.data=M:(M=H1(n),M!==null&&(C.data=M)))),(M=GE?ZE(t,n):YE(t,n))&&(u=Zu(u,"onBeforeInput"),0<u.length&&(c=new Iy("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=M))}rk(d,e)})}function Ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=za(t,n),i!=null&&r.unshift(Ga(t,i,s)),i=za(t,e),i!=null&&r.push(Ga(t,i,s))),t=t.return}return r}function Ei(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=za(n,i),l!=null&&o.unshift(Ga(n,l,a))):s||(l=za(n,i),l!=null&&o.push(Ga(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dM=/\r\n?/g,fM=/\u0000|\uFFFD/g;function Gy(t){return(typeof t=="string"?t:""+t).replace(dM,`
`).replace(fM,"")}function Yl(t,e,n){if(e=Gy(e),Gy(t)!==e&&n)throw Error(D(425))}function Yu(){}var $h=null,Vh=null;function Fh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bh=typeof setTimeout=="function"?setTimeout:void 0,hM=typeof clearTimeout=="function"?clearTimeout:void 0,Zy=typeof Promise=="function"?Promise:void 0,pM=typeof queueMicrotask=="function"?queueMicrotask:typeof Zy<"u"?function(t){return Zy.resolve(null).then(t).catch(mM)}:Bh;function mM(t){setTimeout(function(){throw t})}function ff(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ha(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ha(e)}function rs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Lo=Math.random().toString(36).slice(2),Bn="__reactFiber$"+Lo,Za="__reactProps$"+Lo,xr="__reactContainer$"+Lo,zh="__reactEvents$"+Lo,gM="__reactListeners$"+Lo,yM="__reactHandles$"+Lo;function qs(t){var e=t[Bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xr]||n[Bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yy(t);t!==null;){if(n=t[Bn])return n;t=Yy(t)}return e}t=n,n=t.parentNode}return null}function Cl(t){return t=t[Bn]||t[xr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function nd(t){return t[Za]||null}var Uh=[],qi=-1;function Cs(t){return{current:t}}function Oe(t){0>qi||(t.current=Uh[qi],Uh[qi]=null,qi--)}function Ee(t,e){qi++,Uh[qi]=t.current,t.current=e}var ys={},_t=Cs(ys),Wt=Cs(!1),ui=ys;function mo(t,e){var n=t.type.contextTypes;if(!n)return ys;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ht(t){return t=t.childContextTypes,t!=null}function Qu(){Oe(Wt),Oe(_t)}function Qy(t,e,n){if(_t.current!==ys)throw Error(D(168));Ee(_t,e),Ee(Wt,n)}function ik(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(D(108,tE(t)||"Unknown",s));return Ie({},n,r)}function Xu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ys,ui=_t.current,Ee(_t,t),Ee(Wt,Wt.current),!0}function Xy(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=ik(t,e,ui),r.__reactInternalMemoizedMergedChildContext=t,Oe(Wt),Oe(_t),Ee(_t,t)):Oe(Wt),Ee(Wt,n)}var lr=null,rd=!1,hf=!1;function ok(t){lr===null?lr=[t]:lr.push(t)}function vM(t){rd=!0,ok(t)}function Ts(){if(!hf&&lr!==null){hf=!0;var t=0,e=xe;try{var n=lr;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}lr=null,rd=!1}catch(s){throw lr!==null&&(lr=lr.slice(t+1)),A1(bm,Ts),s}finally{xe=e,hf=!1}}return null}var Ki=[],Ji=0,ec=null,tc=0,dn=[],fn=0,ci=null,ur=1,cr="";function Ls(t,e){Ki[Ji++]=tc,Ki[Ji++]=ec,ec=t,tc=e}function ak(t,e,n){dn[fn++]=ur,dn[fn++]=cr,dn[fn++]=ci,ci=t;var r=ur;t=cr;var s=32-Nn(r)-1;r&=~(1<<s),n+=1;var i=32-Nn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ur=1<<32-Nn(e)+s|n<<s|r,cr=i+t}else ur=1<<i|n<<s|r,cr=t}function Am(t){t.return!==null&&(Ls(t,1),ak(t,1,0))}function Nm(t){for(;t===ec;)ec=Ki[--Ji],Ki[Ji]=null,tc=Ki[--Ji],Ki[Ji]=null;for(;t===ci;)ci=dn[--fn],dn[fn]=null,cr=dn[--fn],dn[fn]=null,ur=dn[--fn],dn[fn]=null}var Xt=null,Qt=null,Ae=!1,Mn=null;function lk(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function e0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Qt=rs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ci!==null?{id:ur,overflow:cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xt=t,Qt=null,!0):!1;default:return!1}}function Wh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hh(t){if(Ae){var e=Qt;if(e){var n=e;if(!e0(t,e)){if(Wh(t))throw Error(D(418));e=rs(n.nextSibling);var r=Xt;e&&e0(t,e)?lk(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Xt=t)}}else{if(Wh(t))throw Error(D(418));t.flags=t.flags&-4097|2,Ae=!1,Xt=t}}}function t0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function Ql(t){if(t!==Xt)return!1;if(!Ae)return t0(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fh(t.type,t.memoizedProps)),e&&(e=Qt)){if(Wh(t))throw uk(),Error(D(418));for(;e;)lk(t,e),e=rs(e.nextSibling)}if(t0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=rs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Xt?rs(t.stateNode.nextSibling):null;return!0}function uk(){for(var t=Qt;t;)t=rs(t.nextSibling)}function go(){Qt=Xt=null,Ae=!1}function Dm(t){Mn===null?Mn=[t]:Mn.push(t)}var xM=Cr.ReactCurrentBatchConfig;function Go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function Xl(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function n0(t){var e=t._init;return e(t._payload)}function ck(t){function e(g,v){if(t){var x=g.deletions;x===null?(g.deletions=[v],g.flags|=16):x.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=ls(g,v),g.index=0,g.sibling=null,g}function i(g,v,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<v?(g.flags|=2,v):x):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,v,x,k){return v===null||v.tag!==6?(v=wf(x,g.mode,k),v.return=g,v):(v=s(v,x),v.return=g,v)}function l(g,v,x,k){var _=x.type;return _===Bi?c(g,v,x.props.children,k,x.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Dr&&n0(_)===v.type)?(k=s(v,x.props),k.ref=Go(g,v,x),k.return=g,k):(k=Du(x.type,x.key,x.props,null,g.mode,k),k.ref=Go(g,v,x),k.return=g,k)}function u(g,v,x,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=kf(x,g.mode,k),v.return=g,v):(v=s(v,x.children||[]),v.return=g,v)}function c(g,v,x,k,_){return v===null||v.tag!==7?(v=ni(x,g.mode,k,_),v.return=g,v):(v=s(v,x),v.return=g,v)}function d(g,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=wf(""+v,g.mode,x),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zl:return x=Du(v.type,v.key,v.props,null,g.mode,x),x.ref=Go(g,null,v),x.return=g,x;case Fi:return v=kf(v,g.mode,x),v.return=g,v;case Dr:var k=v._init;return d(g,k(v._payload),x)}if(aa(v)||Wo(v))return v=ni(v,g.mode,x,null),v.return=g,v;Xl(g,v)}return null}function f(g,v,x,k){var _=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(g,v,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zl:return x.key===_?l(g,v,x,k):null;case Fi:return x.key===_?u(g,v,x,k):null;case Dr:return _=x._init,f(g,v,_(x._payload),k)}if(aa(x)||Wo(x))return _!==null?null:c(g,v,x,k,null);Xl(g,x)}return null}function h(g,v,x,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(x)||null,a(v,g,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case zl:return g=g.get(k.key===null?x:k.key)||null,l(v,g,k,_);case Fi:return g=g.get(k.key===null?x:k.key)||null,u(v,g,k,_);case Dr:var T=k._init;return h(g,v,x,T(k._payload),_)}if(aa(k)||Wo(k))return g=g.get(x)||null,c(v,g,k,_,null);Xl(v,k)}return null}function p(g,v,x,k){for(var _=null,T=null,M=v,C=v=0,P=null;M!==null&&C<x.length;C++){M.index>C?(P=M,M=null):P=M.sibling;var A=f(g,M,x[C],k);if(A===null){M===null&&(M=P);break}t&&M&&A.alternate===null&&e(g,M),v=i(A,v,C),T===null?_=A:T.sibling=A,T=A,M=P}if(C===x.length)return n(g,M),Ae&&Ls(g,C),_;if(M===null){for(;C<x.length;C++)M=d(g,x[C],k),M!==null&&(v=i(M,v,C),T===null?_=M:T.sibling=M,T=M);return Ae&&Ls(g,C),_}for(M=r(g,M);C<x.length;C++)P=h(M,g,C,x[C],k),P!==null&&(t&&P.alternate!==null&&M.delete(P.key===null?C:P.key),v=i(P,v,C),T===null?_=P:T.sibling=P,T=P);return t&&M.forEach(function(ee){return e(g,ee)}),Ae&&Ls(g,C),_}function m(g,v,x,k){var _=Wo(x);if(typeof _!="function")throw Error(D(150));if(x=_.call(x),x==null)throw Error(D(151));for(var T=_=null,M=v,C=v=0,P=null,A=x.next();M!==null&&!A.done;C++,A=x.next()){M.index>C?(P=M,M=null):P=M.sibling;var ee=f(g,M,A.value,k);if(ee===null){M===null&&(M=P);break}t&&M&&ee.alternate===null&&e(g,M),v=i(ee,v,C),T===null?_=ee:T.sibling=ee,T=ee,M=P}if(A.done)return n(g,M),Ae&&Ls(g,C),_;if(M===null){for(;!A.done;C++,A=x.next())A=d(g,A.value,k),A!==null&&(v=i(A,v,C),T===null?_=A:T.sibling=A,T=A);return Ae&&Ls(g,C),_}for(M=r(g,M);!A.done;C++,A=x.next())A=h(M,g,C,A.value,k),A!==null&&(t&&A.alternate!==null&&M.delete(A.key===null?C:A.key),v=i(A,v,C),T===null?_=A:T.sibling=A,T=A);return t&&M.forEach(function(J){return e(g,J)}),Ae&&Ls(g,C),_}function y(g,v,x,k){if(typeof x=="object"&&x!==null&&x.type===Bi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case zl:e:{for(var _=x.key,T=v;T!==null;){if(T.key===_){if(_=x.type,_===Bi){if(T.tag===7){n(g,T.sibling),v=s(T,x.props.children),v.return=g,g=v;break e}}else if(T.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Dr&&n0(_)===T.type){n(g,T.sibling),v=s(T,x.props),v.ref=Go(g,T,x),v.return=g,g=v;break e}n(g,T);break}else e(g,T);T=T.sibling}x.type===Bi?(v=ni(x.props.children,g.mode,k,x.key),v.return=g,g=v):(k=Du(x.type,x.key,x.props,null,g.mode,k),k.ref=Go(g,v,x),k.return=g,g=k)}return o(g);case Fi:e:{for(T=x.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(g,v.sibling),v=s(v,x.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=kf(x,g.mode,k),v.return=g,g=v}return o(g);case Dr:return T=x._init,y(g,v,T(x._payload),k)}if(aa(x))return p(g,v,x,k);if(Wo(x))return m(g,v,x,k);Xl(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(g,v.sibling),v=s(v,x),v.return=g,g=v):(n(g,v),v=wf(x,g.mode,k),v.return=g,g=v),o(g)):n(g,v)}return y}var yo=ck(!0),dk=ck(!1),nc=Cs(null),rc=null,Gi=null,Rm=null;function jm(){Rm=Gi=rc=null}function Im(t){var e=nc.current;Oe(nc),t._currentValue=e}function qh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function lo(t,e){rc=t,Rm=Gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zt=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(Rm!==t)if(t={context:t,memoizedValue:e,next:null},Gi===null){if(rc===null)throw Error(D(308));Gi=t,rc.dependencies={lanes:0,firstContext:t}}else Gi=Gi.next=t;return e}var Ks=null;function Lm(t){Ks===null?Ks=[t]:Ks.push(t)}function fk(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Lm(e)):(n.next=s.next,s.next=n),e.interleaved=n,wr(t,r)}function wr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Rr=!1;function $m(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,wr(t,n)}return s=r.interleaved,s===null?(e.next=e,Lm(r)):(e.next=s.next,s.next=e),r.interleaved=e,wr(t,n)}function Eu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sm(t,n)}}function r0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sc(t,e,n,r){var s=t.updateQueue;Rr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,c=u=l=null,a=i;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Ie({},d,f);break e;case 2:Rr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);fi|=o,t.lanes=o,t.memoizedState=d}}function s0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var Tl={},Hn=Cs(Tl),Ya=Cs(Tl),Qa=Cs(Tl);function Js(t){if(t===Tl)throw Error(D(174));return t}function Vm(t,e){switch(Ee(Qa,e),Ee(Ya,t),Ee(Hn,Tl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Th(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Th(e,t)}Oe(Hn),Ee(Hn,e)}function vo(){Oe(Hn),Oe(Ya),Oe(Qa)}function pk(t){Js(Qa.current);var e=Js(Hn.current),n=Th(e,t.type);e!==n&&(Ee(Ya,t),Ee(Hn,n))}function Fm(t){Ya.current===t&&(Oe(Hn),Oe(Ya))}var Ne=Cs(0);function ic(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pf=[];function Bm(){for(var t=0;t<pf.length;t++)pf[t]._workInProgressVersionPrimary=null;pf.length=0}var Mu=Cr.ReactCurrentDispatcher,mf=Cr.ReactCurrentBatchConfig,di=0,je=null,Ze=null,et=null,oc=!1,ka=!1,Xa=0,wM=0;function gt(){throw Error(D(321))}function zm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rn(t[n],e[n]))return!1;return!0}function Um(t,e,n,r,s,i){if(di=i,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mu.current=t===null||t.memoizedState===null?_M:CM,t=n(r,s),ka){i=0;do{if(ka=!1,Xa=0,25<=i)throw Error(D(301));i+=1,et=Ze=null,e.updateQueue=null,Mu.current=TM,t=n(r,s)}while(ka)}if(Mu.current=ac,e=Ze!==null&&Ze.next!==null,di=0,et=Ze=je=null,oc=!1,e)throw Error(D(300));return t}function Wm(){var t=Xa!==0;return Xa=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?je.memoizedState=et=t:et=et.next=t,et}function wn(){if(Ze===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=et===null?je.memoizedState:et.next;if(e!==null)et=e,Ze=t;else{if(t===null)throw Error(D(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},et===null?je.memoizedState=et=t:et=et.next=t}return et}function el(t,e){return typeof e=="function"?e(t):e}function gf(t){var e=wn(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=Ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((di&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,je.lanes|=c,fi|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Rn(r,e.memoizedState)||(zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,je.lanes|=i,fi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yf(t){var e=wn(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Rn(i,e.memoizedState)||(zt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function mk(){}function gk(t,e){var n=je,r=wn(),s=e(),i=!Rn(r.memoizedState,s);if(i&&(r.memoizedState=s,zt=!0),r=r.queue,Hm(xk.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,tl(9,vk.bind(null,n,r,s,e),void 0,null),rt===null)throw Error(D(349));di&30||yk(n,e,s)}return s}function yk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vk(t,e,n,r){e.value=n,e.getSnapshot=r,wk(e)&&kk(t)}function xk(t,e,n){return n(function(){wk(e)&&kk(t)})}function wk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rn(t,n)}catch{return!0}}function kk(t){var e=wr(t,1);e!==null&&Dn(e,t,1,-1)}function i0(t){var e=$n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:t},e.queue=t,t=t.dispatch=SM.bind(null,je,t),[e.memoizedState,t]}function tl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bk(){return wn().memoizedState}function Pu(t,e,n,r){var s=$n();je.flags|=t,s.memoizedState=tl(1|e,n,void 0,r===void 0?null:r)}function sd(t,e,n,r){var s=wn();r=r===void 0?null:r;var i=void 0;if(Ze!==null){var o=Ze.memoizedState;if(i=o.destroy,r!==null&&zm(r,o.deps)){s.memoizedState=tl(e,n,i,r);return}}je.flags|=t,s.memoizedState=tl(1|e,n,i,r)}function o0(t,e){return Pu(8390656,8,t,e)}function Hm(t,e){return sd(2048,8,t,e)}function Sk(t,e){return sd(4,2,t,e)}function _k(t,e){return sd(4,4,t,e)}function Ck(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Tk(t,e,n){return n=n!=null?n.concat([t]):null,sd(4,4,Ck.bind(null,e,t),n)}function qm(){}function Ek(t,e){var n=wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Mk(t,e){var n=wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Pk(t,e,n){return di&21?(Rn(n,e)||(n=R1(),je.lanes|=n,fi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zt=!0),t.memoizedState=n)}function kM(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=mf.transition;mf.transition={};try{t(!1),e()}finally{xe=n,mf.transition=r}}function Ok(){return wn().memoizedState}function bM(t,e,n){var r=as(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ak(t))Nk(e,n);else if(n=fk(t,e,n,r),n!==null){var s=Ot();Dn(n,t,r,s),Dk(n,e,r)}}function SM(t,e,n){var r=as(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ak(t))Nk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Rn(a,o)){var l=e.interleaved;l===null?(s.next=s,Lm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=fk(t,e,s,r),n!==null&&(s=Ot(),Dn(n,t,r,s),Dk(n,e,r))}}function Ak(t){var e=t.alternate;return t===je||e!==null&&e===je}function Nk(t,e){ka=oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Dk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sm(t,n)}}var ac={readContext:xn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},_M={readContext:xn,useCallback:function(t,e){return $n().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:o0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pu(4194308,4,Ck.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pu(4,2,t,e)},useMemo:function(t,e){var n=$n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$n();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bM.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=$n();return t={current:t},e.memoizedState=t},useState:i0,useDebugValue:qm,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=i0(!1),e=t[0];return t=kM.bind(null,t[1]),$n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,s=$n();if(Ae){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),rt===null)throw Error(D(349));di&30||yk(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,o0(xk.bind(null,r,i,t),[t]),r.flags|=2048,tl(9,vk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=$n(),e=rt.identifierPrefix;if(Ae){var n=cr,r=ur;n=(r&~(1<<32-Nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CM={readContext:xn,useCallback:Ek,useContext:xn,useEffect:Hm,useImperativeHandle:Tk,useInsertionEffect:Sk,useLayoutEffect:_k,useMemo:Mk,useReducer:gf,useRef:bk,useState:function(){return gf(el)},useDebugValue:qm,useDeferredValue:function(t){var e=wn();return Pk(e,Ze.memoizedState,t)},useTransition:function(){var t=gf(el)[0],e=wn().memoizedState;return[t,e]},useMutableSource:mk,useSyncExternalStore:gk,useId:Ok,unstable_isNewReconciler:!1},TM={readContext:xn,useCallback:Ek,useContext:xn,useEffect:Hm,useImperativeHandle:Tk,useInsertionEffect:Sk,useLayoutEffect:_k,useMemo:Mk,useReducer:yf,useRef:bk,useState:function(){return yf(el)},useDebugValue:qm,useDeferredValue:function(t){var e=wn();return Ze===null?e.memoizedState=t:Pk(e,Ze.memoizedState,t)},useTransition:function(){var t=yf(el)[0],e=wn().memoizedState;return[t,e]},useMutableSource:mk,useSyncExternalStore:gk,useId:Ok,unstable_isNewReconciler:!1};function Cn(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Kh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var id={isMounted:function(t){return(t=t._reactInternals)?wi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=as(t),i=hr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ss(t,i,s),e!==null&&(Dn(e,t,s,r),Eu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=as(t),i=hr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ss(t,i,s),e!==null&&(Dn(e,t,s,r),Eu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ot(),r=as(t),s=hr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ss(t,s,r),e!==null&&(Dn(e,t,r,n),Eu(e,t,r))}};function a0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ka(n,r)||!Ka(s,i):!0}function Rk(t,e,n){var r=!1,s=ys,i=e.contextType;return typeof i=="object"&&i!==null?i=xn(i):(s=Ht(e)?ui:_t.current,r=e.contextTypes,i=(r=r!=null)?mo(t,s):ys),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=id,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function l0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&id.enqueueReplaceState(e,e.state,null)}function Jh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},$m(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=xn(i):(i=Ht(e)?ui:_t.current,s.context=mo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Kh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&id.enqueueReplaceState(s,s.state,null),sc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xo(t,e){try{var n="",r=e;do n+=eE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function vf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var EM=typeof WeakMap=="function"?WeakMap:Map;function jk(t,e,n){n=hr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uc||(uc=!0,ip=r),Gh(t,e)},n}function Ik(t,e,n){n=hr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Gh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Gh(t,e),typeof r!="function"&&(is===null?is=new Set([this]):is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function u0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new EM;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=BM.bind(null,t,e,n),e.then(t,t))}function c0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function d0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hr(-1,1),e.tag=2,ss(n,e,1))),n.lanes|=1),t)}var MM=Cr.ReactCurrentOwner,zt=!1;function Mt(t,e,n,r){e.child=t===null?dk(e,null,n,r):yo(e,t.child,n,r)}function f0(t,e,n,r,s){n=n.render;var i=e.ref;return lo(e,s),r=Um(t,e,n,r,i,s),n=Wm(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,kr(t,e,s)):(Ae&&n&&Am(e),e.flags|=1,Mt(t,e,r,s),e.child)}function h0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!eg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Lk(t,e,i,r,s)):(t=Du(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ka,n(o,r)&&t.ref===e.ref)return kr(t,e,s)}return e.flags|=1,t=ls(i,r),t.ref=e.ref,t.return=e,e.child=t}function Lk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ka(i,r)&&t.ref===e.ref)if(zt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(zt=!0);else return e.lanes=t.lanes,kr(t,e,s)}return Zh(t,e,n,r,s)}function $k(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Yi,Zt),Zt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(Yi,Zt),Zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ee(Yi,Zt),Zt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ee(Yi,Zt),Zt|=r;return Mt(t,e,s,n),e.child}function Vk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zh(t,e,n,r,s){var i=Ht(n)?ui:_t.current;return i=mo(e,i),lo(e,s),n=Um(t,e,n,r,i,s),r=Wm(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,kr(t,e,s)):(Ae&&r&&Am(e),e.flags|=1,Mt(t,e,n,s),e.child)}function p0(t,e,n,r,s){if(Ht(n)){var i=!0;Xu(e)}else i=!1;if(lo(e,s),e.stateNode===null)Ou(t,e),Rk(e,n,r),Jh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=xn(u):(u=Ht(n)?ui:_t.current,u=mo(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&l0(e,o,r,u),Rr=!1;var f=e.memoizedState;o.state=f,sc(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Wt.current||Rr?(typeof c=="function"&&(Kh(e,n,c,r),l=e.memoizedState),(a=Rr||a0(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,hk(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Cn(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xn(l):(l=Ht(n)?ui:_t.current,l=mo(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&l0(e,o,r,l),Rr=!1,f=e.memoizedState,o.state=f,sc(e,r,o,s);var p=e.memoizedState;a!==d||f!==p||Wt.current||Rr?(typeof h=="function"&&(Kh(e,n,h,r),p=e.memoizedState),(u=Rr||a0(e,n,u,r,f,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Yh(t,e,n,r,i,s)}function Yh(t,e,n,r,s,i){Vk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Xy(e,n,!1),kr(t,e,i);r=e.stateNode,MM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=yo(e,t.child,null,i),e.child=yo(e,null,a,i)):Mt(t,e,a,i),e.memoizedState=r.state,s&&Xy(e,n,!0),e.child}function Fk(t){var e=t.stateNode;e.pendingContext?Qy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qy(t,e.context,!1),Vm(t,e.containerInfo)}function m0(t,e,n,r,s){return go(),Dm(s),e.flags|=256,Mt(t,e,n,r),e.child}var Qh={dehydrated:null,treeContext:null,retryLane:0};function Xh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bk(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ee(Ne,s&1),t===null)return Hh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ld(o,r,0,null),t=ni(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Xh(n),e.memoizedState=Qh,t):Km(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return PM(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ls(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ls(a,i):(i=ni(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Xh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Qh,r}return i=t.child,t=i.sibling,r=ls(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Km(t,e){return e=ld({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function eu(t,e,n,r){return r!==null&&Dm(r),yo(e,t.child,null,n),t=Km(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PM(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=vf(Error(D(422))),eu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ld({mode:"visible",children:r.children},s,0,null),i=ni(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&yo(e,t.child,null,o),e.child.memoizedState=Xh(o),e.memoizedState=Qh,i);if(!(e.mode&1))return eu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(D(419)),r=vf(i,r,void 0),eu(t,e,o,r)}if(a=(o&t.childLanes)!==0,zt||a){if(r=rt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,wr(t,s),Dn(r,t,s,-1))}return Xm(),r=vf(Error(D(421))),eu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=zM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Qt=rs(s.nextSibling),Xt=e,Ae=!0,Mn=null,t!==null&&(dn[fn++]=ur,dn[fn++]=cr,dn[fn++]=ci,ur=t.id,cr=t.overflow,ci=e),e=Km(e,r.children),e.flags|=4096,e)}function g0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qh(t.return,e,n)}function xf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Mt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g0(t,n,e);else if(t.tag===19)g0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ic(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),xf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ic(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}xf(e,!0,n,null,i);break;case"together":xf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ou(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=ls(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ls(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OM(t,e,n){switch(e.tag){case 3:Fk(e),go();break;case 5:pk(e);break;case 1:Ht(e.type)&&Xu(e);break;case 4:Vm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ee(nc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?Bk(t,e,n):(Ee(Ne,Ne.current&1),t=kr(t,e,n),t!==null?t.sibling:null);Ee(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,$k(t,e,n)}return kr(t,e,n)}var Uk,ep,Wk,Hk;Uk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ep=function(){};Wk=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Js(Hn.current);var i=null;switch(n){case"input":s=bh(t,s),r=bh(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=Ch(t,s),r=Ch(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yu)}Eh(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Pe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Hk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zo(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function AM(t,e,n){var r=e.pendingProps;switch(Nm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return Ht(e.type)&&Qu(),yt(e),null;case 3:return r=e.stateNode,vo(),Oe(Wt),Oe(_t),Bm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ql(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mn!==null&&(lp(Mn),Mn=null))),ep(t,e),yt(e),null;case 5:Fm(e);var s=Js(Qa.current);if(n=e.type,t!==null&&e.stateNode!=null)Wk(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return yt(e),null}if(t=Js(Hn.current),Ql(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bn]=e,r[Za]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<ua.length;s++)Pe(ua[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":Cy(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":Ey(r,i),Pe("invalid",r)}Eh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Yl(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Yl(r.textContent,a,t),s=["children",""+a]):Fa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":Ul(r),Ty(r,i,!0);break;case"textarea":Ul(r),My(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Yu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=x1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bn]=e,t[Za]=r,Uk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Mh(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<ua.length;s++)Pe(ua[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":Cy(t,r),s=bh(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":Ey(t,r),s=Ch(t,r),Pe("invalid",t);break;default:s=r}Eh(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?b1(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&w1(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ba(t,l):typeof l=="number"&&Ba(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Fa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Pe("scroll",t):l!=null&&ym(t,i,l,o))}switch(n){case"input":Ul(t),Ty(t,r,!1);break;case"textarea":Ul(t),My(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?so(t,!!r.multiple,i,!1):r.defaultValue!=null&&so(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Yu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)Hk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=Js(Qa.current),Js(Hn.current),Ql(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bn]=e,(i=r.nodeValue!==n)&&(t=Xt,t!==null))switch(t.tag){case 3:Yl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=e,e.stateNode=r}return yt(e),null;case 13:if(Oe(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Qt!==null&&e.mode&1&&!(e.flags&128))uk(),go(),e.flags|=98560,i=!1;else if(i=Ql(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(D(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Bn]=e}else go(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),i=!1}else Mn!==null&&(lp(Mn),Mn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Ye===0&&(Ye=3):Xm())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return vo(),ep(t,e),t===null&&Ja(e.stateNode.containerInfo),yt(e),null;case 10:return Im(e.type._context),yt(e),null;case 17:return Ht(e.type)&&Qu(),yt(e),null;case 19:if(Oe(Ne),i=e.memoizedState,i===null)return yt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Zo(i,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ic(t),o!==null){for(e.flags|=128,Zo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&ze()>wo&&(e.flags|=128,r=!0,Zo(i,!1),e.lanes=4194304)}else{if(!r)if(t=ic(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ae)return yt(e),null}else 2*ze()-i.renderingStartTime>wo&&n!==1073741824&&(e.flags|=128,r=!0,Zo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ze(),e.sibling=null,n=Ne.current,Ee(Ne,r?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return Qm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zt&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function NM(t,e){switch(Nm(e),e.tag){case 1:return Ht(e.type)&&Qu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vo(),Oe(Wt),Oe(_t),Bm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fm(e),null;case 13:if(Oe(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));go()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Ne),null;case 4:return vo(),null;case 10:return Im(e.type._context),null;case 22:case 23:return Qm(),null;case 24:return null;default:return null}}var tu=!1,kt=!1,DM=typeof WeakSet=="function"?WeakSet:Set,z=null;function Zi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function tp(t,e,n){try{n()}catch(r){$e(t,e,r)}}var y0=!1;function RM(t,e){if($h=Ju,t=Z1(),Om(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++c===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vh={focusedElem:t,selectionRange:n},Ju=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Cn(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(k){$e(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return p=y0,y0=!1,p}function ba(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&tp(e,n,i)}s=s.next}while(s!==r)}}function od(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function np(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qk(t){var e=t.alternate;e!==null&&(t.alternate=null,qk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bn],delete e[Za],delete e[zh],delete e[gM],delete e[yM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kk(t){return t.tag===5||t.tag===3||t.tag===4}function v0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yu));else if(r!==4&&(t=t.child,t!==null))for(rp(t,e,n),t=t.sibling;t!==null;)rp(t,e,n),t=t.sibling}function sp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sp(t,e,n),t=t.sibling;t!==null;)sp(t,e,n),t=t.sibling}var lt=null,Tn=!1;function Pr(t,e,n){for(n=n.child;n!==null;)Jk(t,e,n),n=n.sibling}function Jk(t,e,n){if(Wn&&typeof Wn.onCommitFiberUnmount=="function")try{Wn.onCommitFiberUnmount(Qc,n)}catch{}switch(n.tag){case 5:kt||Zi(n,e);case 6:var r=lt,s=Tn;lt=null,Pr(t,e,n),lt=r,Tn=s,lt!==null&&(Tn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(Tn?(t=lt,n=n.stateNode,t.nodeType===8?ff(t.parentNode,n):t.nodeType===1&&ff(t,n),Ha(t)):ff(lt,n.stateNode));break;case 4:r=lt,s=Tn,lt=n.stateNode.containerInfo,Tn=!0,Pr(t,e,n),lt=r,Tn=s;break;case 0:case 11:case 14:case 15:if(!kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&tp(n,e,o),s=s.next}while(s!==r)}Pr(t,e,n);break;case 1:if(!kt&&(Zi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){$e(n,e,a)}Pr(t,e,n);break;case 21:Pr(t,e,n);break;case 22:n.mode&1?(kt=(r=kt)||n.memoizedState!==null,Pr(t,e,n),kt=r):Pr(t,e,n);break;default:Pr(t,e,n)}}function x0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DM),e.forEach(function(r){var s=UM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Sn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,Tn=!1;break e;case 3:lt=a.stateNode.containerInfo,Tn=!0;break e;case 4:lt=a.stateNode.containerInfo,Tn=!0;break e}a=a.return}if(lt===null)throw Error(D(160));Jk(i,o,s),lt=null,Tn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){$e(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gk(e,t),e=e.sibling}function Gk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sn(e,t),Ln(t),r&4){try{ba(3,t,t.return),od(3,t)}catch(m){$e(t,t.return,m)}try{ba(5,t,t.return)}catch(m){$e(t,t.return,m)}}break;case 1:Sn(e,t),Ln(t),r&512&&n!==null&&Zi(n,n.return);break;case 5:if(Sn(e,t),Ln(t),r&512&&n!==null&&Zi(n,n.return),t.flags&32){var s=t.stateNode;try{Ba(s,"")}catch(m){$e(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&y1(s,i),Mh(a,o);var u=Mh(a,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?b1(s,d):c==="dangerouslySetInnerHTML"?w1(s,d):c==="children"?Ba(s,d):ym(s,c,d,u)}switch(a){case"input":Sh(s,i);break;case"textarea":v1(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?so(s,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?so(s,!!i.multiple,i.defaultValue,!0):so(s,!!i.multiple,i.multiple?[]:"",!1))}s[Za]=i}catch(m){$e(t,t.return,m)}}break;case 6:if(Sn(e,t),Ln(t),r&4){if(t.stateNode===null)throw Error(D(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){$e(t,t.return,m)}}break;case 3:if(Sn(e,t),Ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ha(e.containerInfo)}catch(m){$e(t,t.return,m)}break;case 4:Sn(e,t),Ln(t);break;case 13:Sn(e,t),Ln(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zm=ze())),r&4&&x0(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(kt=(u=kt)||c,Sn(e,t),kt=u):Sn(e,t),Ln(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(z=t,c=t.child;c!==null;){for(d=z=c;z!==null;){switch(f=z,h=f.child,f.tag){case 0:case 11:case 14:case 15:ba(4,f,f.return);break;case 1:Zi(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){$e(r,n,m)}}break;case 5:Zi(f,f.return);break;case 22:if(f.memoizedState!==null){k0(d);continue}}h!==null?(h.return=f,z=h):k0(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=k1("display",o))}catch(m){$e(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){$e(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Sn(e,t),Ln(t),r&4&&x0(t);break;case 21:break;default:Sn(e,t),Ln(t)}}function Ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Kk(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ba(s,""),r.flags&=-33);var i=v0(t);sp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=v0(t);rp(t,a,o);break;default:throw Error(D(161))}}catch(l){$e(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jM(t,e,n){z=t,Zk(t)}function Zk(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var s=z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||tu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||kt;a=tu;var u=kt;if(tu=o,(kt=l)&&!u)for(z=s;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?b0(s):l!==null?(l.return=o,z=l):b0(s);for(;i!==null;)z=i,Zk(i),i=i.sibling;z=s,tu=a,kt=u}w0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,z=i):w0(t)}}function w0(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kt||od(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Cn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&s0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}s0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ha(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}kt||e.flags&512&&np(e)}catch(f){$e(e,e.return,f)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function k0(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function b0(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{od(4,e)}catch(l){$e(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){$e(e,s,l)}}var i=e.return;try{np(e)}catch(l){$e(e,i,l)}break;case 5:var o=e.return;try{np(e)}catch(l){$e(e,o,l)}}}catch(l){$e(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var IM=Math.ceil,lc=Cr.ReactCurrentDispatcher,Jm=Cr.ReactCurrentOwner,mn=Cr.ReactCurrentBatchConfig,he=0,rt=null,Je=null,ft=0,Zt=0,Yi=Cs(0),Ye=0,nl=null,fi=0,ad=0,Gm=0,Sa=null,Ft=null,Zm=0,wo=1/0,ir=null,uc=!1,ip=null,is=null,nu=!1,Jr=null,cc=0,_a=0,op=null,Au=-1,Nu=0;function Ot(){return he&6?ze():Au!==-1?Au:Au=ze()}function as(t){return t.mode&1?he&2&&ft!==0?ft&-ft:xM.transition!==null?(Nu===0&&(Nu=R1()),Nu):(t=xe,t!==0||(t=window.event,t=t===void 0?16:B1(t.type)),t):1}function Dn(t,e,n,r){if(50<_a)throw _a=0,op=null,Error(D(185));Sl(t,n,r),(!(he&2)||t!==rt)&&(t===rt&&(!(he&2)&&(ad|=n),Ye===4&&Br(t,ft)),qt(t,r),n===1&&he===0&&!(e.mode&1)&&(wo=ze()+500,rd&&Ts()))}function qt(t,e){var n=t.callbackNode;xE(t,e);var r=Ku(t,t===rt?ft:0);if(r===0)n!==null&&Ay(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ay(n),e===1)t.tag===0?vM(S0.bind(null,t)):ok(S0.bind(null,t)),pM(function(){!(he&6)&&Ts()}),n=null;else{switch(j1(r)){case 1:n=bm;break;case 4:n=N1;break;case 16:n=qu;break;case 536870912:n=D1;break;default:n=qu}n=sb(n,Yk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Yk(t,e){if(Au=-1,Nu=0,he&6)throw Error(D(327));var n=t.callbackNode;if(uo()&&t.callbackNode!==n)return null;var r=Ku(t,t===rt?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dc(t,r);else{e=r;var s=he;he|=2;var i=Xk();(rt!==t||ft!==e)&&(ir=null,wo=ze()+500,ti(t,e));do try{VM();break}catch(a){Qk(t,a)}while(!0);jm(),lc.current=i,he=s,Je!==null?e=0:(rt=null,ft=0,e=Ye)}if(e!==0){if(e===2&&(s=Dh(t),s!==0&&(r=s,e=ap(t,s))),e===1)throw n=nl,ti(t,0),Br(t,r),qt(t,ze()),n;if(e===6)Br(t,r);else{if(s=t.current.alternate,!(r&30)&&!LM(s)&&(e=dc(t,r),e===2&&(i=Dh(t),i!==0&&(r=i,e=ap(t,i))),e===1))throw n=nl,ti(t,0),Br(t,r),qt(t,ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:$s(t,Ft,ir);break;case 3:if(Br(t,r),(r&130023424)===r&&(e=Zm+500-ze(),10<e)){if(Ku(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ot(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Bh($s.bind(null,t,Ft,ir),e);break}$s(t,Ft,ir);break;case 4:if(Br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Nn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IM(r/1960))-r,10<r){t.timeoutHandle=Bh($s.bind(null,t,Ft,ir),r);break}$s(t,Ft,ir);break;case 5:$s(t,Ft,ir);break;default:throw Error(D(329))}}}return qt(t,ze()),t.callbackNode===n?Yk.bind(null,t):null}function ap(t,e){var n=Sa;return t.current.memoizedState.isDehydrated&&(ti(t,e).flags|=256),t=dc(t,e),t!==2&&(e=Ft,Ft=n,e!==null&&lp(e)),t}function lp(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function LM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Rn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Br(t,e){for(e&=~Gm,e&=~ad,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nn(e),r=1<<n;t[n]=-1,e&=~r}}function S0(t){if(he&6)throw Error(D(327));uo();var e=Ku(t,0);if(!(e&1))return qt(t,ze()),null;var n=dc(t,e);if(t.tag!==0&&n===2){var r=Dh(t);r!==0&&(e=r,n=ap(t,r))}if(n===1)throw n=nl,ti(t,0),Br(t,e),qt(t,ze()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,Ft,ir),qt(t,ze()),null}function Ym(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(wo=ze()+500,rd&&Ts())}}function hi(t){Jr!==null&&Jr.tag===0&&!(he&6)&&uo();var e=he;he|=1;var n=mn.transition,r=xe;try{if(mn.transition=null,xe=1,t)return t()}finally{xe=r,mn.transition=n,he=e,!(he&6)&&Ts()}}function Qm(){Zt=Yi.current,Oe(Yi)}function ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hM(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(Nm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qu();break;case 3:vo(),Oe(Wt),Oe(_t),Bm();break;case 5:Fm(r);break;case 4:vo();break;case 13:Oe(Ne);break;case 19:Oe(Ne);break;case 10:Im(r.type._context);break;case 22:case 23:Qm()}n=n.return}if(rt=t,Je=t=ls(t.current,null),ft=Zt=e,Ye=0,nl=null,Gm=ad=fi=0,Ft=Sa=null,Ks!==null){for(e=0;e<Ks.length;e++)if(n=Ks[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ks=null}return t}function Qk(t,e){do{var n=Je;try{if(jm(),Mu.current=ac,oc){for(var r=je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}oc=!1}if(di=0,et=Ze=je=null,ka=!1,Xa=0,Jm.current=null,n===null||n.return===null){Ye=1,nl=e,Je=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=ft,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=c0(o);if(h!==null){h.flags&=-257,d0(h,o,a,i,e),h.mode&1&&u0(i,u,e),e=h,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){u0(i,u,e),Xm();break e}l=Error(D(426))}}else if(Ae&&a.mode&1){var y=c0(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),d0(y,o,a,i,e),Dm(xo(l,a));break e}}i=l=xo(l,a),Ye!==4&&(Ye=2),Sa===null?Sa=[i]:Sa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=jk(i,l,e);r0(i,g);break e;case 1:a=l;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(is===null||!is.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=Ik(i,a,e);r0(i,k);break e}}i=i.return}while(i!==null)}tb(n)}catch(_){e=_,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function Xk(){var t=lc.current;return lc.current=ac,t===null?ac:t}function Xm(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),rt===null||!(fi&268435455)&&!(ad&268435455)||Br(rt,ft)}function dc(t,e){var n=he;he|=2;var r=Xk();(rt!==t||ft!==e)&&(ir=null,ti(t,e));do try{$M();break}catch(s){Qk(t,s)}while(!0);if(jm(),he=n,lc.current=r,Je!==null)throw Error(D(261));return rt=null,ft=0,Ye}function $M(){for(;Je!==null;)eb(Je)}function VM(){for(;Je!==null&&!cE();)eb(Je)}function eb(t){var e=rb(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,e===null?tb(t):Je=e,Jm.current=null}function tb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=NM(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,Je=null;return}}else if(n=AM(n,e,Zt),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);Ye===0&&(Ye=5)}function $s(t,e,n){var r=xe,s=mn.transition;try{mn.transition=null,xe=1,FM(t,e,n,r)}finally{mn.transition=s,xe=r}return null}function FM(t,e,n,r){do uo();while(Jr!==null);if(he&6)throw Error(D(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(wE(t,i),t===rt&&(Je=rt=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nu||(nu=!0,sb(qu,function(){return uo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mn.transition,mn.transition=null;var o=xe;xe=1;var a=he;he|=4,Jm.current=null,RM(t,n),Gk(n,t),oM(Vh),Ju=!!$h,Vh=$h=null,t.current=n,jM(n),dE(),he=a,xe=o,mn.transition=i}else t.current=n;if(nu&&(nu=!1,Jr=t,cc=s),i=t.pendingLanes,i===0&&(is=null),pE(n.stateNode),qt(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(uc)throw uc=!1,t=ip,ip=null,t;return cc&1&&t.tag!==0&&uo(),i=t.pendingLanes,i&1?t===op?_a++:(_a=0,op=t):_a=0,Ts(),null}function uo(){if(Jr!==null){var t=j1(cc),e=mn.transition,n=xe;try{if(mn.transition=null,xe=16>t?16:t,Jr===null)var r=!1;else{if(t=Jr,Jr=null,cc=0,he&6)throw Error(D(331));var s=he;for(he|=4,z=t.current;z!==null;){var i=z,o=i.child;if(z.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(z=u;z!==null;){var c=z;switch(c.tag){case 0:case 11:case 15:ba(8,c,i)}var d=c.child;if(d!==null)d.return=c,z=d;else for(;z!==null;){c=z;var f=c.sibling,h=c.return;if(qk(c),c===u){z=null;break}if(f!==null){f.return=h,z=f;break}z=h}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,z=o;else e:for(;z!==null;){if(i=z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ba(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,z=g;break e}z=i.return}}var v=t.current;for(z=v;z!==null;){o=z;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,z=x;else e:for(o=v;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:od(9,a)}}catch(_){$e(a,a.return,_)}if(a===o){z=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,z=k;break e}z=a.return}}if(he=s,Ts(),Wn&&typeof Wn.onPostCommitFiberRoot=="function")try{Wn.onPostCommitFiberRoot(Qc,t)}catch{}r=!0}return r}finally{xe=n,mn.transition=e}}return!1}function _0(t,e,n){e=xo(n,e),e=jk(t,e,1),t=ss(t,e,1),e=Ot(),t!==null&&(Sl(t,1,e),qt(t,e))}function $e(t,e,n){if(t.tag===3)_0(t,t,n);else for(;e!==null;){if(e.tag===3){_0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(is===null||!is.has(r))){t=xo(n,t),t=Ik(e,t,1),e=ss(e,t,1),t=Ot(),e!==null&&(Sl(e,1,t),qt(e,t));break}}e=e.return}}function BM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(ft&n)===n&&(Ye===4||Ye===3&&(ft&130023424)===ft&&500>ze()-Zm?ti(t,0):Gm|=n),qt(t,e)}function nb(t,e){e===0&&(t.mode&1?(e=ql,ql<<=1,!(ql&130023424)&&(ql=4194304)):e=1);var n=Ot();t=wr(t,e),t!==null&&(Sl(t,e,n),qt(t,n))}function zM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nb(t,n)}function UM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),nb(t,n)}var rb;rb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wt.current)zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zt=!1,OM(t,e,n);zt=!!(t.flags&131072)}else zt=!1,Ae&&e.flags&1048576&&ak(e,tc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ou(t,e),t=e.pendingProps;var s=mo(e,_t.current);lo(e,n),s=Um(null,e,r,t,s,n);var i=Wm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(i=!0,Xu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$m(e),s.updater=id,e.stateNode=s,s._reactInternals=e,Jh(e,r,t,n),e=Yh(null,e,r,!0,i,n)):(e.tag=0,Ae&&i&&Am(e),Mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ou(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=HM(r),t=Cn(r,t),s){case 0:e=Zh(null,e,r,t,n);break e;case 1:e=p0(null,e,r,t,n);break e;case 11:e=f0(null,e,r,t,n);break e;case 14:e=h0(null,e,r,Cn(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),Zh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),p0(t,e,r,s,n);case 3:e:{if(Fk(e),t===null)throw Error(D(387));r=e.pendingProps,i=e.memoizedState,s=i.element,hk(t,e),sc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=xo(Error(D(423)),e),e=m0(t,e,r,n,s);break e}else if(r!==s){s=xo(Error(D(424)),e),e=m0(t,e,r,n,s);break e}else for(Qt=rs(e.stateNode.containerInfo.firstChild),Xt=e,Ae=!0,Mn=null,n=dk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(go(),r===s){e=kr(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return pk(e),t===null&&Hh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Fh(r,s)?o=null:i!==null&&Fh(r,i)&&(e.flags|=32),Vk(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&Hh(e),null;case 13:return Bk(t,e,n);case 4:return Vm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=yo(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),f0(t,e,r,s,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ee(nc,r._currentValue),r._currentValue=o,i!==null)if(Rn(i.value,o)){if(i.children===s.children&&!Wt.current){e=kr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=hr(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),qh(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),qh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,lo(e,n),s=xn(s),r=r(s),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,s=Cn(r,e.pendingProps),s=Cn(r.type,s),h0(t,e,r,s,n);case 15:return Lk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),Ou(t,e),e.tag=1,Ht(r)?(t=!0,Xu(e)):t=!1,lo(e,n),Rk(e,r,s),Jh(e,r,s,n),Yh(null,e,r,!0,t,n);case 19:return zk(t,e,n);case 22:return $k(t,e,n)}throw Error(D(156,e.tag))};function sb(t,e){return A1(t,e)}function WM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,r){return new WM(t,e,n,r)}function eg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HM(t){if(typeof t=="function")return eg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xm)return 11;if(t===wm)return 14}return 2}function ls(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Du(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")eg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bi:return ni(n.children,s,i,e);case vm:o=8,s|=8;break;case vh:return t=pn(12,n,e,s|2),t.elementType=vh,t.lanes=i,t;case xh:return t=pn(13,n,e,s),t.elementType=xh,t.lanes=i,t;case wh:return t=pn(19,n,e,s),t.elementType=wh,t.lanes=i,t;case p1:return ld(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case f1:o=10;break e;case h1:o=9;break e;case xm:o=11;break e;case wm:o=14;break e;case Dr:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=pn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ni(t,e,n,r){return t=pn(7,t,r,e),t.lanes=n,t}function ld(t,e,n,r){return t=pn(22,t,r,e),t.elementType=p1,t.lanes=n,t.stateNode={isHidden:!1},t}function wf(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function kf(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ef(0),this.expirationTimes=ef(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ef(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tg(t,e,n,r,s,i,o,a,l){return t=new qM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=pn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$m(i),t}function KM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ib(t){if(!t)return ys;t=t._reactInternals;e:{if(wi(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(Ht(n))return ik(t,n,e)}return e}function ob(t,e,n,r,s,i,o,a,l){return t=tg(n,r,!0,t,s,i,o,a,l),t.context=ib(null),n=t.current,r=Ot(),s=as(n),i=hr(r,s),i.callback=e??null,ss(n,i,s),t.current.lanes=s,Sl(t,s,r),qt(t,r),t}function ud(t,e,n,r){var s=e.current,i=Ot(),o=as(s);return n=ib(n),e.context===null?e.context=n:e.pendingContext=n,e=hr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ss(s,e,o),t!==null&&(Dn(t,s,o,i),Eu(t,s,o)),o}function fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function C0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ng(t,e){C0(t,e),(t=t.alternate)&&C0(t,e)}function JM(){return null}var ab=typeof reportError=="function"?reportError:function(t){console.error(t)};function rg(t){this._internalRoot=t}cd.prototype.render=rg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));ud(t,e,null,null)};cd.prototype.unmount=rg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hi(function(){ud(null,t,null,null)}),e[xr]=null}};function cd(t){this._internalRoot=t}cd.prototype.unstable_scheduleHydration=function(t){if(t){var e=$1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fr.length&&e!==0&&e<Fr[n].priority;n++);Fr.splice(n,0,t),n===0&&F1(t)}};function sg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function T0(){}function GM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=fc(o);i.call(u)}}var o=ob(e,r,t,0,null,!1,!1,"",T0);return t._reactRootContainer=o,t[xr]=o.current,Ja(t.nodeType===8?t.parentNode:t),hi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=fc(l);a.call(u)}}var l=tg(t,0,!1,null,null,!1,!1,"",T0);return t._reactRootContainer=l,t[xr]=l.current,Ja(t.nodeType===8?t.parentNode:t),hi(function(){ud(e,l,n,r)}),l}function fd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=fc(o);a.call(l)}}ud(e,o,t,s)}else o=GM(n,e,t,s,r);return fc(o)}I1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=la(e.pendingLanes);n!==0&&(Sm(e,n|1),qt(e,ze()),!(he&6)&&(wo=ze()+500,Ts()))}break;case 13:hi(function(){var r=wr(t,1);if(r!==null){var s=Ot();Dn(r,t,1,s)}}),ng(t,1)}};_m=function(t){if(t.tag===13){var e=wr(t,134217728);if(e!==null){var n=Ot();Dn(e,t,134217728,n)}ng(t,134217728)}};L1=function(t){if(t.tag===13){var e=as(t),n=wr(t,e);if(n!==null){var r=Ot();Dn(n,t,e,r)}ng(t,e)}};$1=function(){return xe};V1=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};Oh=function(t,e,n){switch(e){case"input":if(Sh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=nd(r);if(!s)throw Error(D(90));g1(r),Sh(r,s)}}}break;case"textarea":v1(t,n);break;case"select":e=n.value,e!=null&&so(t,!!n.multiple,e,!1)}};C1=Ym;T1=hi;var ZM={usingClientEntryPoint:!1,Events:[Cl,Hi,nd,S1,_1,Ym]},Yo={findFiberByHostInstance:qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YM={bundleType:Yo.bundleType,version:Yo.version,rendererPackageName:Yo.rendererPackageName,rendererConfig:Yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=P1(t),t===null?null:t.stateNode},findFiberByHostInstance:Yo.findFiberByHostInstance||JM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{Qc=ru.inject(YM),Wn=ru}catch{}}rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZM;rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sg(e))throw Error(D(200));return KM(t,e,null,n)};rn.createRoot=function(t,e){if(!sg(t))throw Error(D(299));var n=!1,r="",s=ab;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tg(t,1,!1,null,null,n,!1,r,s),t[xr]=e.current,Ja(t.nodeType===8?t.parentNode:t),new rg(e)};rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=P1(e),t=t===null?null:t.stateNode,t};rn.flushSync=function(t){return hi(t)};rn.hydrate=function(t,e,n){if(!dd(e))throw Error(D(200));return fd(null,t,e,!0,n)};rn.hydrateRoot=function(t,e,n){if(!sg(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ab;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ob(e,null,t,1,n??null,s,!1,i,o),t[xr]=e.current,Ja(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new cd(e)};rn.render=function(t,e,n){if(!dd(e))throw Error(D(200));return fd(null,t,e,!1,n)};rn.unmountComponentAtNode=function(t){if(!dd(t))throw Error(D(40));return t._reactRootContainer?(hi(function(){fd(null,null,t,!1,function(){t._reactRootContainer=null,t[xr]=null})}),!0):!1};rn.unstable_batchedUpdates=Ym;rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dd(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return fd(t,e,n,!1,r)};rn.version="18.3.1-next-f1338f8080-20240426";function lb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lb)}catch(t){console.error(t)}}lb(),l1.exports=rn;var ub=l1.exports;const QM=Zw(ub);var cb,E0=ub;cb=E0.createRoot,E0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rl.apply(this,arguments)}var Gr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gr||(Gr={}));const M0="popstate";function XM(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return up("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:hc(s)}return tP(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function db(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eP(){return Math.random().toString(36).substr(2,8)}function P0(t,e){return{usr:t.state,key:t.key,idx:e}}function up(t,e,n,r){return n===void 0&&(n=null),rl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$o(e):e,{state:n,key:e&&e.key||r||eP()})}function hc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $o(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function tP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Gr.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(rl({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=Gr.Pop;let y=c(),g=y==null?null:y-u;u=y,l&&l({action:a,location:m.location,delta:g})}function f(y,g){a=Gr.Push;let v=up(m.location,y,g);u=c()+1;let x=P0(v,u),k=m.createHref(v);try{o.pushState(x,"",k)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(k)}i&&l&&l({action:a,location:m.location,delta:1})}function h(y,g){a=Gr.Replace;let v=up(m.location,y,g);u=c();let x=P0(v,u),k=m.createHref(v);o.replaceState(x,"",k),i&&l&&l({action:a,location:m.location,delta:0})}function p(y){let g=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:hc(y);return v=v.replace(/ $/,"%20"),We(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let m={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(M0,d),l=y,()=>{s.removeEventListener(M0,d),l=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:h,go(y){return o.go(y)}};return m}var O0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(O0||(O0={}));function nP(t,e,n){return n===void 0&&(n="/"),rP(t,e,n,!1)}function rP(t,e,n,r){let s=typeof e=="string"?$o(e):e,i=ig(s.pathname||"/",n);if(i==null)return null;let o=fb(t);sP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=mP(i);a=hP(o[l],u,r)}return a}function fb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(We(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=us([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(We(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),fb(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:dP(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of hb(i.path))s(i,o,l)}),e}function hb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=hb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function sP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const iP=/^:[\w-]+$/,oP=3,aP=2,lP=1,uP=10,cP=-2,A0=t=>t==="*";function dP(t,e){let n=t.split("/"),r=n.length;return n.some(A0)&&(r+=cP),e&&(r+=aP),n.filter(s=>!A0(s)).reduce((s,i)=>s+(iP.test(i)?oP:i===""?lP:uP),r)}function fP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function hP(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=N0({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=N0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:us([i,d.pathname]),pathnameBase:xP(us([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=us([i,d.pathnameBase]))}return o}function N0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=a[d]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function pP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),db(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function mP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return db(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ig(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function gP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?$o(t):t;return{pathname:n?n.startsWith("/")?n:yP(n,e):e,search:wP(r),hash:kP(s)}}function yP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function bf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function og(t,e){let n=vP(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ag(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=$o(t):(s=rl({},t),We(!s.pathname||!s.pathname.includes("?"),bf("?","pathname","search",s)),We(!s.pathname||!s.pathname.includes("#"),bf("#","pathname","hash",s)),We(!s.search||!s.search.includes("#"),bf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=gP(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const us=t=>t.join("/").replace(/\/\/+/g,"/"),xP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const pb=["post","put","patch","delete"];new Set(pb);const SP=["get",...pb];new Set(SP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sl(){return sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sl.apply(this,arguments)}const lg=b.createContext(null),_P=b.createContext(null),Es=b.createContext(null),hd=b.createContext(null),Tr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),mb=b.createContext(null);function CP(t,e){let{relative:n}=e===void 0?{}:e;Vo()||We(!1);let{basename:r,navigator:s}=b.useContext(Es),{hash:i,pathname:o,search:a}=yb(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:us([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Vo(){return b.useContext(hd)!=null}function Fo(){return Vo()||We(!1),b.useContext(hd).location}function gb(t){b.useContext(Es).static||b.useLayoutEffect(t)}function ki(){let{isDataRoute:t}=b.useContext(Tr);return t?VP():TP()}function TP(){Vo()||We(!1);let t=b.useContext(lg),{basename:e,future:n,navigator:r}=b.useContext(Es),{matches:s}=b.useContext(Tr),{pathname:i}=Fo(),o=JSON.stringify(og(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return gb(()=>{a.current=!0}),b.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=ag(u,JSON.parse(o),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:us([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,o,i,t])}function EP(){let{matches:t}=b.useContext(Tr),e=t[t.length-1];return e?e.params:{}}function yb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(Es),{matches:s}=b.useContext(Tr),{pathname:i}=Fo(),o=JSON.stringify(og(s,r.v7_relativeSplatPath));return b.useMemo(()=>ag(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function MP(t,e){return PP(t,e)}function PP(t,e,n,r){Vo()||We(!1);let{navigator:s}=b.useContext(Es),{matches:i}=b.useContext(Tr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Fo(),c;if(e){var d;let y=typeof e=="string"?$o(e):e;l==="/"||(d=y.pathname)!=null&&d.startsWith(l)||We(!1),c=y}else c=u;let f=c.pathname||"/",h=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=nP(t,{pathname:h}),m=RP(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:us([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:us([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&m?b.createElement(hd.Provider,{value:{location:sl({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Gr.Pop}},m):m}function OP(){let t=$P(),e=bP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const AP=b.createElement(OP,null);class NP extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Tr.Provider,{value:this.props.routeContext},b.createElement(mb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DP(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(lg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Tr.Provider,{value:e},r)}function RP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||We(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let h,p=!1,m=null,y=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||AP,l&&(u<0&&f===0?(p=!0,y=null):u===f&&(p=!0,y=d.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),v=()=>{let x;return h?x=m:p?x=y:d.route.Component?x=b.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,b.createElement(DP,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(NP,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}var vb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vb||{}),pc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pc||{});function jP(t){let e=b.useContext(lg);return e||We(!1),e}function IP(t){let e=b.useContext(_P);return e||We(!1),e}function LP(t){let e=b.useContext(Tr);return e||We(!1),e}function xb(t){let e=LP(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function $P(){var t;let e=b.useContext(mb),n=IP(pc.UseRouteError),r=xb(pc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function VP(){let{router:t}=jP(vb.UseNavigateStable),e=xb(pc.UseNavigateStable),n=b.useRef(!1);return gb(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,sl({fromRouteId:e},i)))},[t,e])}function FP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ji(t){let{to:e,replace:n,state:r,relative:s}=t;Vo()||We(!1);let{future:i,static:o}=b.useContext(Es),{matches:a}=b.useContext(Tr),{pathname:l}=Fo(),u=ki(),c=ag(e,og(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(c);return b.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:s}),[u,d,s,n,r]),null}function rr(t){We(!1)}function BP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Gr.Pop,navigator:i,static:o=!1,future:a}=t;Vo()&&We(!1);let l=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:i,static:o,future:sl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=$o(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=b.useMemo(()=>{let y=ig(c,l);return y==null?null:{location:{pathname:y,search:d,hash:f,state:h,key:p},navigationType:s}},[l,c,d,f,h,p,s]);return m==null?null:b.createElement(Es.Provider,{value:u},b.createElement(hd.Provider,{children:n,value:m}))}function zP(t){let{children:e,location:n}=t;return MP(cp(e),n)}new Promise(()=>{});function cp(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,cp(r.props.children,i));return}r.type!==rr&&We(!1),!r.props.index||!r.props.children||We(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=cp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dp(){return dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dp.apply(this,arguments)}function UP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function WP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function HP(t,e){return t.button===0&&(!e||e==="_self")&&!WP(t)}function fp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function qP(t,e){let n=fp(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const KP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],JP="6";try{window.__reactRouterVersion=JP}catch{}const GP="startTransition",D0=BT[GP];function ZP(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=XM({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=b.useCallback(d=>{u&&D0?D0(()=>l(d)):l(d)},[l,u]);return b.useLayoutEffect(()=>o.listen(c),[o,c]),b.useEffect(()=>FP(r),[r]),b.createElement(BP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const YP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nt=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d}=e,f=UP(e,KP),{basename:h}=b.useContext(Es),p,m=!1;if(typeof u=="string"&&QP.test(u)&&(p=u,YP))try{let x=new URL(window.location.href),k=u.startsWith("//")?new URL(x.protocol+u):new URL(u),_=ig(k.pathname,h);k.origin===x.origin&&_!=null?u=_+k.search+k.hash:m=!0}catch{}let y=CP(u,{relative:s}),g=XP(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s,viewTransition:d});function v(x){r&&r(x),x.defaultPrevented||g(x)}return b.createElement("a",dp({},f,{href:p||y,onClick:m||i?r:v,ref:n,target:l}))});var R0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(R0||(R0={}));var j0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(j0||(j0={}));function XP(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=ki(),u=Fo(),c=yb(t,{relative:o});return b.useCallback(d=>{if(HP(d,n)){d.preventDefault();let f=r!==void 0?r:hc(u)===hc(c);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,l,c,r,s,n,t,i,o,a])}function eO(t){let e=b.useRef(fp(t)),n=b.useRef(!1),r=Fo(),s=b.useMemo(()=>qP(r.search,n.current?null:e.current),[r.search]),i=ki(),o=b.useCallback((a,l)=>{const u=fp(typeof a=="function"?a(s):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}let tO={data:""},nO=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||tO,rO=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,sO=/\/\*[^]*?\*\/|  +/g,I0=/\n+/g,zr=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?zr(o,i):i+"{"+zr(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=zr(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=zr.p?zr.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},er={},wb=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+wb(t[n]);return e}return t},iO=(t,e,n,r,s)=>{let i=wb(t),o=er[i]||(er[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!er[o]){let l=i!==t?t:(u=>{let c,d,f=[{}];for(;c=rO.exec(u.replace(sO,""));)c[4]?f.shift():c[3]?(d=c[3].replace(I0," ").trim(),f.unshift(f[0][d]=f[0][d]||{})):f[0][c[1]]=c[2].replace(I0," ").trim();return f[0]})(t);er[o]=zr(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&er.g?er.g:null;return n&&(er.g=er[o]),((l,u,c,d)=>{d?u.data=u.data.replace(d,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(er[o],e,r,a),o},oO=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":zr(a,""):a===!1?"":a}return r+s+(o??"")},"");function pd(t){let e=this||{},n=t.call?t(e.p):t;return iO(n.unshift?n.raw?oO(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,nO(e.target),e.g,e.o,e.k)}let kb,hp,pp;pd.bind({g:1});let br=pd.bind({k:1});function aO(t,e,n,r){zr.p=e,kb=t,hp=n,pp=r}function Ms(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:hp&&hp()},a),n.o=/ *go\d+/.test(l),a.className=pd.apply(n,r)+(l?" "+l:"");let u=t;return t[0]&&(u=a.as||t,delete a.as),pp&&u[0]&&pp(a),kb(u,a)}return s}}var lO=t=>typeof t=="function",mc=(t,e)=>lO(t)?t(e):t,uO=(()=>{let t=0;return()=>(++t).toString()})(),bb=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),cO=20,Sb=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,cO)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return Sb(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},Ru=[],Gs={toasts:[],pausedAt:void 0},bi=t=>{Gs=Sb(Gs,t),Ru.forEach(e=>{e(Gs)})},dO={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},fO=(t={})=>{let[e,n]=b.useState(Gs),r=b.useRef(Gs);b.useEffect(()=>(r.current!==Gs&&n(Gs),Ru.push(n),()=>{let i=Ru.indexOf(n);i>-1&&Ru.splice(i,1)}),[]);let s=e.toasts.map(i=>{var o,a,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((a=t[i.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||dO[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:s}},hO=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||uO()}),El=t=>(e,n)=>{let r=hO(e,t,n);return bi({type:2,toast:r}),r.id},fe=(t,e)=>El("blank")(t,e);fe.error=El("error");fe.success=El("success");fe.loading=El("loading");fe.custom=El("custom");fe.dismiss=t=>{bi({type:3,toastId:t})};fe.remove=t=>bi({type:4,toastId:t});fe.promise=(t,e,n)=>{let r=fe.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?mc(e.success,s):void 0;return i?fe.success(i,{id:r,...n,...n==null?void 0:n.success}):fe.dismiss(r),s}).catch(s=>{let i=e.error?mc(e.error,s):void 0;i?fe.error(i,{id:r,...n,...n==null?void 0:n.error}):fe.dismiss(r)}),t};var pO=(t,e)=>{bi({type:1,toast:{id:t,height:e}})},mO=()=>{bi({type:5,time:Date.now()})},Ca=new Map,gO=1e3,yO=(t,e=gO)=>{if(Ca.has(t))return;let n=setTimeout(()=>{Ca.delete(t),bi({type:4,toastId:t})},e);Ca.set(t,n)},vO=t=>{let{toasts:e,pausedAt:n}=fO(t);b.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(i-a.createdAt);if(l<0){a.visible&&fe.dismiss(a.id);return}return setTimeout(()=>fe.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=b.useCallback(()=>{n&&bi({type:6,time:Date.now()})},[n]),s=b.useCallback((i,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:u}=o||{},c=e.filter(h=>(h.position||u)===(i.position||u)&&h.height),d=c.findIndex(h=>h.id===i.id),f=c.filter((h,p)=>p<d&&h.visible).length;return c.filter(h=>h.visible).slice(...a?[f+1]:[0,f]).reduce((h,p)=>h+(p.height||0)+l,0)},[e]);return b.useEffect(()=>{e.forEach(i=>{if(i.dismissed)yO(i.id,i.removeDelay);else{let o=Ca.get(i.id);o&&(clearTimeout(o),Ca.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:pO,startPause:mO,endPause:r,calculateOffset:s}}},xO=br`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,wO=br`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kO=br`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,bO=Ms("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xO} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${wO} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${kO} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,SO=br`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,_O=Ms("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${SO} 1s linear infinite;
`,CO=br`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,TO=br`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,EO=Ms("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${CO} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${TO} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,MO=Ms("div")`
  position: absolute;
`,PO=Ms("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,OO=br`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,AO=Ms("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${OO} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,NO=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?b.createElement(AO,null,e):e:n==="blank"?null:b.createElement(PO,null,b.createElement(_O,{...r}),n!=="loading"&&b.createElement(MO,null,n==="error"?b.createElement(bO,{...r}):b.createElement(EO,{...r})))},DO=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,RO=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,jO="0%{opacity:0;} 100%{opacity:1;}",IO="0%{opacity:1;} 100%{opacity:0;}",LO=Ms("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,$O=Ms("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,VO=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=bb()?[jO,IO]:[DO(n),RO(n)];return{animation:e?`${br(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${br(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},FO=b.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?VO(t.position||e||"top-center",t.visible):{opacity:0},i=b.createElement(NO,{toast:t}),o=b.createElement($O,{...t.ariaProps},mc(t.message,t));return b.createElement(LO,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):b.createElement(b.Fragment,null,i,o))});aO(b.createElement);var BO=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=b.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return b.createElement("div",{ref:i,className:e,style:n},s)},zO=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:bb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},UO=pd`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,su=16,WO=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:a,handlers:l}=vO(n);return b.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:su,left:su,right:su,bottom:su,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(u=>{let c=u.position||e,d=l.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),f=zO(c,d);return b.createElement(BO,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?UO:"",style:f},u.type==="custom"?mc(u.message,u):s?s(u):b.createElement(FO,{toast:u,position:c}))}))};const HO="modulepreload",qO=function(t){return"/doccollab/"+t},L0={},Ml=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=qO(l),l in L0)return;L0[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":HO,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},KO=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ml(async()=>{const{default:r}=await Promise.resolve().then(()=>Bo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ug extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class JO extends ug{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class GO extends ug{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ZO extends ug{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(mp||(mp={}));var YO=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class QO{constructor(e,{headers:n={},customFetch:r,region:s=mp.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=KO(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return YO(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(p=>{throw new JO(p)}),d=c.headers.get("x-relay-error");if(d&&d==="true")throw new GO(c);if(!c.ok)throw new ZO(c);let f=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),h;return f==="application/json"?h=yield c.json():f==="application/octet-stream"?h=yield c.blob():f==="text/event-stream"?h=c:f==="multipart/form-data"?h=yield c.formData():h=yield c.text(),{data:h,error:null}}catch(s){return{data:null,error:s}}})}}var Bt={},cg={},md={},Pl={},gd={},yd={},XO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ko=XO();const eA=ko.fetch,_b=ko.fetch.bind(ko),Cb=ko.Headers,tA=ko.Request,nA=ko.Response,Bo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Cb,Request:tA,Response:nA,default:_b,fetch:eA},Symbol.toStringTag,{value:"Module"})),rA=CT(Bo);var vd={};Object.defineProperty(vd,"__esModule",{value:!0});let sA=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};vd.default=sA;var Tb=vn&&vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yd,"__esModule",{value:!0});const iA=Tb(rA),oA=Tb(vd);let aA=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=iA.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let u=null,c=null,d=null,f=i.status,h=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=g:c=JSON.parse(g))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,h="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const m=await i.text();try{u=JSON.parse(m),Array.isArray(u)&&i.status===404&&(c=[],u=null,f=200,h="OK")}catch{i.status===404&&m===""?(f=204,h="No Content"):u={message:m}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,h="OK"),u&&this.shouldThrowOnError)throw new oA.default(u)}return{error:u,data:c,count:d,status:f,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};yd.default=aA;var lA=vn&&vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gd,"__esModule",{value:!0});const uA=lA(yd);let cA=class extends uA.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};gd.default=cA;var dA=vn&&vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pl,"__esModule",{value:!0});const fA=dA(gd);let hA=class extends fA.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Pl.default=hA;var pA=vn&&vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(md,"__esModule",{value:!0});const Qo=pA(Pl);let mA=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Qo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Qo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Qo.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Qo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Qo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};md.default=mA;var xd={},wd={};Object.defineProperty(wd,"__esModule",{value:!0});wd.version=void 0;wd.version="0.0.0-automated";Object.defineProperty(xd,"__esModule",{value:!0});xd.DEFAULT_HEADERS=void 0;const gA=wd;xd.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${gA.version}`};var Eb=vn&&vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cg,"__esModule",{value:!0});const yA=Eb(md),vA=Eb(Pl),xA=xd;let wA=class Mb{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},xA.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new yA.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Mb(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([c,d])=>d!==void 0).map(([c,d])=>[c,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([c,d])=>{a.searchParams.append(c,d)})):(o="POST",l=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new vA.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};cg.default=wA;var zo=vn&&vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.PostgrestError=Bt.PostgrestBuilder=Bt.PostgrestTransformBuilder=Bt.PostgrestFilterBuilder=Bt.PostgrestQueryBuilder=Bt.PostgrestClient=void 0;const Pb=zo(cg);Bt.PostgrestClient=Pb.default;const Ob=zo(md);Bt.PostgrestQueryBuilder=Ob.default;const Ab=zo(Pl);Bt.PostgrestFilterBuilder=Ab.default;const Nb=zo(gd);Bt.PostgrestTransformBuilder=Nb.default;const Db=zo(yd);Bt.PostgrestBuilder=Db.default;const Rb=zo(vd);Bt.PostgrestError=Rb.default;var kA=Bt.default={PostgrestClient:Pb.default,PostgrestQueryBuilder:Ob.default,PostgrestFilterBuilder:Ab.default,PostgrestTransformBuilder:Nb.default,PostgrestBuilder:Db.default,PostgrestError:Rb.default};const{PostgrestClient:bA,PostgrestQueryBuilder:LU,PostgrestFilterBuilder:$U,PostgrestTransformBuilder:VU,PostgrestBuilder:FU,PostgrestError:BU}=kA;function SA(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const _A=SA(),CA="2.11.15",TA=`realtime-js/${CA}`,EA="1.0.0",jb=1e4,MA=1e3;var Ta;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ta||(Ta={}));var vt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(vt||(vt={}));var En;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(En||(En={}));var gp;(function(t){t.websocket="websocket"})(gp||(gp={}));var Us;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Us||(Us={}));class PA{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Ib{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Te;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Te||(Te={}));const $0=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=OA(o,t,e,s),i),{})},OA=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Lb(i,o):yp(o)},Lb=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return RA(e,n)}switch(t){case Te.bool:return AA(e);case Te.float4:case Te.float8:case Te.int2:case Te.int4:case Te.int8:case Te.numeric:case Te.oid:return NA(e);case Te.json:case Te.jsonb:return DA(e);case Te.timestamp:return jA(e);case Te.abstime:case Te.date:case Te.daterange:case Te.int4range:case Te.int8range:case Te.money:case Te.reltime:case Te.text:case Te.time:case Te.timestamptz:case Te.timetz:case Te.tsrange:case Te.tstzrange:return yp(e);default:return yp(e)}},yp=t=>t,AA=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},NA=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},DA=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},RA=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Lb(e,a))}return t},jA=t=>typeof t=="string"?t.replace(" ","T"):t,$b=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Sf{constructor(e,n,r={},s=jb){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var V0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(V0||(V0={}));class Ea{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ea.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Ea.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ea.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=i[u];if(d){const f=c.map(y=>y.presence_ref),h=d.map(y=>y.presence_ref),p=c.filter(y=>h.indexOf(y.presence_ref)<0),m=d.filter(y=>f.indexOf(y.presence_ref)<0);p.length>0&&(a[u]=p),m.length>0&&(l[u]=m)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const d=e[a].map(h=>h.presence_ref),f=c.filter(h=>d.indexOf(h.presence_ref)<0);e[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var F0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(F0||(F0={}));var B0;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(B0||(B0={}));var or;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(or||(or={}));class dg{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Sf(this,En.join,this.params,this.timeout),this.rejoinTimer=new Ib(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(En.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ea(this),this.broadcastEndpointURL=$b(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(or.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(or.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:c})=>{var d;if(this.socket.setAuth(),c===void 0){e==null||e(or.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,h=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,p=[];for(let m=0;m<h;m++){const y=f[m],{filter:{event:g,schema:v,table:x,filter:k}}=y,_=c&&c[m];if(_&&_.event===g&&_.schema===v&&_.table===x&&_.filter===k)p.push(Object.assign(Object.assign({},y),{id:_.id}));else{this.unsubscribe(),this.state=vt.errored,e==null||e(or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(or.SUBSCRIBED);return}}).receive("error",c=>{this.state=vt.errored,e==null||e(or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(En.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Sf(this,En.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Sf(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=En;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(h=>{var p,m,y;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(m=h.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(h=>h.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var p,m,y,g,v,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const k=h.id,_=(p=h.filter)===null||p===void 0?void 0:p.event;return k&&((m=n.ids)===null||m===void 0?void 0:m.includes(k))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const k=(v=(g=h==null?void 0:h.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return k==="*"||k===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:m,table:y,commit_timestamp:g,type:v,errors:x}=p;f=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:g,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(p))}h.callback(f,r)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&dg.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(En.close,{},e)}_onError(e){this._on(En.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=$0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=$0(e.columns,e.old_record)),n}}const z0=()=>{},IA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class LA{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jb,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=z0,this.ref=0,this.logger=z0,this.conn=null,this.sendBuffer=[],this.serializer=new PA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Ml(async()=>{const{default:l}=await Promise.resolve().then(()=>Bo);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${gp.websocket}`,this.httpEndpoint=$b(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ib(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=_A),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:EA}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ta.connecting:return Us.Connecting;case Ta.open:return Us.Open;case Ta.closing:return Us.Closing;default:return Us.Closed}}isConnected(){return this.connectionState()===Us.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new dg(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:TA};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(En.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(MA,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(En.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([IA],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class fg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class $A extends fg{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vp extends fg{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var VA=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Vb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ml(async()=>{const{default:r}=await Promise.resolve().then(()=>Bo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},FA=()=>VA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ml(()=>Promise.resolve().then(()=>Bo),void 0)).Response:Response}),xp=t=>{if(Array.isArray(t))return t.map(n=>xp(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=xp(r)}),e};var Si=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const _f=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),BA=(t,e,n)=>Si(void 0,void 0,void 0,function*(){const r=yield FA();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new $A(_f(s),t.status||500))}).catch(s=>{e(new vp(_f(s),s))}):e(new vp(_f(t),t))}),zA=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Ol(t,e,n,r,s,i){return Si(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,zA(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>BA(l,a,r))})})}function gc(t,e,n,r){return Si(this,void 0,void 0,function*(){return Ol(t,"GET",e,n,r)})}function jr(t,e,n,r,s){return Si(this,void 0,void 0,function*(){return Ol(t,"POST",e,r,s,n)})}function UA(t,e,n,r,s){return Si(this,void 0,void 0,function*(){return Ol(t,"PUT",e,r,s,n)})}function WA(t,e,n,r){return Si(this,void 0,void 0,function*(){return Ol(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Fb(t,e,n,r,s){return Si(this,void 0,void 0,function*(){return Ol(t,"DELETE",e,r,s,n)})}var $t=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const HA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},U0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qA{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Vb(s)}uploadOrUpdate(e,n,r,s){return $t(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},U0),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield d.json();return d.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}upload(e,n,r){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return $t(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:U0.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),f=yield d.json();return d.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return $t(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield jr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new fg("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}update(e,n,r){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return $t(this,void 0,void 0,function*(){try{return{data:yield jr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}copy(e,n,r){return $t(this,void 0,void 0,function*(){try{return{data:{path:(yield jr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return $t(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield jr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return $t(this,void 0,void 0,function*(){try{const s=yield jr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}download(e,n){return $t(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield gc(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Xe(a))return{data:null,error:a};throw a}})}info(e){return $t(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield gc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:xp(r),error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}exists(e){return $t(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield WA(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Xe(r)&&r instanceof vp){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return $t(this,void 0,void 0,function*(){try{return{data:yield Fb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}list(e,n,r){return $t(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},HA),n),{prefix:e||""});return{data:yield jr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const KA="2.7.1",JA={"X-Client-Info":`storage-js/${KA}`};var Mi=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class GA{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},JA),n),this.fetch=Vb(r)}listBuckets(){return Mi(this,void 0,void 0,function*(){try{return{data:yield gc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Xe(e))return{data:null,error:e};throw e}})}getBucket(e){return Mi(this,void 0,void 0,function*(){try{return{data:yield gc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Mi(this,void 0,void 0,function*(){try{return{data:yield jr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Mi(this,void 0,void 0,function*(){try{return{data:yield UA(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Mi(this,void 0,void 0,function*(){try{return{data:yield jr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Mi(this,void 0,void 0,function*(){try{return{data:yield Fb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}}class ZA extends GA{constructor(e,n={},r){super(e,n,r)}from(e){return new qA(this.url,this.headers,e,this.fetch)}}const YA="2.50.2";let ca="";typeof Deno<"u"?ca="deno":typeof document<"u"?ca="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ca="react-native":ca="node";const QA={"X-Client-Info":`supabase-js-${ca}/${YA}`},XA={headers:QA},eN={schema:"public"},tN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nN={};var rN=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const sN=t=>{let e;return t?e=t:typeof fetch>"u"?e=_b:e=fetch,(...n)=>e(...n)},iN=()=>typeof Headers>"u"?Cb:Headers,oN=(t,e,n)=>{const r=sN(n),s=iN();return(i,o)=>rN(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var aN=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};function lN(t){return t.endsWith("/")?t:t+"/"}function uN(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:d}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>aN(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Bb="2.70.0",Ii=30*1e3,wp=3,Cf=wp*Ii,cN="http://localhost:9999",dN="supabase.auth.token",fN={"X-Client-Info":`gotrue-js/${Bb}`},kp="X-Supabase-Api-Version",zb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,pN=6e5;class hg extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class mN extends hg{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function gN(t){return oe(t)&&t.name==="AuthApiError"}class Ub extends hg{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ps extends hg{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Or extends Ps{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yN(t){return oe(t)&&t.name==="AuthSessionMissingError"}class iu extends Ps{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ou extends Ps{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class au extends Ps{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vN(t){return oe(t)&&t.name==="AuthImplicitGrantRedirectError"}class W0 extends Ps{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bp extends Ps{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Tf(t){return oe(t)&&t.name==="AuthRetryableFetchError"}class H0 extends Ps{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ma extends Ps{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const yc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),q0=` 	
\r=`.split(""),xN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<q0.length;e+=1)t[q0[e].charCodeAt(0)]=-2;for(let e=0;e<yc.length;e+=1)t[yc[e].charCodeAt(0)]=e;return t})();function K0(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(yc[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(yc[r]),e.queuedBits-=6}}function Wb(t,e,n){const r=xN[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function J0(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{bN(o,r,n)};for(let o=0;o<t.length;o+=1)Wb(t.charCodeAt(o),s,i);return e.join("")}function wN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function kN(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}wN(r,e)}}function bN(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function SN(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Wb(t.charCodeAt(s),n,r);return new Uint8Array(e)}function _N(t){const e=[];return kN(t,n=>e.push(n)),new Uint8Array(e)}function CN(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>K0(s,n,r)),K0(null,n,r),e.join("")}function TN(t){return Math.round(Date.now()/1e3)+t}function EN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const _n=()=>typeof window<"u"&&typeof document<"u",js={tested:!1,writable:!1},Pa=()=>{if(!_n())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(js.tested)return js.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),js.tested=!0,js.writable=!0}catch{js.tested=!0,js.writable=!1}return js.writable};function MN(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Hb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ml(async()=>{const{default:r}=await Promise.resolve().then(()=>Bo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},PN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",qb=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},lu=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},uu=async(t,e)=>{await t.removeItem(e)};class kd{constructor(){this.promise=new kd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}kd.promiseConstructor=Promise;function Ef(t){const e=t.split(".");if(e.length!==3)throw new Ma("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!hN.test(e[r]))throw new Ma("JWT not in base64url format");return{header:JSON.parse(J0(e[0])),payload:JSON.parse(J0(e[1])),signature:SN(e[2]),raw:{header:e[0],payload:e[1]}}}async function ON(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function AN(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function NN(t){return("0"+t.toString(16)).substr(-2)}function DN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,NN).join("")}async function RN(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function jN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await RN(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pi(t,e,n=!1){const r=DN();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await qb(t,`${e}-code-verifier`,s);const i=await jN(r);return[i,r===i?"plain":"s256"]}const IN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function LN(t){const e=t.headers.get(kp);if(!e||!e.match(IN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $N(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function VN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const FN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Oi(t){if(!FN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var BN=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Vs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zN=[502,503,504];async function G0(t){var e;if(!PN(t))throw new bp(Vs(t),0);if(zN.includes(t.status))throw new bp(Vs(t),t.status);let n;try{n=await t.json()}catch(i){throw new Ub(Vs(i),i)}let r;const s=LN(t);if(s&&s.getTime()>=zb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new H0(Vs(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Or}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new H0(Vs(n),t.status,n.weak_password.reasons);throw new mN(Vs(n),t.status||500,r)}const UN=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ce(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[kp]||(i[kp]=zb["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await WN(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function WN(t,e,n,r,s,i){const o=UN(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new bp(Vs(l),0)}if(a.ok||await G0(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await G0(l)}}function sr(t){var e;let n=null;JN(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=TN(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Z0(t){const e=sr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ur(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function HN(t){return{data:t,error:null}}function qN(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=BN(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function KN(t){return t}function JN(t){return t.access_token&&t.refresh_token&&t.expires_in}const Mf=["global","local","others"];var GN=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class ZN{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Hb(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Mf[0]){if(Mf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mf.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ur})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=GN(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:qN,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(oe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ur})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:KN});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);u[`${y}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(oe(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Oi(e);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ur})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Oi(e);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ur})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Oi(e);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ur})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Oi(e.userId);try{const{data:n,error:r}=await ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Oi(e.userId),Oi(e.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}}const YN={getItem:t=>Pa()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Pa()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Pa()&&globalThis.localStorage.removeItem(t)}};function Y0(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function QN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ai={debug:!!(globalThis&&Pa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Kb extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class XN extends Kb{}async function eD(t,e,n){Ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ai.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new XN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ai.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}QN();const tD={url:cN,storageKey:dN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Q0(t,e,n){return await n()}class il{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=il.nextInstanceID,il.nextInstanceID+=1,this.instanceID>0&&_n()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},tD),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ZN({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Hb(s.fetch),this.lock=s.lock||Q0,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:_n()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=eD:this.lock=Q0,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Pa()?this.storage=YN:(this.memoryStorage={},this.storage=Y0(this.memoryStorage)):(this.memoryStorage={},this.storage=Y0(this.memoryStorage)),_n()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Bb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=MN(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),_n()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),vN(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return oe(n)?{error:n}:{error:new Ub("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:sr}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(oe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:c,password:d,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Pi(this.storage,this.storageKey)),i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},xform:sr})}else if("phone"in e){const{phone:c,password:d,options:f}=e;i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:sr})}else throw new ou("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(oe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Z0})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Z0})}else throw new ou("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new iu}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(oe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,l,u,c,d,f,h;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:y,wallet:g,statement:v,options:x}=e;let k;if(_n())if(typeof g=="object")k=g;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))k=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=g}const _=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const T=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),v?{statement:v}:null));let M;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")M=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)M=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)p=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),m=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(c=x==null?void 0:x.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const T=await k.signMessage(new TextEncoder().encode(p),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=T}}try{const{data:y,error:g}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:CN(m)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:sr});if(g)throw g;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new iu}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:g})}catch(y){if(oe(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const n=await lu(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:sr});if(await uu(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new iu}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(oe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:sr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new iu}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(oe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Pi(this.storage,this.storageKey));const{error:d}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new ou("You must provide either an email or phone number.")}catch(a){if(oe(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:sr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(oe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Pi(this.storage,this.storageKey)),await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:HN})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Or;const{error:s}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(oe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ou("You must provide either an email or phone number and a type")}catch(n){if(oe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await lu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Cf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ur}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Or}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ur})})}catch(n){if(oe(n))return yN(n)&&(await this._removeSession(),await uu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Or;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Pi(this.storage,this.storageKey));const{data:u,error:c}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ur});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Or;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Ef(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(oe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Or;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(oe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!_n())throw new au("No browser detected.");if(e.error||e.error_description||e.error_code)throw new au(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new W0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new au("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new W0("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new au("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const h=f-c;h*1e3<=Ii&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=f-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,c);const{data:m,error:y}=await this._getUser(i);if(y)throw y;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(oe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await lu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(gN(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await uu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=EN(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Pi(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:d,error:f}=i;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",h,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return _n()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(oe(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await AN(async s=>(s>0&&await ON(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:sr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Tf(i)&&Date.now()+o-r<Ii})}catch(r){if(this._debug(n,"error",r),oe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),_n()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await lu(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Cf;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Cf}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Tf(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new kd;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Or;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),oe(i)){const o={session:null,error:i};return Tf(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await qb(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await uu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_n()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ii);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ii);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ii}ms, refresh threshold is ${wp} ticks`),s<=wp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Kb)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_n()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Pi(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(oe(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(oe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ef(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+pN>Date.now()))return r;const{data:s,error:i}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Ma("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Ma("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:h,error:p}=await this.getSession();if(p||!h.session)return{data:null,error:p};r=h.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Ef(r);if($N(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:i,header:s,signature:o},error:null}}const u=VN(s.alg),c=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,_N(`${a}.${l}`)))throw new Ma("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}}il.nextInstanceID=0;const nD=il;class rD extends nD{constructor(e){super(e)}}var sD=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class iD{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=lN(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:eN,realtime:nN,auth:Object.assign(Object.assign({},tN),{storageKey:u}),global:XA},d=uN(r??{},c);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=oN(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new bA(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new QO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ZA(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return sD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rD({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new LA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const oD=(t,e,n)=>new iD(t,e,n),aD="https://iahhpsfwjvazgcwxcalh.supabase.co",lD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlhaGhwc2Z3anZhemdjd3hjYWxoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDg4ODQsImV4cCI6MjA2NjY4NDg4NH0.O07w4xK17j8Aj6C1rsEa-cQs_Io9UKPhMzMhvix7RXk",De=oD(aD,lD),Jb=b.createContext(void 0),Yn=()=>{const t=b.useContext(Jb);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},uD=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(!0);b.useEffect(()=>{De.auth.getSession().then(({data:{session:h}})=>{s(h),n((h==null?void 0:h.user)??null),o(!1)});const{data:{subscription:f}}=De.auth.onAuthStateChange(async(h,p)=>{var m,y,g;if(s(p),n((p==null?void 0:p.user)??null),o(!1),h==="SIGNED_IN"&&(p!=null&&p.user)){const{error:v}=await De.from("users").upsert({id:p.user.id,email:p.user.email,username:((m=p.user.user_metadata)==null?void 0:m.username)||p.user.email.split("@")[0],full_name:(y=p.user.user_metadata)==null?void 0:y.full_name,avatar_url:(g=p.user.user_metadata)==null?void 0:g.avatar_url});v&&console.error("Error creating user profile:",v)}});return()=>f.unsubscribe()},[]);const d={user:e,session:r,loading:i,signUp:async(f,h,p,m)=>{const{error:y}=await De.auth.signUp({email:f,password:h,options:{data:{username:p,full_name:m}}});if(y)throw y;fe.success("Account created successfully! Please check your email to confirm your account.")},signIn:async(f,h)=>{const{error:p}=await De.auth.signInWithPassword({email:f,password:h});if(p)throw p;fe.success("Signed in successfully!")},signOut:async()=>{const{error:f}=await De.auth.signOut();if(f)throw f;fe.success("Signed out successfully!")},resetPassword:async f=>{const{error:h}=await De.auth.resetPasswordForEmail(f,{redirectTo:`${window.location.origin}/reset-password`});if(h)throw h;fe.success("Password reset email sent!")}};return w.jsx(Jb.Provider,{value:d,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ye=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>b.createElement("svg",{ref:c,...cD,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${dD(t)}`,a].join(" "),...u},[...e.map(([d,f])=>b.createElement(d,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=ye("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=ye("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=ye("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=ye("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=ye("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=ye("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=ye("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=ye("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=ye("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=ye("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=ye("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=ye("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=ye("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=ye("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=ye("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=ye("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=ye("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Yb=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Sd=b.createContext({}),_d=b.createContext(null),Cd=typeof document<"u",mg=Cd?b.useLayoutEffect:b.useEffect,Qb=b.createContext({strict:!1}),gg=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),RD="framerAppearId",Xb="data-"+gg(RD);function jD(t,e,n,r){const{visualElement:s}=b.useContext(Sd),i=b.useContext(Qb),o=b.useContext(_d),a=b.useContext(Yb).reducedMotion,l=b.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;b.useInsertionEffect(()=>{u&&u.update(n,o)});const c=b.useRef(!!(n[Xb]&&!window.HandoffComplete));return mg(()=>{u&&(u.render(),c.current&&u.animationState&&u.animationState.animateChanges())}),b.useEffect(()=>{u&&(u.updateFeatures(),!c.current&&u.animationState&&u.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),u}function Qi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ID(t,e,n){return b.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Qi(n)&&(n.current=r))},[e])}function ol(t){return typeof t=="string"||Array.isArray(t)}function Td(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const yg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vg=["initial",...yg];function Ed(t){return Td(t.animate)||vg.some(e=>ol(t[e]))}function eS(t){return!!(Ed(t)||t.variants)}function LD(t,e){if(Ed(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ol(n)?n:void 0,animate:ol(r)?r:void 0}}return t.inherit!==!1?e:{}}function $D(t){const{initial:e,animate:n}=LD(t,b.useContext(Sd));return b.useMemo(()=>({initial:e,animate:n}),[ev(e),ev(n)])}function ev(t){return Array.isArray(t)?t.join(" "):t}const tv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},al={};for(const t in tv)al[t]={isEnabled:e=>tv[t].some(n=>!!e[n])};function VD(t){for(const e in t)al[e]={...al[e],...t[e]}}const xg=b.createContext({}),tS=b.createContext({}),FD=Symbol.for("motionComponentSymbol");function BD({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&VD(t);function i(a,l){let u;const c={...b.useContext(Yb),...a,layoutId:zD(a)},{isStatic:d}=c,f=$D(a),h=r(a,d);if(!d&&Cd){f.visualElement=jD(s,h,c,e);const p=b.useContext(tS),m=b.useContext(Qb).strict;f.visualElement&&(u=f.visualElement.loadFeatures(c,m,t,p))}return b.createElement(Sd.Provider,{value:f},u&&f.visualElement?b.createElement(u,{visualElement:f.visualElement,...c}):null,n(s,a,ID(h,f.visualElement,l),h,d,f.visualElement))}const o=b.forwardRef(i);return o[FD]=s,o}function zD({layoutId:t}){const e=b.useContext(xg).id;return e&&t!==void 0?e+"-"+t:t}function UD(t){function e(r,s={}){return BD(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const WD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function wg(t){return typeof t!="string"||t.includes("-")?!1:!!(WD.indexOf(t)>-1||/[A-Z]/.test(t))}const kc={};function HD(t){Object.assign(kc,t)}const Al=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_i=new Set(Al);function nS(t,{layout:e,layoutId:n}){return _i.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!kc[t]||t==="opacity")}const Jt=t=>!!(t&&t.getVelocity),qD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KD=Al.length;function JD(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<KD;o++){const a=Al[o];if(t[a]!==void 0){const l=qD[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const rS=t=>e=>typeof e=="string"&&e.startsWith(t),sS=rS("--"),_p=rS("var(--"),GD=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,ZD=(t,e)=>e&&typeof t=="number"?e.transform(t):t,vs=(t,e,n)=>Math.min(Math.max(n,t),e),Ci={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Oa={...Ci,transform:t=>vs(0,1,t)},cu={...Ci,default:1},Aa=t=>Math.round(t*1e5)/1e5,Md=/(-)?([\d]*\.?[\d])+/g,iS=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,YD=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Nl(t){return typeof t=="string"}const Dl=t=>({test:e=>Nl(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ar=Dl("deg"),Kn=Dl("%"),Q=Dl("px"),QD=Dl("vh"),XD=Dl("vw"),nv={...Kn,parse:t=>Kn.parse(t)/100,transform:t=>Kn.transform(t*100)},rv={...Ci,transform:Math.round},oS={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,size:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,rotate:Ar,rotateX:Ar,rotateY:Ar,rotateZ:Ar,scale:cu,scaleX:cu,scaleY:cu,scaleZ:cu,skew:Ar,skewX:Ar,skewY:Ar,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:Oa,originX:nv,originY:nv,originZ:Q,zIndex:rv,fillOpacity:Oa,strokeOpacity:Oa,numOctaves:rv};function kg(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,u=!1,c=!0;for(const d in e){const f=e[d];if(sS(d)){i[d]=f;continue}const h=oS[d],p=ZD(f,h);if(_i.has(d)){if(l=!0,o[d]=p,!c)continue;f!==(h.default||0)&&(c=!1)}else d.startsWith("origin")?(u=!0,a[d]=p):s[d]=p}if(e.transform||(l||r?s.transform=JD(t.transform,n,c,r):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:h=0}=a;s.transformOrigin=`${d} ${f} ${h}`}}const bg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function aS(t,e,n){for(const r in e)!Jt(e[r])&&!nS(r,n)&&(t[r]=e[r])}function eR({transformTemplate:t},e,n){return b.useMemo(()=>{const r=bg();return kg(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function tR(t,e,n){const r=t.style||{},s={};return aS(s,r,t),Object.assign(s,eR(t,e,n)),t.transformValues?t.transformValues(s):s}function nR(t,e,n){const r={},s=tR(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const rR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||rR.has(t)}let lS=t=>!bc(t);function sR(t){t&&(lS=e=>e.startsWith("on")?!bc(e):t(e))}try{sR(require("@emotion/is-prop-valid").default)}catch{}function iR(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(lS(s)||n===!0&&bc(s)||!e&&!bc(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function sv(t,e,n){return typeof t=="string"?t:Q.transform(e+n*t)}function oR(t,e,n){const r=sv(e,t.x,t.width),s=sv(n,t.y,t.height);return`${r} ${s}`}const aR={offset:"stroke-dashoffset",array:"stroke-dasharray"},lR={offset:"strokeDashoffset",array:"strokeDasharray"};function uR(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?aR:lR;t[i.offset]=Q.transform(-r);const o=Q.transform(e),a=Q.transform(n);t[i.array]=`${o} ${a}`}function Sg(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,d,f){if(kg(t,u,c,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p,dimensions:m}=t;h.transform&&(m&&(p.transform=h.transform),delete h.transform),m&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=oR(m,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&uR(h,o,a,l,!1)}const uS=()=>({...bg(),attrs:{}}),_g=t=>typeof t=="string"&&t.toLowerCase()==="svg";function cR(t,e,n,r){const s=b.useMemo(()=>{const i=uS();return Sg(i,e,{enableHardwareAcceleration:!1},_g(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};aS(i,t.style,t),s.style={...i,...s.style}}return s}function dR(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(wg(n)?cR:nR)(r,i,o,n),c={...iR(r,typeof n=="string",t),...l,ref:s},{children:d}=r,f=b.useMemo(()=>Jt(d)?d.get():d,[d]);return b.createElement(n,{...c,children:f})}}function cS(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const dS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fS(t,e,n,r){cS(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(dS.has(s)?s:gg(s),e.attrs[s])}function Cg(t,e){const{style:n}=t,r={};for(const s in n)(Jt(n[s])||e.style&&Jt(e.style[s])||nS(s,t))&&(r[s]=n[s]);return r}function hS(t,e){const n=Cg(t,e);for(const r in t)if(Jt(t[r])||Jt(e[r])){const s=Al.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function Tg(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function pS(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const Sc=t=>Array.isArray(t),fR=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),hR=t=>Sc(t)?t[t.length-1]||0:t;function ju(t){const e=Jt(t)?t.get():t;return fR(e)?e.toValue():e}function pR({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:mR(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const mS=t=>(e,n)=>{const r=b.useContext(Sd),s=b.useContext(_d),i=()=>pR(t,e,r,s);return n?i():pS(i)};function mR(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=ju(i[f]);let{initial:o,animate:a}=t;const l=Ed(t),u=eS(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;return d&&typeof d!="boolean"&&!Td(d)&&(Array.isArray(d)?d:[d]).forEach(h=>{const p=Tg(t,h);if(!p)return;const{transitionEnd:m,transition:y,...g}=p;for(const v in g){let x=g[v];if(Array.isArray(x)){const k=c?x.length-1:0;x=x[k]}x!==null&&(s[v]=x)}for(const v in m)s[v]=m[v]}),s}const Ue=t=>t;class iv{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function gR(t){let e=new iv,n=new iv,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const d=c&&s,f=d?e:n;return u&&o.add(l),f.add(l)&&d&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const c=e.order[u];c(l),o.has(c)&&(a.schedule(c),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const du=["prepare","read","update","preRender","render","postRender"],yR=40;function vR(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=du.reduce((d,f)=>(d[f]=gR(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,yR),1),s.timestamp=d,s.isProcessing=!0,du.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:du.reduce((d,f)=>{const h=i[f];return d[f]=(p,m=!1,y=!1)=>(n||l(),h.schedule(p,m,y)),d},{}),cancel:d=>du.forEach(f=>i[f].cancel(d)),state:s,steps:i}}const{schedule:Me,cancel:Sr,state:xt,steps:Pf}=vR(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ue,!0),xR={useVisualState:mS({scrapeMotionValuesFromProps:hS,createRenderState:uS,onMount:(t,e,{renderState:n,latestValues:r})=>{Me.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Me.render(()=>{Sg(n,r,{enableHardwareAcceleration:!1},_g(e.tagName),t.transformTemplate),fS(e,n)})}})},wR={useVisualState:mS({scrapeMotionValuesFromProps:Cg,createRenderState:bg})};function kR(t,{forwardMotionProps:e=!1},n,r){return{...wg(t)?xR:wR,preloadedFeatures:n,useRender:dR(e),createVisualElement:r,Component:t}}function dr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const gS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Pd(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const bR=t=>e=>gS(e)&&t(e,Pd(e));function pr(t,e,n,r){return dr(t,e,bR(n),r)}const SR=(t,e)=>n=>e(t(n)),cs=(...t)=>t.reduce(SR);function yS(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const ov=yS("dragHorizontal"),av=yS("dragVertical");function vS(t){let e=!1;if(t==="y")e=av();else if(t==="x")e=ov();else{const n=ov(),r=av();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function xS(){const t=vS(!0);return t?(t(),!1):!0}class Os{constructor(e){this.isMounted=!1,this.node=e}update(){}}function lv(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||xS())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Me.update(()=>a[r](i,o))};return pr(t.current,n,s,{passive:!t.getProps()[r]})}class _R extends Os{mount(){this.unmount=cs(lv(this.node,!0),lv(this.node,!1))}unmount(){}}class CR extends Os{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cs(dr(this.node.current,"focus",()=>this.onFocus()),dr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const wS=(t,e)=>e?t===e?!0:wS(t,e.parentElement):!1;function Of(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Pd(n))}class TR extends Os{constructor(){super(...arguments),this.removeStartListeners=Ue,this.removeEndListeners=Ue,this.removeAccessibleListeners=Ue,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=pr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:d}=this.node.getProps();Me.update(()=>{!d&&!wS(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=pr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=cs(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Of("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&Me.update(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=dr(this.node.current,"keyup",o),Of("down",(a,l)=>{this.startPress(a,l)})},n=dr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Of("cancel",(i,o)=>this.cancelPress(i,o))},s=dr(this.node.current,"blur",r);this.removeAccessibleListeners=cs(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Me.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!xS()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Me.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=pr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=dr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=cs(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Cp=new WeakMap,Af=new WeakMap,ER=t=>{const e=Cp.get(t.target);e&&e(t)},MR=t=>{t.forEach(ER)};function PR({root:t,...e}){const n=t||document;Af.has(n)||Af.set(n,{});const r=Af.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(MR,{root:t,...e})),r[s]}function OR(t,e,n){const r=PR(e);return Cp.set(t,n),r.observe(t),()=>{Cp.delete(t),r.unobserve(t)}}const AR={some:0,all:1};class NR extends Os{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:AR[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return OR(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(DR(e,n))&&this.startObserver()}unmount(){}}function DR({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const RR={inView:{Feature:NR},tap:{Feature:TR},focus:{Feature:CR},hover:{Feature:_R}};function kS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function jR(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function IR(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Od(t,e,n){const r=t.getProps();return Tg(r,e,n!==void 0?n:r.custom,jR(t),IR(t))}let _c=Ue;const ri=t=>t*1e3,mr=t=>t/1e3,LR={current:!1},bS=t=>Array.isArray(t)&&typeof t[0]=="number";function SS(t){return!!(!t||typeof t=="string"&&_S[t]||bS(t)||Array.isArray(t)&&t.every(SS))}const da=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,_S={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:da([0,.65,.55,1]),circOut:da([.55,0,1,.45]),backIn:da([.31,.01,.66,-.59]),backOut:da([.33,1.53,.69,.99])};function CS(t){if(t)return bS(t)?da(t):Array.isArray(t)?t.map(CS):_S[t]}function $R(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=CS(a);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:s,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function VR(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const TS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,FR=1e-7,BR=12;function zR(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=TS(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>FR&&++a<BR);return o}function Rl(t,e,n,r){if(t===e&&n===r)return Ue;const s=i=>zR(i,0,1,t,n);return i=>i===0||i===1?i:TS(s(i),e,r)}const UR=Rl(.42,0,1,1),WR=Rl(0,0,.58,1),ES=Rl(.42,0,.58,1),HR=t=>Array.isArray(t)&&typeof t[0]!="number",MS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,PS=t=>e=>1-t(1-e),Eg=t=>1-Math.sin(Math.acos(t)),OS=PS(Eg),qR=MS(Eg),AS=Rl(.33,1.53,.69,.99),Mg=PS(AS),KR=MS(Mg),JR=t=>(t*=2)<1?.5*Mg(t):.5*(2-Math.pow(2,-10*(t-1))),uv={linear:Ue,easeIn:UR,easeInOut:ES,easeOut:WR,circIn:Eg,circInOut:qR,circOut:OS,backIn:Mg,backInOut:KR,backOut:AS,anticipate:JR},cv=t=>{if(Array.isArray(t)){_c(t.length===4);const[e,n,r,s]=t;return Rl(e,n,r,s)}else if(typeof t=="string")return _c(uv[t]!==void 0),uv[t];return t},Pg=(t,e)=>n=>!!(Nl(n)&&YD.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),NS=(t,e,n)=>r=>{if(!Nl(r))return r;const[s,i,o,a]=r.match(Md);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},GR=t=>vs(0,255,t),Nf={...Ci,transform:t=>Math.round(GR(t))},Zs={test:Pg("rgb","red"),parse:NS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Nf.transform(t)+", "+Nf.transform(e)+", "+Nf.transform(n)+", "+Aa(Oa.transform(r))+")"};function ZR(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Tp={test:Pg("#"),parse:ZR,transform:Zs.transform},Xi={test:Pg("hsl","hue"),parse:NS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Kn.transform(Aa(e))+", "+Kn.transform(Aa(n))+", "+Aa(Oa.transform(r))+")"},Et={test:t=>Zs.test(t)||Tp.test(t)||Xi.test(t),parse:t=>Zs.test(t)?Zs.parse(t):Xi.test(t)?Xi.parse(t):Tp.parse(t),transform:t=>Nl(t)?t:t.hasOwnProperty("red")?Zs.transform(t):Xi.transform(t)},Re=(t,e,n)=>-n*t+n*e+t;function Df(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function YR({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Df(l,a,t+1/3),i=Df(l,a,t),o=Df(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Rf=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},QR=[Tp,Zs,Xi],XR=t=>QR.find(e=>e.test(t));function dv(t){const e=XR(t);let n=e.parse(t);return e===Xi&&(n=YR(n)),n}const DS=(t,e)=>{const n=dv(t),r=dv(e),s={...n};return i=>(s.red=Rf(n.red,r.red,i),s.green=Rf(n.green,r.green,i),s.blue=Rf(n.blue,r.blue,i),s.alpha=Re(n.alpha,r.alpha,i),Zs.transform(s))};function ej(t){var e,n;return isNaN(t)&&Nl(t)&&(((e=t.match(Md))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(iS))===null||n===void 0?void 0:n.length)||0)>0}const RS={regex:GD,countKey:"Vars",token:"${v}",parse:Ue},jS={regex:iS,countKey:"Colors",token:"${c}",parse:Et.parse},IS={regex:Md,countKey:"Numbers",token:"${n}",parse:Ci.parse};function jf(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function Cc(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&jf(n,RS),jf(n,jS),jf(n,IS),n}function LS(t){return Cc(t).values}function $S(t){const{values:e,numColors:n,numVars:r,tokenised:s}=Cc(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(RS.token,o[l]):l<r+n?a=a.replace(jS.token,Et.transform(o[l])):a=a.replace(IS.token,Aa(o[l]));return a}}const tj=t=>typeof t=="number"?0:t;function nj(t){const e=LS(t);return $S(t)(e.map(tj))}const xs={test:ej,parse:LS,createTransformer:$S,getAnimatableNone:nj},VS=(t,e)=>n=>`${n>0?e:t}`;function FS(t,e){return typeof t=="number"?n=>Re(t,e,n):Et.test(t)?DS(t,e):t.startsWith("var(")?VS(t,e):zS(t,e)}const BS=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>FS(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},rj=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=FS(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},zS=(t,e)=>{const n=xs.createTransformer(e),r=Cc(t),s=Cc(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?cs(BS(r.values,s.values),n):VS(t,e)},ll=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},fv=(t,e)=>n=>Re(t,e,n);function sj(t){return typeof t=="number"?fv:typeof t=="string"?Et.test(t)?DS:zS:Array.isArray(t)?BS:typeof t=="object"?rj:fv}function ij(t,e,n){const r=[],s=n||sj(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ue:e;a=cs(l,a)}r.push(a)}return r}function US(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(_c(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=ij(e,r,s),a=o.length,l=u=>{let c=0;if(a>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const d=ll(t[c],t[c+1],u);return o[c](d)};return n?u=>l(vs(t[0],t[i-1],u)):l}function oj(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=ll(0,e,r);t.push(Re(n,1,s))}}function aj(t){const e=[0];return oj(e,t.length-1),e}function lj(t,e){return t.map(n=>n*e)}function uj(t,e){return t.map(()=>e||ES).splice(0,t.length-1)}function Tc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=HR(r)?r.map(cv):cv(r),i={done:!1,value:e[0]},o=lj(n&&n.length===e.length?n:aj(e),t),a=US(o,e,{ease:Array.isArray(s)?s:uj(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function WS(t,e){return e?t*(1e3/e):0}const cj=5;function HS(t,e,n){const r=Math.max(e-cj,0);return WS(n-t(r),e-r)}const If=.001,dj=.01,fj=10,hj=.05,pj=1;function mj({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=vs(hj,pj,o),t=vs(dj,fj,mr(t)),o<1?(s=u=>{const c=u*o,d=c*t,f=c-n,h=Ep(u,o),p=Math.exp(-d);return If-f/h*p},i=u=>{const d=u*o*t,f=d*n+n,h=Math.pow(o,2)*Math.pow(u,2)*t,p=Math.exp(-d),m=Ep(Math.pow(u,2),o);return(-s(u)+If>0?-1:1)*((f-h)*p)/m}):(s=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-If+c*d},i=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const a=5/t,l=yj(s,i,a);if(t=ri(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const gj=12;function yj(t,e,n){let r=n;for(let s=1;s<gj;s++)r=r-t(r)/e(r);return r}function Ep(t,e){return t*Math.sqrt(1-e*e)}const vj=["duration","bounce"],xj=["stiffness","damping","mass"];function hv(t,e){return e.some(n=>t[n]!==void 0)}function wj(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!hv(t,xj)&&hv(t,vj)){const n=mj(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function qS({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:u,duration:c,velocity:d,isResolvedFromDuration:f}=wj({...r,velocity:-mr(r.velocity||0)}),h=d||0,p=l/(2*Math.sqrt(a*u)),m=i-s,y=mr(Math.sqrt(a/u)),g=Math.abs(m)<5;n||(n=g?.01:2),e||(e=g?.005:.5);let v;if(p<1){const x=Ep(y,p);v=k=>{const _=Math.exp(-p*y*k);return i-_*((h+p*y*m)/x*Math.sin(x*k)+m*Math.cos(x*k))}}else if(p===1)v=x=>i-Math.exp(-y*x)*(m+(h+y*m)*x);else{const x=y*Math.sqrt(p*p-1);v=k=>{const _=Math.exp(-p*y*k),T=Math.min(x*k,300);return i-_*((h+p*y*m)*Math.sinh(T)+x*m*Math.cosh(T))/x}}return{calculatedDuration:f&&c||null,next:x=>{const k=v(x);if(f)o.done=x>=c;else{let _=h;x!==0&&(p<1?_=HS(v,x,k):_=0);const T=Math.abs(_)<=n,M=Math.abs(i-k)<=e;o.done=T&&M}return o.value=o.done?i:k,o}}}function pv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],f={done:!1,value:d},h=C=>a!==void 0&&C<a||l!==void 0&&C>l,p=C=>a===void 0?l:l===void 0||Math.abs(a-C)<Math.abs(l-C)?a:l;let m=n*e;const y=d+m,g=o===void 0?y:o(y);g!==y&&(m=g-d);const v=C=>-m*Math.exp(-C/r),x=C=>g+v(C),k=C=>{const P=v(C),A=x(C);f.done=Math.abs(P)<=u,f.value=f.done?g:A};let _,T;const M=C=>{h(f.value)&&(_=C,T=qS({keyframes:[f.value,p(f.value)],velocity:HS(x,C,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return M(0),{calculatedDuration:null,next:C=>{let P=!1;return!T&&_===void 0&&(P=!0,k(C),M(C)),_!==void 0&&C>_?T.next(C-_):(!P&&k(C),f)}}}const kj=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Me.update(e,!0),stop:()=>Sr(e),now:()=>xt.isProcessing?xt.timestamp:performance.now()}},mv=2e4;function gv(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<mv;)e+=n,r=t.next(e);return e>=mv?1/0:e}const bj={decay:pv,inertia:pv,tween:Tc,keyframes:Tc,spring:qS};function Ec({autoplay:t=!0,delay:e=0,driver:n=kj,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:d,...f}){let h=1,p=!1,m,y;const g=()=>{y=new Promise(G=>{m=G})};g();let v;const x=bj[s]||Tc;let k;x!==Tc&&typeof r[0]!="number"&&(k=US([0,100],r,{clamp:!1}),r=[0,100]);const _=x({...f,keyframes:r});let T;a==="mirror"&&(T=x({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let M="idle",C=null,P=null,A=null;_.calculatedDuration===null&&i&&(_.calculatedDuration=gv(_));const{calculatedDuration:ee}=_;let J=1/0,X=1/0;ee!==null&&(J=ee+o,X=J*(i+1)-o);let se=0;const we=G=>{if(P===null)return;h>0&&(P=Math.min(P,G)),h<0&&(P=Math.min(G-X/h,P)),C!==null?se=C:se=Math.round(G-P)*h;const be=se-e*(h>=0?1:-1),Lt=h>=0?be<0:be>X;se=Math.max(be,0),M==="finished"&&C===null&&(se=X);let on=se,Qn=_;if(i){const Rs=Math.min(se,X)/J;let Er=Math.floor(Rs),Xn=Rs%1;!Xn&&Rs>=1&&(Xn=1),Xn===1&&Er--,Er=Math.min(Er,i+1),!!(Er%2)&&(a==="reverse"?(Xn=1-Xn,o&&(Xn-=o/J)):a==="mirror"&&(Qn=T)),on=vs(0,1,Xn)*J}const Tt=Lt?{done:!1,value:r[0]}:Qn.next(on);k&&(Tt.value=k(Tt.value));let{done:bn}=Tt;!Lt&&ee!==null&&(bn=h>=0?se>=X:se<=0);const Vl=C===null&&(M==="finished"||M==="running"&&bn);return d&&d(Tt.value),Vl&&I(),Tt},ie=()=>{v&&v.stop(),v=void 0},ke=()=>{M="idle",ie(),m(),g(),P=A=null},I=()=>{M="finished",c&&c(),ie(),m()},W=()=>{if(p)return;v||(v=n(we));const G=v.now();l&&l(),C!==null?P=G-C:(!P||M==="finished")&&(P=G),M==="finished"&&g(),A=P,C=null,M="running",v.start()};t&&W();const Y={then(G,be){return y.then(G,be)},get time(){return mr(se)},set time(G){G=ri(G),se=G,C!==null||!v||h===0?C=G:P=v.now()-G/h},get duration(){const G=_.calculatedDuration===null?gv(_):_.calculatedDuration;return mr(G)},get speed(){return h},set speed(G){G===h||!v||(h=G,Y.time=mr(se))},get state(){return M},play:W,pause:()=>{M="paused",C=se},stop:()=>{p=!0,M!=="idle"&&(M="idle",u&&u(),ke())},cancel:()=>{A!==null&&we(A),ke()},complete:()=>{M="finished"},sample:G=>(P=0,we(G))};return Y}function Sj(t){let e;return()=>(e===void 0&&(e=t()),e)}const _j=Sj(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Cj=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),fu=10,Tj=2e4,Ej=(t,e)=>e.type==="spring"||t==="backgroundColor"||!SS(e.ease);function Mj(t,e,{onUpdate:n,onComplete:r,...s}){if(!(_j()&&Cj.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const c=()=>{l=new Promise(x=>{a=x})};c();let{keyframes:d,duration:f=300,ease:h,times:p}=s;if(Ej(e,s)){const x=Ec({...s,repeat:0,delay:0});let k={done:!1,value:d[0]};const _=[];let T=0;for(;!k.done&&T<Tj;)k=x.sample(T),_.push(k.value),T+=fu;p=void 0,d=_,f=T-fu,h="linear"}const m=$R(t.owner.current,e,d,{...s,duration:f,ease:h,times:p}),y=()=>{u=!1,m.cancel()},g=()=>{u=!0,Me.update(y),a(),c()};return m.onfinish=()=>{u||(t.set(VR(d,s)),r&&r(),g())},{then(x,k){return l.then(x,k)},attachTimeline(x){return m.timeline=x,m.onfinish=null,Ue},get time(){return mr(m.currentTime||0)},set time(x){m.currentTime=ri(x)},get speed(){return m.playbackRate},set speed(x){m.playbackRate=x},get duration(){return mr(f)},play:()=>{o||(m.play(),Sr(y))},pause:()=>m.pause(),stop:()=>{if(o=!0,m.playState==="idle")return;const{currentTime:x}=m;if(x){const k=Ec({...s,autoplay:!1});t.setWithVelocity(k.sample(x-fu).value,k.sample(x).value,fu)}g()},complete:()=>{u||m.finish()},cancel:g}}function Pj({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Ue,pause:Ue,stop:Ue,then:i=>(i(),Promise.resolve()),cancel:Ue,complete:Ue});return e?Ec({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const Oj={type:"spring",stiffness:500,damping:25,restSpeed:10},Aj=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Nj={type:"keyframes",duration:.8},Dj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Rj=(t,{keyframes:e})=>e.length>2?Nj:_i.has(t)?t.startsWith("scale")?Aj(e[1]):Oj:Dj,Mp=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(xs.test(e)||e==="0")&&!e.startsWith("url(")),jj=new Set(["brightness","contrast","saturate","opacity"]);function Ij(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Md)||[];if(!r)return t;const s=n.replace(r,"");let i=jj.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Lj=/([a-z-]*)\(.*?\)/g,Pp={...xs,getAnimatableNone:t=>{const e=t.match(Lj);return e?e.map(Ij).join(" "):t}},$j={...oS,color:Et,backgroundColor:Et,outlineColor:Et,fill:Et,stroke:Et,borderColor:Et,borderTopColor:Et,borderRightColor:Et,borderBottomColor:Et,borderLeftColor:Et,filter:Pp,WebkitFilter:Pp},Og=t=>$j[t];function KS(t,e){let n=Og(t);return n!==Pp&&(n=xs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const JS=t=>/^0[^.\s]+$/.test(t);function Vj(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||JS(t)}function Fj(t,e,n,r){const s=Mp(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),Vj(i[u])&&l.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&l.length&&a)for(let u=0;u<l.length;u++){const c=l[u];i[c]=KS(e,a)}return i}function Bj({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function Ag(t,e){return t[e]||t.default||t}const zj={skipAnimations:!1},Ng=(t,e,n,r={})=>s=>{const i=Ag(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-ri(o);const l=Fj(e,t,n,i),u=l[0],c=l[l.length-1],d=Mp(t,u),f=Mp(t,c);let h={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:p=>{e.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(Bj(i)||(h={...h,...Rj(t,h)}),h.duration&&(h.duration=ri(h.duration)),h.repeatDelay&&(h.repeatDelay=ri(h.repeatDelay)),!d||!f||LR.current||i.type===!1||zj.skipAnimations)return Pj(h);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const p=Mj(e,t,h);if(p)return p}return Ec(h)};function Mc(t){return!!(Jt(t)&&t.add)}const GS=t=>/^\-?\d*\.?\d+$/.test(t);function Dg(t,e){t.indexOf(e)===-1&&t.push(e)}function Rg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class jg{constructor(){this.subscriptions=[]}add(e){return Dg(this.subscriptions,e),()=>Rg(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Uj=t=>!isNaN(parseFloat(t));class Wj{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=xt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Me.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Me.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Uj(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new jg);const r=this.events[e].add(n);return e==="change"?()=>{r(),Me.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?WS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bo(t,e){return new Wj(t,e)}const ZS=t=>e=>e.test(t),Hj={test:t=>t==="auto",parse:t=>t},YS=[Ci,Q,Kn,Ar,XD,QD,Hj],Xo=t=>YS.find(ZS(t)),qj=[...YS,Et,xs],Kj=t=>qj.find(ZS(t));function Jj(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,bo(n))}function Gj(t,e){const n=Od(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=hR(i[o]);Jj(t,o,a)}}function Zj(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],u=e[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),c!=null&&(typeof c=="string"&&(GS(c)||JS(c))?c=parseFloat(c):!Kj(c)&&xs.test(u)&&(c=KS(l,u)),t.addValue(l,bo(c,{owner:t})),n[l]===void 0&&(n[l]=c),c!==null&&t.setBaseTarget(l,c))}}function Yj(t,e){return e?(e[t]||e.default||e).from:void 0}function Qj(t,e,n){const r={};for(const s in t){const i=Yj(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function Xj({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function eI(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function QS(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const u=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const f=t.getValue(d),h=a[d];if(!f||h===void 0||c&&Xj(c,d))continue;const p={delay:n,elapsed:0,...Ag(i||{},d)};if(window.HandoffAppearAnimations){const g=t.getProps()[Xb];if(g){const v=window.HandoffAppearAnimations(g,d,f,Me);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let m=!p.isHandoff&&!eI(f,h);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(m=!1),f.animation&&(m=!1),m)continue;f.start(Ng(d,f,h,t.shouldReduceMotion&&_i.has(d)?{type:!1}:p));const y=f.animation;Mc(l)&&(l.add(d),y.then(()=>l.remove(d))),u.push(y)}return o&&Promise.all(u).then(()=>{o&&Gj(t,o)}),u}function Op(t,e,n={}){const r=Od(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(QS(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:d}=s;return tI(t,e,u+l,c,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,u]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function tI(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(nI).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(Op(u,e,{...i,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function nI(t,e){return t.sortNodePosition(e)}function rI(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Op(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Op(t,e,n);else{const s=typeof e=="function"?Od(t,e,n.custom):e;r=Promise.all(QS(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const sI=[...yg].reverse(),iI=yg.length;function oI(t){return e=>Promise.all(e.map(({animation:n,options:r})=>rI(t,n,r)))}function aI(t){let e=oI(t);const n=uI();let r=!0;const s=(l,u)=>{const c=Od(t,u);if(c){const{transition:d,transitionEnd:f,...h}=c;l={...l,...h,...f}}return l};function i(l){e=l(t)}function o(l,u){const c=t.getProps(),d=t.getVariantContext(!0)||{},f=[],h=new Set;let p={},m=1/0;for(let g=0;g<iI;g++){const v=sI[g],x=n[v],k=c[v]!==void 0?c[v]:d[v],_=ol(k),T=v===u?x.isActive:null;T===!1&&(m=g);let M=k===d[v]&&k!==c[v]&&_;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),x.protectedKeys={...p},!x.isActive&&T===null||!k&&!x.prevProp||Td(k)||typeof k=="boolean")continue;let P=lI(x.prevProp,k)||v===u&&x.isActive&&!M&&_||g>m&&_,A=!1;const ee=Array.isArray(k)?k:[k];let J=ee.reduce(s,{});T===!1&&(J={});const{prevResolvedValues:X={}}=x,se={...X,...J},we=ie=>{P=!0,h.has(ie)&&(A=!0,h.delete(ie)),x.needsAnimating[ie]=!0};for(const ie in se){const ke=J[ie],I=X[ie];if(p.hasOwnProperty(ie))continue;let W=!1;Sc(ke)&&Sc(I)?W=!kS(ke,I):W=ke!==I,W?ke!==void 0?we(ie):h.add(ie):ke!==void 0&&h.has(ie)?we(ie):x.protectedKeys[ie]=!0}x.prevProp=k,x.prevResolvedValues=J,x.isActive&&(p={...p,...J}),r&&t.blockInitialAnimation&&(P=!1),P&&(!M||A)&&f.push(...ee.map(ie=>({animation:ie,options:{type:v,...l}})))}if(h.size){const g={};h.forEach(v=>{const x=t.getBaseTarget(v);x!==void 0&&(g[v]=x)}),f.push({animation:g})}let y=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(f):Promise.resolve()}function a(l,u,c){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const f=o(c,l);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function lI(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!kS(e,t):!1}function Is(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uI(){return{animate:Is(!0),whileInView:Is(),whileHover:Is(),whileTap:Is(),whileDrag:Is(),whileFocus:Is(),exit:Is()}}class cI extends Os{constructor(e){super(e),e.animationState||(e.animationState=aI(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Td(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let dI=0;class fI extends Os{constructor(){super(...arguments),this.id=dI++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const hI={animation:{Feature:cI},exit:{Feature:fI}},yv=(t,e)=>Math.abs(t-e);function pI(t,e){const n=yv(t.x,e.x),r=yv(t.y,e.y);return Math.sqrt(n**2+r**2)}class XS{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=$f(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=pI(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=d,{timestamp:m}=xt;this.history.push({...p,timestamp:m});const{onStart:y,onMove:g}=this.handlers;f||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Lf(f,this.transformPagePoint),Me.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=$f(d.type==="pointercancel"?this.lastMoveEventInfo:Lf(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,y),p&&p(d,y)},!gS(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Pd(e),a=Lf(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=xt;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,$f(a,this.history)),this.removeListeners=cs(pr(this.contextWindow,"pointermove",this.handlePointerMove),pr(this.contextWindow,"pointerup",this.handlePointerUp),pr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Sr(this.updatePoint)}}function Lf(t,e){return e?{point:e(t.point)}:t}function vv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function $f({point:t},e){return{point:t,delta:vv(t,e_(e)),offset:vv(t,mI(e)),velocity:gI(e,.1)}}function mI(t){return t[0]}function e_(t){return t[t.length-1]}function gI(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=e_(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>ri(e)));)n--;if(!r)return{x:0,y:0};const i=mr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function tn(t){return t.max-t.min}function Ap(t,e=0,n=.01){return Math.abs(t-e)<=n}function xv(t,e,n,r=.5){t.origin=r,t.originPoint=Re(e.min,e.max,t.origin),t.scale=tn(n)/tn(e),(Ap(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Re(n.min,n.max,t.origin)-t.originPoint,(Ap(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Na(t,e,n,r){xv(t.x,e.x,n.x,r?r.originX:void 0),xv(t.y,e.y,n.y,r?r.originY:void 0)}function wv(t,e,n){t.min=n.min+e.min,t.max=t.min+tn(e)}function yI(t,e,n){wv(t.x,e.x,n.x),wv(t.y,e.y,n.y)}function kv(t,e,n){t.min=e.min-n.min,t.max=t.min+tn(e)}function Da(t,e,n){kv(t.x,e.x,n.x),kv(t.y,e.y,n.y)}function vI(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Re(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Re(n,t,r.max):Math.min(t,n)),t}function bv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function xI(t,{top:e,left:n,bottom:r,right:s}){return{x:bv(t.x,n,s),y:bv(t.y,e,r)}}function Sv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function wI(t,e){return{x:Sv(t.x,e.x),y:Sv(t.y,e.y)}}function kI(t,e){let n=.5;const r=tn(t),s=tn(e);return s>r?n=ll(e.min,e.max-r,t.min):r>s&&(n=ll(t.min,t.max-s,e.min)),vs(0,1,n)}function bI(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Np=.35;function SI(t=Np){return t===!1?t=0:t===!0&&(t=Np),{x:_v(t,"left","right"),y:_v(t,"top","bottom")}}function _v(t,e,n){return{min:Cv(t,e),max:Cv(t,n)}}function Cv(t,e){return typeof t=="number"?t:t[e]||0}const Tv=()=>({translate:0,scale:1,origin:0,originPoint:0}),eo=()=>({x:Tv(),y:Tv()}),Ev=()=>({min:0,max:0}),Ke=()=>({x:Ev(),y:Ev()});function un(t){return[t("x"),t("y")]}function t_({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function _I({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function CI(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Vf(t){return t===void 0||t===1}function Dp({scale:t,scaleX:e,scaleY:n}){return!Vf(t)||!Vf(e)||!Vf(n)}function Fs(t){return Dp(t)||n_(t)||t.z||t.rotate||t.rotateX||t.rotateY}function n_(t){return Mv(t.x)||Mv(t.y)}function Mv(t){return t&&t!=="0%"}function Pc(t,e,n){const r=t-n,s=e*r;return n+s}function Pv(t,e,n,r,s){return s!==void 0&&(t=Pc(t,s,r)),Pc(t,n,r)+e}function Rp(t,e=0,n=1,r,s){t.min=Pv(t.min,e,n,r,s),t.max=Pv(t.max,e,n,r,s)}function r_(t,{x:e,y:n}){Rp(t.x,e.translate,e.scale,e.originPoint),Rp(t.y,n.translate,n.scale,n.originPoint)}function TI(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&to(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,r_(t,o)),r&&Fs(i.latestValues)&&to(t,i.latestValues))}e.x=Ov(e.x),e.y=Ov(e.y)}function Ov(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ir(t,e){t.min=t.min+e,t.max=t.max+e}function Av(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=Re(t.min,t.max,i);Rp(t,e[n],e[r],o,e.scale)}const EI=["x","scaleX","originX"],MI=["y","scaleY","originY"];function to(t,e){Av(t.x,e,EI),Av(t.y,e,MI)}function s_(t,e){return t_(CI(t.getBoundingClientRect(),e))}function PI(t,e,n){const r=s_(t,n),{scroll:s}=e;return s&&(Ir(r.x,s.offset.x),Ir(r.y,s.offset.y)),r}const i_=({current:t})=>t?t.ownerDocument.defaultView:null,OI=new WeakMap;class AI{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ke(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Pd(c,"page").point)},i=(c,d)=>{const{drag:f,dragPropagation:h,onDragStart:p}=this.getProps();if(f&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=vS(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),un(y=>{let g=this.getAxisMotionValue(y).get()||0;if(Kn.test(g)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[y];x&&(g=tn(x)*(parseFloat(g)/100))}}this.originPoint[y]=g}),p&&Me.update(()=>p(c,d),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(c,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:p,onDrag:m}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:y}=d;if(h&&this.currentDirection===null){this.currentDirection=NI(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,y),this.updateAxis("y",d.point,y),this.visualElement.render(),m&&m(c,d)},a=(c,d)=>this.stop(c,d),l=()=>un(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new XS(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:i_(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Me.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!hu(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=vI(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Qi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=xI(s.layoutBox,n):this.constraints=!1,this.elastic=SI(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&un(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=bI(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Qi(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=PI(r,s.root,this.visualElement.getTransformPagePoint());let o=wI(s.layout.layoutBox,i);if(n){const a=n(_I(o));this.hasMutatedConstraints=!!a,a&&(o=t_(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=un(c=>{if(!hu(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const f=s?200:1e6,h=s?40:1e7,p={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Ng(e,r,0,n))}stopAnimation(){un(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){un(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){un(n=>{const{drag:r}=this.getProps();if(!hu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Re(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Qi(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};un(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=kI({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),un(o=>{if(!hu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Re(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;OI.set(this.visualElement,this);const e=this.visualElement.current,n=pr(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Qi(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=dr(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(un(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Np,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function hu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function NI(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class DI extends Os{constructor(e){super(e),this.removeGroupControls=Ue,this.removeListeners=Ue,this.controls=new AI(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ue}unmount(){this.removeGroupControls(),this.removeListeners()}}const Nv=t=>(e,n)=>{t&&Me.update(()=>t(e,n))};class RI extends Os{constructor(){super(...arguments),this.removePointerDownListener=Ue}onPointerDown(e){this.session=new XS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:i_(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Nv(e),onStart:Nv(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Me.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=pr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function jI(){const t=b.useContext(_d);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=b.useId();return b.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const Iu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Dv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ea={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Q.test(t))t=parseFloat(t);else return t;const n=Dv(t,e.target.x),r=Dv(t,e.target.y);return`${n}% ${r}%`}},II={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=xs.parse(t);if(s.length>5)return r;const i=xs.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const u=Re(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class LI extends ve.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;HD($I),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Iu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Me.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function o_(t){const[e,n]=jI(),r=b.useContext(xg);return ve.createElement(LI,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(tS),isPresent:e,safeToRemove:n})}const $I={borderRadius:{...ea,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ea,borderTopRightRadius:ea,borderBottomLeftRadius:ea,borderBottomRightRadius:ea,boxShadow:II},a_=["TopLeft","TopRight","BottomLeft","BottomRight"],VI=a_.length,Rv=t=>typeof t=="string"?parseFloat(t):t,jv=t=>typeof t=="number"||Q.test(t);function FI(t,e,n,r,s,i){s?(t.opacity=Re(0,n.opacity!==void 0?n.opacity:1,BI(r)),t.opacityExit=Re(e.opacity!==void 0?e.opacity:1,0,zI(r))):i&&(t.opacity=Re(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<VI;o++){const a=`border${a_[o]}Radius`;let l=Iv(e,a),u=Iv(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||jv(l)===jv(u)?(t[a]=Math.max(Re(Rv(l),Rv(u),r),0),(Kn.test(u)||Kn.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Re(e.rotate||0,n.rotate||0,r))}function Iv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const BI=l_(0,.5,OS),zI=l_(.5,.95,Ue);function l_(t,e,n){return r=>r<t?0:r>e?1:n(ll(t,e,r))}function Lv(t,e){t.min=e.min,t.max=e.max}function ln(t,e){Lv(t.x,e.x),Lv(t.y,e.y)}function $v(t,e,n,r,s){return t-=e,t=Pc(t,1/n,r),s!==void 0&&(t=Pc(t,1/s,r)),t}function UI(t,e=0,n=1,r=.5,s,i=t,o=t){if(Kn.test(e)&&(e=parseFloat(e),e=Re(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Re(i.min,i.max,r);t===i&&(a-=e),t.min=$v(t.min,e,n,a,s),t.max=$v(t.max,e,n,a,s)}function Vv(t,e,[n,r,s],i,o){UI(t,e[n],e[r],e[s],e.scale,i,o)}const WI=["x","scaleX","originX"],HI=["y","scaleY","originY"];function Fv(t,e,n,r){Vv(t.x,e,WI,n?n.x:void 0,r?r.x:void 0),Vv(t.y,e,HI,n?n.y:void 0,r?r.y:void 0)}function Bv(t){return t.translate===0&&t.scale===1}function u_(t){return Bv(t.x)&&Bv(t.y)}function qI(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function c_(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function zv(t){return tn(t.x)/tn(t.y)}class KI{constructor(){this.members=[]}add(e){Dg(this.members,e),e.scheduleRender()}remove(e){if(Rg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Uv(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:c}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const JI=(t,e)=>t.depth-e.depth;class GI{constructor(){this.children=[],this.isDirty=!1}add(e){Dg(this.children,e),this.isDirty=!0}remove(e){Rg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(JI),this.isDirty=!1,this.children.forEach(e)}}function ZI(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Sr(r),t(i-e))};return Me.read(r,!0),()=>Sr(r)}function YI(t){window.MotionDebug&&window.MotionDebug.record(t)}function QI(t){return t instanceof SVGElement&&t.tagName!=="svg"}function XI(t,e,n){const r=Jt(t)?t:bo(t);return r.start(Ng("",r,e,n)),r.animation}const Wv=["","X","Y","Z"],e2={visibility:"hidden"},Hv=1e3;let t2=0;const Bs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function d_({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=t2++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bs.totalNodes=Bs.resolvedTargetDeltas=Bs.recalculatedProjection=0,this.nodes.forEach(s2),this.nodes.forEach(u2),this.nodes.forEach(c2),this.nodes.forEach(i2),YI(Bs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new GI)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new jg),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=QI(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=ZI(f,250),Iu.hasAnimatedSinceResize&&(Iu.hasAnimatedSinceResize=!1,this.nodes.forEach(Kv))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||m2,{onLayoutAnimationStart:y,onLayoutAnimationComplete:g}=c.getProps(),v=!this.targetLayout||!c_(this.targetLayout,p)||h,x=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const k={...Ag(m,"layout"),onPlay:y,onComplete:g};(c.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else f||Kv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Sr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(d2),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qv);return}this.isUpdating||this.nodes.forEach(a2),this.isUpdating=!1,this.nodes.forEach(l2),this.nodes.forEach(n2),this.nodes.forEach(r2),this.clearAllSnapshots();const a=performance.now();xt.delta=vs(0,1e3/60,a-xt.timestamp),xt.timestamp=a,xt.isProcessing=!0,Pf.update.process(xt),Pf.preRender.process(xt),Pf.render.process(xt),xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(o2),this.sharedNodes.forEach(f2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ke(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!u_(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Fs(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),g2(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ke();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Ir(a.x,l.offset.x),Ir(a.y,l.offset.y)),a}removeElementScroll(o){const a=Ke();ln(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:d}=u;if(u!==this.root&&c&&d.layoutScroll){if(c.isRoot){ln(a,o);const{scroll:f}=this.root;f&&(Ir(a.x,-f.offset.x),Ir(a.y,-f.offset.y))}Ir(a.x,c.offset.x),Ir(a.y,c.offset.y)}}return a}applyTransform(o,a=!1){const l=Ke();ln(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&to(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Fs(c.latestValues)&&to(l,c.latestValues)}return Fs(this.latestValues)&&to(l,this.latestValues),l}removeTransform(o){const a=Ke();ln(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Fs(u.latestValues))continue;Dp(u.latestValues)&&u.updateSnapshot();const c=Ke(),d=u.measurePageBox();ln(c,d),Fv(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Fs(this.latestValues)&&Fv(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=xt.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ke(),this.relativeTargetOrigin=Ke(),Da(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ke(),this.targetWithTransforms=Ke()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ln(this.target,this.layout.layoutBox),r_(this.target,this.targetDelta)):ln(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ke(),this.relativeTargetOrigin=Ke(),Da(this.relativeTargetOrigin,this.target,h.target),ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Dp(this.parent.latestValues)||n_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===xt.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;ln(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;TI(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=eo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=eo(),this.projectionDeltaWithTransform=eo());const m=this.projectionTransform;Na(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=Uv(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==f||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Bs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=eo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Ke(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=h!==p,y=this.getStack(),g=!y||y.members.length<=1,v=!!(m&&!g&&this.options.crossfade===!0&&!this.path.some(p2));this.animationProgress=0;let x;this.mixTargetDelta=k=>{const _=k/1e3;Jv(d.x,o.x,_),Jv(d.y,o.y,_),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Da(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h2(this.relativeTarget,this.relativeTargetOrigin,f,_),x&&qI(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Ke()),ln(x,this.relativeTarget)),m&&(this.animationValues=c,FI(c,u,this.latestValues,_,v,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Sr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Me.update(()=>{Iu.hasAnimatedSinceResize=!0,this.currentAnimation=XI(0,Hv,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&f_(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ke();const d=tn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=tn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}ln(a,l),to(a,c),Na(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new KI),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<Wv.length;c++){const d="rotate"+Wv[c];l[d]&&(u[d]=l[d],o.setStaticValue(d,0))}o.render();for(const c in u)o.setStaticValue(c,u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return e2;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=ju(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=ju(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Fs(this.latestValues)&&(m.transform=c?c({},""):"none",this.hasProjected=!1),m}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Uv(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:h,y:p}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in kc){if(f[m]===void 0)continue;const{correct:y,applyTo:g}=kc[m],v=u.transform==="none"?f[m]:y(f[m],d);if(g){const x=g.length;for(let k=0;k<x;k++)u[g[k]]=v}else u[m]=v}return this.options.layoutId&&(u.pointerEvents=d===this?ju(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(qv),this.root.sharedNodes.clear()}}}function n2(t){t.updateLayout()}function r2(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?un(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=tn(f);f.min=r[d].min,f.max=f.min+h}):f_(i,n.layoutBox,r)&&un(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=tn(r[d]);f.max=f.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+h)});const a=eo();Na(a,r,n.layoutBox);const l=eo();o?Na(l,t.applyTransform(s,!0),n.measuredBox):Na(l,r,n.layoutBox);const u=!u_(a);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const p=Ke();Da(p,n.layoutBox,f.layoutBox);const m=Ke();Da(m,r,h.layoutBox),c_(p,m)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function s2(t){Bs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function i2(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function o2(t){t.clearSnapshot()}function qv(t){t.clearMeasurements()}function a2(t){t.isLayoutDirty=!1}function l2(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Kv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function u2(t){t.resolveTargetDelta()}function c2(t){t.calcProjection()}function d2(t){t.resetRotation()}function f2(t){t.removeLeadSnapshot()}function Jv(t,e,n){t.translate=Re(e.translate,0,n),t.scale=Re(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Gv(t,e,n,r){t.min=Re(e.min,n.min,r),t.max=Re(e.max,n.max,r)}function h2(t,e,n,r){Gv(t.x,e.x,n.x,r),Gv(t.y,e.y,n.y,r)}function p2(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const m2={duration:.45,ease:[.4,0,.1,1]},Zv=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Yv=Zv("applewebkit/")&&!Zv("chrome/")?Math.round:Ue;function Qv(t){t.min=Yv(t.min),t.max=Yv(t.max)}function g2(t){Qv(t.x),Qv(t.y)}function f_(t,e,n){return t==="position"||t==="preserve-aspect"&&!Ap(zv(e),zv(n),.2)}const y2=d_({attachResizeListener:(t,e)=>dr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ff={current:void 0},h_=d_({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ff.current){const t=new y2({});t.mount(window),t.setOptions({layoutScroll:!0}),Ff.current=t}return Ff.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),v2={pan:{Feature:RI},drag:{Feature:DI,ProjectionNode:h_,MeasureLayout:o_}},x2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function w2(t){const e=x2.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function jp(t,e,n=1){const[r,s]=w2(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return GS(o)?parseFloat(o):o}else return _p(s)?jp(s,e,n+1):s}function k2(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!_p(i))return;const o=jp(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!_p(i))continue;const o=jp(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const b2=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),p_=t=>b2.has(t),S2=t=>Object.keys(t).some(p_),Xv=t=>t===Ci||t===Q,ex=(t,e)=>parseFloat(t.split(", ")[e]),tx=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return ex(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?ex(i[1],t):0}},_2=new Set(["x","y","z"]),C2=Al.filter(t=>!_2.has(t));function T2(t){const e=[];return C2.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const So={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:tx(4,13),y:tx(5,14)};So.translateX=So.x;So.translateY=So.y;const E2=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=So[u](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const c=e.getValue(u);c&&c.jump(a[u]),t[u]=So[u](l,i)}),t},M2=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(p_);let i=[],o=!1;const a=[];if(s.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let c=n[l],d=Xo(c);const f=e[l];let h;if(Sc(f)){const p=f.length,m=f[0]===null?1:0;c=f[m],d=Xo(c);for(let y=m;y<p&&f[y]!==null;y++)h?_c(Xo(f[y])===h):h=Xo(f[y])}else h=Xo(f);if(d!==h)if(Xv(d)&&Xv(h)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&h===Q&&(e[l]=f.map(parseFloat))}else d!=null&&d.transform&&(h!=null&&h.transform)&&(c===0||f===0)?c===0?u.set(h.transform(c)):e[l]=d.transform(f):(o||(i=T2(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=E2(e,t,a);return i.length&&i.forEach(([c,d])=>{t.getValue(c).set(d)}),t.render(),Cd&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function P2(t,e,n,r){return S2(e)?M2(t,e,n,r):{target:e,transitionEnd:r}}const O2=(t,e,n,r)=>{const s=k2(t,e,r);return e=s.target,r=s.transitionEnd,P2(t,e,n,r)},Ip={current:null},m_={current:!1};function A2(){if(m_.current=!0,!!Cd)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ip.current=t.matches;t.addListener(e),e()}else Ip.current=!1}function N2(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(Jt(i))t.addValue(s,i),Mc(r)&&r.add(s);else if(Jt(o))t.addValue(s,bo(i,{owner:t})),Mc(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,bo(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const nx=new WeakMap,g_=Object.keys(al),D2=g_.length,rx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],R2=vg.length;class j2{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Me.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Ed(n),this.isVariantNode=eS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const d in c){const f=c[d];a[d]!==void 0&&Jt(f)&&(f.set(a[d],!1),Mc(u)&&u.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,nx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),m_.current||A2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ip.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){nx.delete(this.current),this.projection&&this.projection.unmount(),Sr(this.notifyUpdate),Sr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=_i.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Me.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<D2;l++){const u=g_[l],{isEnabled:c,Feature:d,ProjectionNode:f,MeasureLayout:h}=al[u];f&&(o=f),c(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),h&&(a=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:d,layoutScroll:f,layoutRoot:h}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||d&&Qi(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:h})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ke()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<rx.length;r++){const s=rx[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=N2(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<R2;r++){const s=vg[r],i=this.props[s];(ol(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=bo(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Tg(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Jt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new jg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class y_ extends j2{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=Qj(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){Zj(this,r,o);const a=O2(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function I2(t){return window.getComputedStyle(t)}class L2 extends y_{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(_i.has(n)){const r=Og(n);return r&&r.default||0}else{const r=I2(e),s=(sS(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return s_(e,n)}build(e,n,r,s){kg(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Cg(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Jt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){cS(e,n,r,s)}}class $2 extends y_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(_i.has(n)){const r=Og(n);return r&&r.default||0}return n=dS.has(n)?n:gg(n),e.getAttribute(n)}measureInstanceViewportBox(){return Ke()}scrapeMotionValuesFromProps(e,n){return hS(e,n)}build(e,n,r,s){Sg(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){fS(e,n,r,s)}mount(e){this.isSVGTag=_g(e.tagName),super.mount(e)}}const V2=(t,e)=>wg(t)?new $2(e,{enableHardwareAcceleration:!1}):new L2(e,{enableHardwareAcceleration:!0}),F2={layout:{ProjectionNode:h_,MeasureLayout:o_}},B2={...hI,...RR,...v2,...F2},_o=UD((t,e)=>kR(t,e,B2,V2));function v_(){const t=b.useRef(!1);return mg(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function z2(){const t=v_(),[e,n]=b.useState(0),r=b.useCallback(()=>{t.current&&n(e+1)},[e]);return[b.useCallback(()=>Me.postRender(r),[r]),e]}class U2 extends b.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function W2({children:t,isPresent:e}){const n=b.useId(),r=b.useRef(null),s=b.useRef({width:0,height:0,top:0,left:0});return b.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),b.createElement(U2,{isPresent:e,childRef:r,sizeRef:s},b.cloneElement(t,{ref:r}))}const Bf=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=pS(H2),l=b.useId(),u=b.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:c=>{a.set(c,!0);for(const d of a.values())if(!d)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),i?void 0:[n]);return b.useMemo(()=>{a.forEach((c,d)=>a.set(d,!1))},[n]),b.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=b.createElement(W2,{isPresent:n},t)),b.createElement(_d.Provider,{value:u},t)};function H2(){return new Map}function q2(t){return b.useEffect(()=>()=>t(),[])}const zs=t=>t.key||"";function K2(t,e){t.forEach(n=>{const r=zs(n);e.set(r,n)})}function J2(t){const e=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&e.push(n)}),e}const x_=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=b.useContext(xg).forceRender||z2()[0],l=v_(),u=J2(t);let c=u;const d=b.useRef(new Map).current,f=b.useRef(c),h=b.useRef(new Map).current,p=b.useRef(!0);if(mg(()=>{p.current=!1,K2(u,h),f.current=c}),q2(()=>{p.current=!0,h.clear(),d.clear()}),p.current)return b.createElement(b.Fragment,null,c.map(v=>b.createElement(Bf,{key:zs(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},v)));c=[...c];const m=f.current.map(zs),y=u.map(zs),g=m.length;for(let v=0;v<g;v++){const x=m[v];y.indexOf(x)===-1&&!d.has(x)&&d.set(x,void 0)}return o==="wait"&&d.size&&(c=[]),d.forEach((v,x)=>{if(y.indexOf(x)!==-1)return;const k=h.get(x);if(!k)return;const _=m.indexOf(x);let T=v;if(!T){const M=()=>{d.delete(x);const C=Array.from(h.keys()).filter(P=>!y.includes(P));if(C.forEach(P=>h.delete(P)),f.current=u.filter(P=>{const A=zs(P);return A===x||C.includes(A)}),!d.size){if(l.current===!1)return;a(),r&&r()}};T=b.createElement(Bf,{key:zs(k),isPresent:!1,onExitComplete:M,custom:e,presenceAffectsLayout:i,mode:o},k),d.set(x,T)}c.splice(_,0,T)}),c=c.map(v=>{const x=v.key;return d.has(x)?v:b.createElement(Bf,{key:zs(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),b.createElement(b.Fragment,null,d.size?c:c.map(v=>b.cloneElement(v)))},zf=()=>{var l,u;const{user:t,signOut:e}=Yn(),n=ki(),[r,s]=b.useState(!1),i=b.useRef(null);b.useEffect(()=>{const c=d=>{i.current&&!i.current.contains(d.target)&&s(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const o=async()=>{await e(),n("/")},a=()=>{n("/editor/new")};return w.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"flex justify-between items-center h-16",children:[w.jsxs(nt,{to:"/dashboard",className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[w.jsx(qn,{className:"h-8 w-8 text-blue-600"}),w.jsx("span",{className:"text-xl font-bold text-gray-900",children:"DocCollab"})]}),w.jsx("div",{className:"flex-1 max-w-lg mx-8",children:w.jsxs("div",{className:"relative",children:[w.jsx(bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),w.jsx("input",{type:"text",placeholder:"Search documents...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onKeyDown:c=>{if(c.key==="Enter"){const d=c.currentTarget.value;d.trim()&&n(`/search?q=${encodeURIComponent(d)}`)}}})]})}),w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsxs("button",{onClick:a,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[w.jsx(Sp,{className:"h-4 w-4"}),w.jsx("span",{className:"hidden sm:inline",children:"New Document"})]}),w.jsxs("button",{className:"relative p-2 text-gray-600 hover:text-gray-900 transition-colors",children:[w.jsx(fD,{className:"h-5 w-5"}),w.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:"3"})]}),w.jsxs("div",{className:"relative",ref:i,children:[w.jsxs("button",{onClick:()=>s(!r),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[w.jsx("div",{className:"h-8 w-8 bg-blue-600 rounded-full flex items-center justify-center",children:w.jsx(X0,{className:"h-4 w-4 text-white"})}),w.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:inline",children:((l=t==null?void 0:t.user_metadata)==null?void 0:l.username)||((u=t==null?void 0:t.email)==null?void 0:u.split("@")[0])})]}),w.jsx(x_,{children:r&&w.jsxs(_o.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1",children:[w.jsxs(nt,{to:"/profile",className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>s(!1),children:[w.jsx(X0,{className:"h-4 w-4"}),w.jsx("span",{children:"Profile"})]}),w.jsxs("button",{onClick:o,className:"flex items-center space-x-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[w.jsx(_D,{className:"h-4 w-4"}),w.jsx("span",{children:"Sign Out"})]})]})})]})]})]})})})},Uf=({children:t,title:e,subtitle:n})=>w.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"max-w-md w-full space-y-8",children:[w.jsxs("div",{className:"text-center",children:[w.jsxs(nt,{to:"/",className:"inline-flex items-center space-x-2",children:[w.jsx(qn,{className:"h-12 w-12 text-blue-600"}),w.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"DocCollab"})]}),w.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:e}),w.jsx("p",{className:"mt-2 text-sm text-gray-600",children:n})]}),w.jsx("div",{className:"bg-white rounded-lg shadow-xl p-8",children:t})]})});var jl=t=>t.type==="checkbox",Ys=t=>t instanceof Date,Pt=t=>t==null;const w_=t=>typeof t=="object";var He=t=>!Pt(t)&&!Array.isArray(t)&&w_(t)&&!Ys(t),G2=t=>He(t)&&t.target?jl(t.target)?t.target.checked:t.target.value:t,Z2=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Y2=(t,e)=>t.has(Z2(e)),Q2=t=>{const e=t.constructor&&t.constructor.prototype;return He(e)&&e.hasOwnProperty("isPrototypeOf")},Ig=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function at(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Ig&&(t instanceof Blob||r))&&(n||He(t)))if(e=n?[]:{},!n&&!Q2(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=at(t[s]));else return t;return e}var Ad=t=>/^\w*$/.test(t),Fe=t=>t===void 0,Lg=t=>Array.isArray(t)?t.filter(Boolean):[],$g=t=>Lg(t.replace(/["|']|\]/g,"").split(/\.|\[/)),B=(t,e,n)=>{if(!e||!He(t))return n;const r=(Ad(e)?[e]:$g(e)).reduce((s,i)=>Pt(s)?s:s[i],t);return Fe(r)||r===t?Fe(t[e])?n:t[e]:r},Fn=t=>typeof t=="boolean",Se=(t,e,n)=>{let r=-1;const s=Ad(e)?[e]:$g(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=n;if(r!==o){const u=t[a];l=He(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const sx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Pn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},tr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},X2=ve.createContext(null);X2.displayName="HookFormContext";var eL=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==Pn.all&&(e._proxyFormState[o]=!r||Pn.all),t[o]}});return s};const tL=typeof window<"u"?b.useLayoutEffect:b.useEffect;var zn=t=>typeof t=="string",nL=(t,e,n,r,s)=>zn(t)?(r&&e.watch.add(t),B(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),B(n,i))):(r&&(e.watchAll=!0),n),k_=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Ra=t=>Array.isArray(t)?t:[t],ix=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},Lp=t=>Pt(t)||!w_(t);function Wr(t,e,n=new WeakSet){if(Lp(t)||Lp(e))return t===e;if(Ys(t)&&Ys(e))return t.getTime()===e.getTime();const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of r){const o=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=e[i];if(Ys(o)&&Ys(a)||He(o)&&He(a)||Array.isArray(o)&&Array.isArray(a)?!Wr(o,a,n):o!==a)return!1}}return!0}var Vt=t=>He(t)&&!Object.keys(t).length,Vg=t=>t.type==="file",On=t=>typeof t=="function",Oc=t=>{if(!Ig)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},b_=t=>t.type==="select-multiple",Fg=t=>t.type==="radio",rL=t=>Fg(t)||jl(t),Wf=t=>Oc(t)&&t.isConnected;function sL(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Fe(t)?r++:t[e[r++]];return t}function iL(t){for(const e in t)if(t.hasOwnProperty(e)&&!Fe(t[e]))return!1;return!0}function qe(t,e){const n=Array.isArray(e)?e:Ad(e)?[e]:$g(e),r=n.length===1?t:sL(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(He(r)&&Vt(r)||Array.isArray(r)&&iL(r))&&qe(t,n.slice(0,-1)),t}var S_=t=>{for(const e in t)if(On(t[e]))return!0;return!1};function Ac(t,e={}){const n=Array.isArray(t);if(He(t)||n)for(const r in t)Array.isArray(t[r])||He(t[r])&&!S_(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Ac(t[r],e[r])):Pt(t[r])||(e[r]=!0);return e}function __(t,e,n){const r=Array.isArray(t);if(He(t)||r)for(const s in t)Array.isArray(t[s])||He(t[s])&&!S_(t[s])?Fe(e)||Lp(n[s])?n[s]=Array.isArray(t[s])?Ac(t[s],[]):{...Ac(t[s])}:__(t[s],Pt(e)?{}:e[s],n[s]):n[s]=!Wr(t[s],e[s]);return n}var ta=(t,e)=>__(t,e,Ac(e));const ox={value:!1,isValid:!1},ax={value:!0,isValid:!0};var C_=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Fe(t[0].attributes.value)?Fe(t[0].value)||t[0].value===""?ax:{value:t[0].value,isValid:!0}:ax:ox}return ox},T_=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Fe(t)?t:e?t===""?NaN:t&&+t:n&&zn(t)?new Date(t):r?r(t):t;const lx={isValid:!1,value:null};var E_=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,lx):lx;function ux(t){const e=t.ref;return Vg(e)?e.files:Fg(e)?E_(t.refs).value:b_(e)?[...e.selectedOptions].map(({value:n})=>n):jl(e)?C_(t.refs).value:T_(Fe(e.value)?t.ref.value:e.value,t)}var oL=(t,e,n,r)=>{const s={};for(const i of t){const o=B(e,i);o&&Se(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Nc=t=>t instanceof RegExp,na=t=>Fe(t)?t:Nc(t)?t.source:He(t)?Nc(t.value)?t.value.source:t.value:t,cx=t=>({isOnSubmit:!t||t===Pn.onSubmit,isOnBlur:t===Pn.onBlur,isOnChange:t===Pn.onChange,isOnAll:t===Pn.all,isOnTouch:t===Pn.onTouched});const dx="AsyncFunction";var aL=t=>!!t&&!!t.validate&&!!(On(t.validate)&&t.validate.constructor.name===dx||He(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===dx)),lL=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),fx=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const ja=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=B(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(ja(a,e))break}else if(He(a)&&ja(a,e))break}}};function hx(t,e,n){const r=B(t,n);if(r||Ad(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=B(e,i),a=B(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:n}}var uL=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return Vt(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||Pn.all))},cL=(t,e,n)=>!t||!e||t===e||Ra(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),dL=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,fL=(t,e)=>!Lg(B(t,e)).length&&qe(t,e),hL=(t,e,n)=>{const r=Ra(B(t,n));return Se(r,"root",e[n]),Se(t,n,r),t},Lu=t=>zn(t);function px(t,e,n="validate"){if(Lu(t)||Array.isArray(t)&&t.every(Lu)||Fn(t)&&!t)return{type:n,message:Lu(t)?t:"",ref:e}}var Ni=t=>He(t)&&!Nc(t)?t:{value:t,message:""},mx=async(t,e,n,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:u,minLength:c,min:d,max:f,pattern:h,validate:p,name:m,valueAsNumber:y,mount:g}=t._f,v=B(n,m);if(!g||e.has(m))return{};const x=a?a[0]:o,k=J=>{s&&x.reportValidity&&(x.setCustomValidity(Fn(J)?"":J||""),x.reportValidity())},_={},T=Fg(o),M=jl(o),C=T||M,P=(y||Vg(o))&&Fe(o.value)&&Fe(v)||Oc(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,A=k_.bind(null,m,r,_),ee=(J,X,se,we=tr.maxLength,ie=tr.minLength)=>{const ke=J?X:se;_[m]={type:J?we:ie,message:ke,ref:o,...A(J?we:ie,ke)}};if(i?!Array.isArray(v)||!v.length:l&&(!C&&(P||Pt(v))||Fn(v)&&!v||M&&!C_(a).isValid||T&&!E_(a).isValid)){const{value:J,message:X}=Lu(l)?{value:!!l,message:l}:Ni(l);if(J&&(_[m]={type:tr.required,message:X,ref:x,...A(tr.required,X)},!r))return k(X),_}if(!P&&(!Pt(d)||!Pt(f))){let J,X;const se=Ni(f),we=Ni(d);if(!Pt(v)&&!isNaN(v)){const ie=o.valueAsNumber||v&&+v;Pt(se.value)||(J=ie>se.value),Pt(we.value)||(X=ie<we.value)}else{const ie=o.valueAsDate||new Date(v),ke=Y=>new Date(new Date().toDateString()+" "+Y),I=o.type=="time",W=o.type=="week";zn(se.value)&&v&&(J=I?ke(v)>ke(se.value):W?v>se.value:ie>new Date(se.value)),zn(we.value)&&v&&(X=I?ke(v)<ke(we.value):W?v<we.value:ie<new Date(we.value))}if((J||X)&&(ee(!!J,se.message,we.message,tr.max,tr.min),!r))return k(_[m].message),_}if((u||c)&&!P&&(zn(v)||i&&Array.isArray(v))){const J=Ni(u),X=Ni(c),se=!Pt(J.value)&&v.length>+J.value,we=!Pt(X.value)&&v.length<+X.value;if((se||we)&&(ee(se,J.message,X.message),!r))return k(_[m].message),_}if(h&&!P&&zn(v)){const{value:J,message:X}=Ni(h);if(Nc(J)&&!v.match(J)&&(_[m]={type:tr.pattern,message:X,ref:o,...A(tr.pattern,X)},!r))return k(X),_}if(p){if(On(p)){const J=await p(v,n),X=px(J,x);if(X&&(_[m]={...X,...A(tr.validate,X.message)},!r))return k(X.message),_}else if(He(p)){let J={};for(const X in p){if(!Vt(J)&&!r)break;const se=px(await p[X](v,n),x,X);se&&(J={...se,...A(X,se.message)},k(se.message),r&&(_[m]=J))}if(!Vt(J)&&(_[m]={ref:x,...J},!r))return _}}return k(!0),_};const pL={mode:Pn.onSubmit,reValidateMode:Pn.onChange,shouldFocusError:!0};function mL(t={}){let e={...pL,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:On(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=He(e.defaultValues)||He(e.values)?at(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:at(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...c};const f={array:ix(),state:ix()},h=e.criteriaMode===Pn.all,p=S=>E=>{clearTimeout(u),u=setTimeout(S,E)},m=async S=>{if(!e.disabled&&(c.isValid||d.isValid||S)){const E=e.resolver?Vt((await M()).errors):await P(r,!0);E!==n.isValid&&f.state.next({isValid:E})}},y=(S,E)=>{!e.disabled&&(c.isValidating||c.validatingFields||d.isValidating||d.validatingFields)&&((S||Array.from(a.mount)).forEach(O=>{O&&(E?Se(n.validatingFields,O,E):qe(n.validatingFields,O))}),f.state.next({validatingFields:n.validatingFields,isValidating:!Vt(n.validatingFields)}))},g=(S,E=[],O,F,L=!0,j=!0)=>{if(F&&O&&!e.disabled){if(o.action=!0,j&&Array.isArray(B(r,S))){const K=O(B(r,S),F.argA,F.argB);L&&Se(r,S,K)}if(j&&Array.isArray(B(n.errors,S))){const K=O(B(n.errors,S),F.argA,F.argB);L&&Se(n.errors,S,K),fL(n.errors,S)}if((c.touchedFields||d.touchedFields)&&j&&Array.isArray(B(n.touchedFields,S))){const K=O(B(n.touchedFields,S),F.argA,F.argB);L&&Se(n.touchedFields,S,K)}(c.dirtyFields||d.dirtyFields)&&(n.dirtyFields=ta(s,i)),f.state.next({name:S,isDirty:ee(S,E),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Se(i,S,E)},v=(S,E)=>{Se(n.errors,S,E),f.state.next({errors:n.errors})},x=S=>{n.errors=S,f.state.next({errors:n.errors,isValid:!1})},k=(S,E,O,F)=>{const L=B(r,S);if(L){const j=B(i,S,Fe(O)?B(s,S):O);Fe(j)||F&&F.defaultChecked||E?Se(i,S,E?j:ux(L._f)):se(S,j),o.mount&&m()}},_=(S,E,O,F,L)=>{let j=!1,K=!1;const me={name:S};if(!e.disabled){if(!O||F){(c.isDirty||d.isDirty)&&(K=n.isDirty,n.isDirty=me.isDirty=ee(),j=K!==me.isDirty);const Ce=Wr(B(s,S),E);K=!!B(n.dirtyFields,S),Ce?qe(n.dirtyFields,S):Se(n.dirtyFields,S,!0),me.dirtyFields=n.dirtyFields,j=j||(c.dirtyFields||d.dirtyFields)&&K!==!Ce}if(O){const Ce=B(n.touchedFields,S);Ce||(Se(n.touchedFields,S,O),me.touchedFields=n.touchedFields,j=j||(c.touchedFields||d.touchedFields)&&Ce!==O)}j&&L&&f.state.next(me)}return j?me:{}},T=(S,E,O,F)=>{const L=B(n.errors,S),j=(c.isValid||d.isValid)&&Fn(E)&&n.isValid!==E;if(e.delayError&&O?(l=p(()=>v(S,O)),l(e.delayError)):(clearTimeout(u),l=null,O?Se(n.errors,S,O):qe(n.errors,S)),(O?!Wr(L,O):L)||!Vt(F)||j){const K={...F,...j&&Fn(E)?{isValid:E}:{},errors:n.errors,name:S};n={...n,...K},f.state.next(K)}},M=async S=>{y(S,!0);const E=await e.resolver(i,e.context,oL(S||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return y(S),E},C=async S=>{const{errors:E}=await M(S);if(S)for(const O of S){const F=B(E,O);F?Se(n.errors,O,F):qe(n.errors,O)}else n.errors=E;return E},P=async(S,E,O={valid:!0})=>{for(const F in S){const L=S[F];if(L){const{_f:j,...K}=L;if(j){const me=a.array.has(j.name),Ce=L._f&&aL(L._f);Ce&&c.validatingFields&&y([F],!0);const an=await mx(L,a.disabled,i,h,e.shouldUseNativeValidation&&!E,me);if(Ce&&c.validatingFields&&y([F]),an[j.name]&&(O.valid=!1,E))break;!E&&(B(an,j.name)?me?hL(n.errors,an,j.name):Se(n.errors,j.name,an[j.name]):qe(n.errors,j.name))}!Vt(K)&&await P(K,E,O)}}return O.valid},A=()=>{for(const S of a.unMount){const E=B(r,S);E&&(E._f.refs?E._f.refs.every(O=>!Wf(O)):!Wf(E._f.ref))&&bn(S)}a.unMount=new Set},ee=(S,E)=>!e.disabled&&(S&&E&&Se(i,S,E),!Wr(Y(),s)),J=(S,E,O)=>nL(S,a,{...o.mount?i:Fe(E)?s:zn(S)?{[S]:E}:E},O,E),X=S=>Lg(B(o.mount?i:s,S,e.shouldUnregister?B(s,S,[]):[])),se=(S,E,O={})=>{const F=B(r,S);let L=E;if(F){const j=F._f;j&&(!j.disabled&&Se(i,S,T_(E,j)),L=Oc(j.ref)&&Pt(E)?"":E,b_(j.ref)?[...j.ref.options].forEach(K=>K.selected=L.includes(K.value)):j.refs?jl(j.ref)?j.refs.forEach(K=>{(!K.defaultChecked||!K.disabled)&&(Array.isArray(L)?K.checked=!!L.find(me=>me===K.value):K.checked=L===K.value||!!L)}):j.refs.forEach(K=>K.checked=K.value===L):Vg(j.ref)?j.ref.value="":(j.ref.value=L,j.ref.type||f.state.next({name:S,values:at(i)})))}(O.shouldDirty||O.shouldTouch)&&_(S,L,O.shouldTouch,O.shouldDirty,!0),O.shouldValidate&&W(S)},we=(S,E,O)=>{for(const F in E){if(!E.hasOwnProperty(F))return;const L=E[F],j=S+"."+F,K=B(r,j);(a.array.has(S)||He(L)||K&&!K._f)&&!Ys(L)?we(j,L,O):se(j,L,O)}},ie=(S,E,O={})=>{const F=B(r,S),L=a.array.has(S),j=at(E);Se(i,S,j),L?(f.array.next({name:S,values:at(i)}),(c.isDirty||c.dirtyFields||d.isDirty||d.dirtyFields)&&O.shouldDirty&&f.state.next({name:S,dirtyFields:ta(s,i),isDirty:ee(S,j)})):F&&!F._f&&!Pt(j)?we(S,j,O):se(S,j,O),fx(S,a)&&f.state.next({...n}),f.state.next({name:o.mount?S:void 0,values:at(i)})},ke=async S=>{o.mount=!0;const E=S.target;let O=E.name,F=!0;const L=B(r,O),j=Ce=>{F=Number.isNaN(Ce)||Ys(Ce)&&isNaN(Ce.getTime())||Wr(Ce,B(i,O,Ce))},K=cx(e.mode),me=cx(e.reValidateMode);if(L){let Ce,an;const Fl=E.type?ux(L._f):G2(S),Mr=S.type===sx.BLUR||S.type===sx.FOCUS_OUT,kT=!lL(L._f)&&!e.resolver&&!B(n.errors,O)&&!L._f.deps||dL(Mr,B(n.touchedFields,O),n.isSubmitted,me,K),Kd=fx(O,a,Mr);Se(i,O,Fl),Mr?(L._f.onBlur&&L._f.onBlur(S),l&&l(0)):L._f.onChange&&L._f.onChange(S);const Jd=_(O,Fl,Mr),bT=!Vt(Jd)||Kd;if(!Mr&&f.state.next({name:O,type:S.type,values:at(i)}),kT)return(c.isValid||d.isValid)&&(e.mode==="onBlur"?Mr&&m():Mr||m()),bT&&f.state.next({name:O,...Kd?{}:Jd});if(!Mr&&Kd&&f.state.next({...n}),e.resolver){const{errors:yy}=await M([O]);if(j(Fl),F){const ST=hx(n.errors,r,O),vy=hx(yy,r,ST.name||O);Ce=vy.error,O=vy.name,an=Vt(yy)}}else y([O],!0),Ce=(await mx(L,a.disabled,i,h,e.shouldUseNativeValidation))[O],y([O]),j(Fl),F&&(Ce?an=!1:(c.isValid||d.isValid)&&(an=await P(r,!0)));F&&(L._f.deps&&W(L._f.deps),T(O,an,Ce,Jd))}},I=(S,E)=>{if(B(n.errors,E)&&S.focus)return S.focus(),1},W=async(S,E={})=>{let O,F;const L=Ra(S);if(e.resolver){const j=await C(Fe(S)?S:L);O=Vt(j),F=S?!L.some(K=>B(j,K)):O}else S?(F=(await Promise.all(L.map(async j=>{const K=B(r,j);return await P(K&&K._f?{[j]:K}:K)}))).every(Boolean),!(!F&&!n.isValid)&&m()):F=O=await P(r);return f.state.next({...!zn(S)||(c.isValid||d.isValid)&&O!==n.isValid?{}:{name:S},...e.resolver||!S?{isValid:O}:{},errors:n.errors}),E.shouldFocus&&!F&&ja(r,I,S?L:a.mount),F},Y=S=>{const E={...o.mount?i:s};return Fe(S)?E:zn(S)?B(E,S):S.map(O=>B(E,O))},G=(S,E)=>({invalid:!!B((E||n).errors,S),isDirty:!!B((E||n).dirtyFields,S),error:B((E||n).errors,S),isValidating:!!B(n.validatingFields,S),isTouched:!!B((E||n).touchedFields,S)}),be=S=>{S&&Ra(S).forEach(E=>qe(n.errors,E)),f.state.next({errors:S?n.errors:{}})},Lt=(S,E,O)=>{const F=(B(r,S,{_f:{}})._f||{}).ref,L=B(n.errors,S)||{},{ref:j,message:K,type:me,...Ce}=L;Se(n.errors,S,{...Ce,...E,ref:F}),f.state.next({name:S,errors:n.errors,isValid:!1}),O&&O.shouldFocus&&F&&F.focus&&F.focus()},on=(S,E)=>On(S)?f.state.subscribe({next:O=>S(J(void 0,E),O)}):J(S,E,!0),Qn=S=>f.state.subscribe({next:E=>{cL(S.name,E.name,S.exact)&&uL(E,S.formState||c,wT,S.reRenderRoot)&&S.callback({values:{...i},...n,...E})}}).unsubscribe,Tt=S=>(o.mount=!0,d={...d,...S.formState},Qn({...S,formState:d})),bn=(S,E={})=>{for(const O of S?Ra(S):a.mount)a.mount.delete(O),a.array.delete(O),E.keepValue||(qe(r,O),qe(i,O)),!E.keepError&&qe(n.errors,O),!E.keepDirty&&qe(n.dirtyFields,O),!E.keepTouched&&qe(n.touchedFields,O),!E.keepIsValidating&&qe(n.validatingFields,O),!e.shouldUnregister&&!E.keepDefaultValue&&qe(s,O);f.state.next({values:at(i)}),f.state.next({...n,...E.keepDirty?{isDirty:ee()}:{}}),!E.keepIsValid&&m()},Vl=({disabled:S,name:E})=>{(Fn(S)&&o.mount||S||a.disabled.has(E))&&(S?a.disabled.add(E):a.disabled.delete(E))},Rs=(S,E={})=>{let O=B(r,S);const F=Fn(E.disabled)||Fn(e.disabled);return Se(r,S,{...O||{},_f:{...O&&O._f?O._f:{ref:{name:S}},name:S,mount:!0,...E}}),a.mount.add(S),O?Vl({disabled:Fn(E.disabled)?E.disabled:e.disabled,name:S}):k(S,!0,E.value),{...F?{disabled:E.disabled||e.disabled}:{},...e.progressive?{required:!!E.required,min:na(E.min),max:na(E.max),minLength:na(E.minLength),maxLength:na(E.maxLength),pattern:na(E.pattern)}:{},name:S,onChange:ke,onBlur:ke,ref:L=>{if(L){Rs(S,E),O=B(r,S);const j=Fe(L.value)&&L.querySelectorAll&&L.querySelectorAll("input,select,textarea")[0]||L,K=rL(j),me=O._f.refs||[];if(K?me.find(Ce=>Ce===j):j===O._f.ref)return;Se(r,S,{_f:{...O._f,...K?{refs:[...me.filter(Wf),j,...Array.isArray(B(s,S))?[{}]:[]],ref:{type:j.type,name:S}}:{ref:j}}}),k(S,!1,void 0,j)}else O=B(r,S,{}),O._f&&(O._f.mount=!1),(e.shouldUnregister||E.shouldUnregister)&&!(Y2(a.array,S)&&o.action)&&a.unMount.add(S)}}},Er=()=>e.shouldFocusError&&ja(r,I,a.mount),Xn=S=>{Fn(S)&&(f.state.next({disabled:S}),ja(r,(E,O)=>{const F=B(r,O);F&&(E.disabled=F._f.disabled||S,Array.isArray(F._f.refs)&&F._f.refs.forEach(L=>{L.disabled=F._f.disabled||S}))},0,!1))},qd=(S,E)=>async O=>{let F;O&&(O.preventDefault&&O.preventDefault(),O.persist&&O.persist());let L=at(i);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:j,values:K}=await M();n.errors=j,L=at(K)}else await P(r);if(a.disabled.size)for(const j of a.disabled)qe(L,j);if(qe(n.errors,"root"),Vt(n.errors)){f.state.next({errors:{}});try{await S(L,O)}catch(j){F=j}}else E&&await E({...n.errors},O),Er(),setTimeout(Er);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Vt(n.errors)&&!F,submitCount:n.submitCount+1,errors:n.errors}),F)throw F},vT=(S,E={})=>{B(r,S)&&(Fe(E.defaultValue)?ie(S,at(B(s,S))):(ie(S,E.defaultValue),Se(s,S,at(E.defaultValue))),E.keepTouched||qe(n.touchedFields,S),E.keepDirty||(qe(n.dirtyFields,S),n.isDirty=E.defaultValue?ee(S,at(B(s,S))):ee()),E.keepError||(qe(n.errors,S),c.isValid&&m()),f.state.next({...n}))},py=(S,E={})=>{const O=S?at(S):s,F=at(O),L=Vt(S),j=L?s:F;if(E.keepDefaultValues||(s=O),!E.keepValues){if(E.keepDirtyValues){const K=new Set([...a.mount,...Object.keys(ta(s,i))]);for(const me of Array.from(K))B(n.dirtyFields,me)?Se(j,me,B(i,me)):ie(me,B(j,me))}else{if(Ig&&Fe(S))for(const K of a.mount){const me=B(r,K);if(me&&me._f){const Ce=Array.isArray(me._f.refs)?me._f.refs[0]:me._f.ref;if(Oc(Ce)){const an=Ce.closest("form");if(an){an.reset();break}}}}for(const K of a.mount){const me=B(j,K,B(s,K));Fe(me)||(Se(j,K,me),ie(K,B(j,K)))}}i=at(j),f.array.next({values:{...j}}),f.state.next({values:{...j}})}a={mount:E.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!c.isValid||!!E.keepIsValid||!!E.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:E.keepSubmitCount?n.submitCount:0,isDirty:L?!1:E.keepDirty?n.isDirty:!!(E.keepDefaultValues&&!Wr(S,s)),isSubmitted:E.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:L?{}:E.keepDirtyValues?E.keepDefaultValues&&i?ta(s,i):n.dirtyFields:E.keepDefaultValues&&S?ta(s,S):E.keepDirty?n.dirtyFields:{},touchedFields:E.keepTouched?n.touchedFields:{},errors:E.keepErrors?n.errors:{},isSubmitSuccessful:E.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},my=(S,E)=>py(On(S)?S(i):S,E),xT=(S,E={})=>{const O=B(r,S),F=O&&O._f;if(F){const L=F.refs?F.refs[0]:F.ref;L.focus&&(L.focus(),E.shouldSelect&&On(L.select)&&L.select())}},wT=S=>{n={...n,...S}},gy={control:{register:Rs,unregister:bn,getFieldState:G,handleSubmit:qd,setError:Lt,_subscribe:Qn,_runSchema:M,_focusError:Er,_getWatch:J,_getDirty:ee,_setValid:m,_setFieldArray:g,_setDisabledField:Vl,_setErrors:x,_getFieldArray:X,_reset:py,_resetDefaultValues:()=>On(e.defaultValues)&&e.defaultValues().then(S=>{my(S,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:A,_disableForm:Xn,_subjects:f,_proxyFormState:c,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(S){o=S},get _defaultValues(){return s},get _names(){return a},set _names(S){a=S},get _formState(){return n},get _options(){return e},set _options(S){e={...e,...S}}},subscribe:Tt,trigger:W,register:Rs,handleSubmit:qd,watch:on,setValue:ie,getValues:Y,reset:my,resetField:vT,clearErrors:be,unregister:bn,setError:Lt,setFocus:xT,getFieldState:G};return{...gy,formControl:gy}}function Bg(t={}){const e=ve.useRef(void 0),n=ve.useRef(void 0),[r,s]=ve.useState({isDirty:!1,isValidating:!1,isLoading:On(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:On(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!On(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=mL(t);e.current={...a,formState:r}}const i=e.current.control;return i._options=t,tL(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),ve.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),ve.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),ve.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),ve.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),ve.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),ve.useEffect(()=>{t.values&&!Wr(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),ve.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=eL(r,i),e.current}const gx=(t,e,n)=>{if(t&&"reportValidity"in t){const r=B(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},M_=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?gx(r.ref,n,t):r.refs&&r.refs.forEach(s=>gx(s,n,t))}},gL=(t,e)=>{e.shouldUseNativeValidation&&M_(t,e);const n={};for(const r in t){const s=B(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(yL(e.names||Object.keys(t),r)){const o=Object.assign({},B(n,r));Se(o,"root",i),Se(n,r,o)}else Se(n,r,i)}return n},yL=(t,e)=>t.some(n=>n.startsWith(e+"."));var vL=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(c){return c.errors.forEach(function(d){return t.push(d)})}),e){var l=n[o].types,u=l&&l[r.code];n[o]=k_(o,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},zg=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return i.shouldUseNativeValidation&&M_({},i),{errors:{},values:n.raw?r:u}})}catch(u){return a(u)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:gL(vL(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},ge;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ge||(ge={}));var yx;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(yx||(yx={}));const H=ge.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Lr=t=>{switch(typeof t){case"undefined":return H.undefined;case"string":return H.string;case"number":return Number.isNaN(t)?H.nan:H.number;case"boolean":return H.boolean;case"function":return H.function;case"bigint":return H.bigint;case"symbol":return H.symbol;case"object":return Array.isArray(t)?H.array:t===null?H.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?H.promise:typeof Map<"u"&&t instanceof Map?H.map:typeof Set<"u"&&t instanceof Set?H.set:typeof Date<"u"&&t instanceof Date?H.date:H.object;default:return H.unknown}},R=ge.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class _r extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return s(this),r}static assert(e){if(!(e instanceof _r))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ge.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}_r.create=t=>new _r(t);const $p=(t,e)=>{let n;switch(t.code){case R.invalid_type:t.received===H.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case R.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ge.jsonStringifyReplacer)}`;break;case R.unrecognized_keys:n=`Unrecognized key(s) in object: ${ge.joinValues(t.keys,", ")}`;break;case R.invalid_union:n="Invalid input";break;case R.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ge.joinValues(t.options)}`;break;case R.invalid_enum_value:n=`Invalid enum value. Expected ${ge.joinValues(t.options)}, received '${t.received}'`;break;case R.invalid_arguments:n="Invalid function arguments";break;case R.invalid_return_type:n="Invalid function return type";break;case R.invalid_date:n="Invalid date";break;case R.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ge.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case R.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case R.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case R.custom:n="Invalid input";break;case R.invalid_intersection_types:n="Intersection results could not be merged";break;case R.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case R.not_finite:n="Number must be finite";break;default:n=e.defaultError,ge.assertNever(t)}return{message:n}};let xL=$p;function wL(){return xL}const kL=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function V(t,e){const n=wL(),r=kL({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===$p?void 0:$p].filter(s=>!!s)});t.common.issues.push(r)}class nn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return te;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return nn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return te;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const te=Object.freeze({status:"aborted"}),fa=t=>({status:"dirty",value:t}),kn=t=>({status:"valid",value:t}),vx=t=>t.status==="aborted",xx=t=>t.status==="dirty",Co=t=>t.status==="valid",Dc=t=>typeof Promise<"u"&&t instanceof Promise;var q;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(q||(q={}));class ws{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wx=(t,e)=>{if(Co(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new _r(t.common.issues);return this._error=n,this._error}}};function ue(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:s}}class pe{get description(){return this._def.description}_getType(e){return Lr(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Lr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new nn,ctx:{common:e.parent.common,data:e.data,parsedType:Lr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Dc(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lr(e)},s=this._parseSync({data:e,path:r.path,parent:r});return wx(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lr(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Co(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Co(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lr(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Dc(s)?s:Promise.resolve(s));return wx(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:R.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Eo({schema:this,typeName:ne.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ds.create(this,this._def)}nullable(){return Mo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jn.create(this)}promise(){return Lc.create(this,this._def)}or(e){return jc.create([this,e],this._def)}and(e){return Ic.create(this,e,this._def)}transform(e){return new Eo({...ue(this._def),schema:this,typeName:ne.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Fp({...ue(this._def),innerType:this,defaultValue:n,typeName:ne.ZodDefault})}brand(){return new WL({typeName:ne.ZodBranded,type:this,...ue(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Bp({...ue(this._def),innerType:this,catchValue:n,typeName:ne.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Ug.create(this,e)}readonly(){return zp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const bL=/^c[^\s-]{8,}$/i,SL=/^[0-9a-z]+$/,_L=/^[0-9A-HJKMNP-TV-Z]{26}$/i,CL=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,TL=/^[a-z0-9_-]{21}$/i,EL=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ML=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,PL=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,OL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Hf;const AL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,NL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,DL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,RL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,jL=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,IL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,P_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",LL=new RegExp(`^${P_}$`);function O_(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function $L(t){return new RegExp(`^${O_(t)}$`)}function VL(t){let e=`${P_}T${O_(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function FL(t,e){return!!((e==="v4"||!e)&&AL.test(t)||(e==="v6"||!e)&&DL.test(t))}function BL(t,e){if(!EL.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function zL(t,e){return!!((e==="v4"||!e)&&NL.test(t)||(e==="v6"||!e)&&RL.test(t))}class Zr extends pe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==H.string){const i=this._getOrReturnCtx(e);return V(i,{code:R.invalid_type,expected:H.string,received:i.parsedType}),te}const r=new nn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:R.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:R.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?V(s,{code:R.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&V(s,{code:R.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")PL.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"email",code:R.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Hf||(Hf=new RegExp(OL,"u")),Hf.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"emoji",code:R.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")CL.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"uuid",code:R.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")TL.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"nanoid",code:R.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")bL.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"cuid",code:R.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")SL.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"cuid2",code:R.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")_L.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"ulid",code:R.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),V(s,{validation:"url",code:R.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"regex",code:R.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),V(s,{code:R.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),V(s,{code:R.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),V(s,{code:R.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?VL(i).test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:R.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?LL.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:R.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?$L(i).test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:R.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?ML.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"duration",code:R.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?FL(e.data,i.version)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"ip",code:R.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?BL(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"jwt",code:R.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?zL(e.data,i.version)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"cidr",code:R.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?jL.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"base64",code:R.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?IL.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"base64url",code:R.invalid_string,message:i.message}),r.dirty()):ge.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:R.invalid_string,...q.errToObj(r)})}_addCheck(e){return new Zr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...q.errToObj(e)})}url(e){return this._addCheck({kind:"url",...q.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...q.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...q.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...q.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...q.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...q.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...q.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...q.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...q.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...q.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...q.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...q.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...q.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...q.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...q.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...q.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...q.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...q.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...q.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...q.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...q.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...q.errToObj(n)})}nonempty(e){return this.min(1,q.errToObj(e))}trim(){return new Zr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Zr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Zr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Zr.create=t=>new Zr({checks:[],typeName:ne.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...ue(t)});function UL(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class ul extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==H.number){const i=this._getOrReturnCtx(e);return V(i,{code:R.invalid_type,expected:H.number,received:i.parsedType}),te}let r;const s=new nn;for(const i of this._def.checks)i.kind==="int"?ge.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),V(r,{code:R.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:R.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:R.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?UL(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),V(r,{code:R.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),V(r,{code:R.not_finite,message:i.message}),s.dirty()):ge.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,q.toString(n))}gt(e,n){return this.setLimit("min",e,!1,q.toString(n))}lte(e,n){return this.setLimit("max",e,!0,q.toString(n))}lt(e,n){return this.setLimit("max",e,!1,q.toString(n))}setLimit(e,n,r,s){return new ul({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:q.toString(s)}]})}_addCheck(e){return new ul({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:q.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:q.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:q.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:q.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:q.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:q.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ge.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ul.create=t=>new ul({checks:[],typeName:ne.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ue(t)});class cl extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==H.bigint)return this._getInvalidInput(e);let r;const s=new nn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:R.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:R.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),V(r,{code:R.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ge.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return V(n,{code:R.invalid_type,expected:H.bigint,received:n.parsedType}),te}gte(e,n){return this.setLimit("min",e,!0,q.toString(n))}gt(e,n){return this.setLimit("min",e,!1,q.toString(n))}lte(e,n){return this.setLimit("max",e,!0,q.toString(n))}lt(e,n){return this.setLimit("max",e,!1,q.toString(n))}setLimit(e,n,r,s){return new cl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:q.toString(s)}]})}_addCheck(e){return new cl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:q.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:q.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}cl.create=t=>new cl({checks:[],typeName:ne.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...ue(t)});class kx extends pe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==H.boolean){const r=this._getOrReturnCtx(e);return V(r,{code:R.invalid_type,expected:H.boolean,received:r.parsedType}),te}return kn(e.data)}}kx.create=t=>new kx({typeName:ne.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ue(t)});class Rc extends pe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==H.date){const i=this._getOrReturnCtx(e);return V(i,{code:R.invalid_type,expected:H.date,received:i.parsedType}),te}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return V(i,{code:R.invalid_date}),te}const r=new nn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:R.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:R.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ge.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Rc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:q.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:q.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Rc.create=t=>new Rc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ne.ZodDate,...ue(t)});class bx extends pe{_parse(e){if(this._getType(e)!==H.symbol){const r=this._getOrReturnCtx(e);return V(r,{code:R.invalid_type,expected:H.symbol,received:r.parsedType}),te}return kn(e.data)}}bx.create=t=>new bx({typeName:ne.ZodSymbol,...ue(t)});class Sx extends pe{_parse(e){if(this._getType(e)!==H.undefined){const r=this._getOrReturnCtx(e);return V(r,{code:R.invalid_type,expected:H.undefined,received:r.parsedType}),te}return kn(e.data)}}Sx.create=t=>new Sx({typeName:ne.ZodUndefined,...ue(t)});class _x extends pe{_parse(e){if(this._getType(e)!==H.null){const r=this._getOrReturnCtx(e);return V(r,{code:R.invalid_type,expected:H.null,received:r.parsedType}),te}return kn(e.data)}}_x.create=t=>new _x({typeName:ne.ZodNull,...ue(t)});class Cx extends pe{constructor(){super(...arguments),this._any=!0}_parse(e){return kn(e.data)}}Cx.create=t=>new Cx({typeName:ne.ZodAny,...ue(t)});class Tx extends pe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return kn(e.data)}}Tx.create=t=>new Tx({typeName:ne.ZodUnknown,...ue(t)});class ks extends pe{_parse(e){const n=this._getOrReturnCtx(e);return V(n,{code:R.invalid_type,expected:H.never,received:n.parsedType}),te}}ks.create=t=>new ks({typeName:ne.ZodNever,...ue(t)});class Ex extends pe{_parse(e){if(this._getType(e)!==H.undefined){const r=this._getOrReturnCtx(e);return V(r,{code:R.invalid_type,expected:H.void,received:r.parsedType}),te}return kn(e.data)}}Ex.create=t=>new Ex({typeName:ne.ZodVoid,...ue(t)});class Jn extends pe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==H.array)return V(n,{code:R.invalid_type,expected:H.array,received:n.parsedType}),te;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(V(n,{code:o?R.too_big:R.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(V(n,{code:R.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(V(n,{code:R.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new ws(n,o,n.path,a)))).then(o=>nn.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new ws(n,o,n.path,a)));return nn.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Jn({...this._def,minLength:{value:e,message:q.toString(n)}})}max(e,n){return new Jn({...this._def,maxLength:{value:e,message:q.toString(n)}})}length(e,n){return new Jn({...this._def,exactLength:{value:e,message:q.toString(n)}})}nonempty(e){return this.min(1,e)}}Jn.create=(t,e)=>new Jn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ne.ZodArray,...ue(e)});function Li(t){if(t instanceof Le){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ds.create(Li(r))}return new Le({...t._def,shape:()=>e})}else return t instanceof Jn?new Jn({...t._def,type:Li(t.element)}):t instanceof ds?ds.create(Li(t.unwrap())):t instanceof Mo?Mo.create(Li(t.unwrap())):t instanceof pi?pi.create(t.items.map(e=>Li(e))):t}class Le extends pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ge.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==H.object){const u=this._getOrReturnCtx(e);return V(u,{code:R.invalid_type,expected:H.object,received:u.parsedType}),te}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ks&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=i[u],d=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new ws(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof ks){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(u==="strict")a.length>0&&(V(s,{code:R.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new ws(s,d,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,f=await c.value;u.push({key:d,value:f,alwaysSet:c.alwaysSet})}return u}).then(u=>nn.mergeObjectSync(r,u)):nn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return q.errToObj,new Le({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:q.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Le({...this._def,unknownKeys:"strip"})}passthrough(){return new Le({...this._def,unknownKeys:"passthrough"})}extend(e){return new Le({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Le({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ne.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Le({...this._def,catchall:e})}pick(e){const n={};for(const r of ge.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Le({...this._def,shape:()=>n})}omit(e){const n={};for(const r of ge.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Le({...this._def,shape:()=>n})}deepPartial(){return Li(this)}partial(e){const n={};for(const r of ge.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new Le({...this._def,shape:()=>n})}required(e){const n={};for(const r of ge.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ds;)i=i._def.innerType;n[r]=i}return new Le({...this._def,shape:()=>n})}keyof(){return A_(ge.objectKeys(this.shape))}}Le.create=(t,e)=>new Le({shape:()=>t,unknownKeys:"strip",catchall:ks.create(),typeName:ne.ZodObject,...ue(e)});Le.strictCreate=(t,e)=>new Le({shape:()=>t,unknownKeys:"strict",catchall:ks.create(),typeName:ne.ZodObject,...ue(e)});Le.lazycreate=(t,e)=>new Le({shape:t,unknownKeys:"strip",catchall:ks.create(),typeName:ne.ZodObject,...ue(e)});class jc extends pe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new _r(a.ctx.common.issues));return V(n,{code:R.invalid_union,unionErrors:o}),te}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!i&&(i={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new _r(l));return V(n,{code:R.invalid_union,unionErrors:a}),te}}get options(){return this._def.options}}jc.create=(t,e)=>new jc({options:t,typeName:ne.ZodUnion,...ue(e)});function Vp(t,e){const n=Lr(t),r=Lr(e);if(t===e)return{valid:!0,data:t};if(n===H.object&&r===H.object){const s=ge.objectKeys(e),i=ge.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=Vp(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===H.array&&r===H.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=Vp(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===H.date&&r===H.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ic extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(vx(i)||vx(o))return te;const a=Vp(i.value,o.value);return a.valid?((xx(i)||xx(o))&&n.dirty(),{status:n.value,value:a.data}):(V(r,{code:R.invalid_intersection_types}),te)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ic.create=(t,e,n)=>new Ic({left:t,right:e,typeName:ne.ZodIntersection,...ue(n)});class pi extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==H.array)return V(r,{code:R.invalid_type,expected:H.array,received:r.parsedType}),te;if(r.data.length<this._def.items.length)return V(r,{code:R.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),te;!this._def.rest&&r.data.length>this._def.items.length&&(V(r,{code:R.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new ws(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>nn.mergeArray(n,o)):nn.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new pi({...this._def,rest:e})}}pi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pi({items:t,typeName:ne.ZodTuple,rest:null,...ue(e)})};class Mx extends pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==H.map)return V(r,{code:R.invalid_type,expected:H.map,received:r.parsedType}),te;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],u)=>({key:s._parse(new ws(r,a,r.path,[u,"key"])),value:i._parse(new ws(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return te;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return te;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}Mx.create=(t,e,n)=>new Mx({valueType:e,keyType:t,typeName:ne.ZodMap,...ue(n)});class dl extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==H.set)return V(r,{code:R.invalid_type,expected:H.set,received:r.parsedType}),te;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(V(r,{code:R.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(V(r,{code:R.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return te;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((l,u)=>i._parse(new ws(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new dl({...this._def,minSize:{value:e,message:q.toString(n)}})}max(e,n){return new dl({...this._def,maxSize:{value:e,message:q.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}dl.create=(t,e)=>new dl({valueType:t,minSize:null,maxSize:null,typeName:ne.ZodSet,...ue(e)});class Px extends pe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Px.create=(t,e)=>new Px({getter:t,typeName:ne.ZodLazy,...ue(e)});class Ox extends pe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return V(n,{received:n.data,code:R.invalid_literal,expected:this._def.value}),te}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ox.create=(t,e)=>new Ox({value:t,typeName:ne.ZodLiteral,...ue(e)});function A_(t,e){return new To({values:t,typeName:ne.ZodEnum,...ue(e)})}class To extends pe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return V(n,{expected:ge.joinValues(r),received:n.parsedType,code:R.invalid_type}),te}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return V(n,{received:n.data,code:R.invalid_enum_value,options:r}),te}return kn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return To.create(e,{...this._def,...n})}exclude(e,n=this._def){return To.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}To.create=A_;class Ax extends pe{_parse(e){const n=ge.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==H.string&&r.parsedType!==H.number){const s=ge.objectValues(n);return V(r,{expected:ge.joinValues(s),received:r.parsedType,code:R.invalid_type}),te}if(this._cache||(this._cache=new Set(ge.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=ge.objectValues(n);return V(r,{received:r.data,code:R.invalid_enum_value,options:s}),te}return kn(e.data)}get enum(){return this._def.values}}Ax.create=(t,e)=>new Ax({values:t,typeName:ne.ZodNativeEnum,...ue(e)});class Lc extends pe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==H.promise&&n.common.async===!1)return V(n,{code:R.invalid_type,expected:H.promise,received:n.parsedType}),te;const r=n.parsedType===H.promise?n.data:Promise.resolve(n.data);return kn(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Lc.create=(t,e)=>new Lc({type:t,typeName:ne.ZodPromise,...ue(e)});class Eo extends pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ne.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{V(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return te;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?te:l.status==="dirty"||n.value==="dirty"?fa(l.value):l});{if(n.value==="aborted")return te;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?te:a.status==="dirty"||n.value==="dirty"?fa(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?te:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?te:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Co(o))return te;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Co(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):te);ge.assertNever(s)}}Eo.create=(t,e,n)=>new Eo({schema:t,typeName:ne.ZodEffects,effect:e,...ue(n)});Eo.createWithPreprocess=(t,e,n)=>new Eo({schema:e,effect:{type:"preprocess",transform:t},typeName:ne.ZodEffects,...ue(n)});class ds extends pe{_parse(e){return this._getType(e)===H.undefined?kn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ds.create=(t,e)=>new ds({innerType:t,typeName:ne.ZodOptional,...ue(e)});class Mo extends pe{_parse(e){return this._getType(e)===H.null?kn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Mo.create=(t,e)=>new Mo({innerType:t,typeName:ne.ZodNullable,...ue(e)});class Fp extends pe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===H.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Fp.create=(t,e)=>new Fp({innerType:t,typeName:ne.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ue(e)});class Bp extends pe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Dc(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new _r(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new _r(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Bp.create=(t,e)=>new Bp({innerType:t,typeName:ne.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ue(e)});class Nx extends pe{_parse(e){if(this._getType(e)!==H.nan){const r=this._getOrReturnCtx(e);return V(r,{code:R.invalid_type,expected:H.nan,received:r.parsedType}),te}return{status:"valid",value:e.data}}}Nx.create=t=>new Nx({typeName:ne.ZodNaN,...ue(t)});class WL extends pe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Ug extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?te:i.status==="dirty"?(n.dirty(),fa(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?te:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Ug({in:e,out:n,typeName:ne.ZodPipeline})}}class zp extends pe{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Co(s)&&(s.value=Object.freeze(s.value)),s);return Dc(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}zp.create=(t,e)=>new zp({innerType:t,typeName:ne.ZodReadonly,...ue(e)});Le.lazycreate;var ne;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ne||(ne={}));const Hr=Zr.create;ks.create;Jn.create;const Wg=Le.create;Le.strictCreate;jc.create;Ic.create;pi.create;To.create;Lc.create;ds.create;Mo.create;const HL=Wg({email:Hr().email("Please enter a valid email address"),username:Hr().min(3,"Username must be at least 3 characters").max(20,"Username must be less than 20 characters"),fullName:Hr().optional(),password:Hr().min(8,"Password must be at least 8 characters"),confirmPassword:Hr()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),qL=()=>{const{signUp:t}=Yn(),e=ki(),[n,r]=b.useState(!1),[s,i]=b.useState(!1),[o,a]=b.useState(!1),{register:l,handleSubmit:u,formState:{errors:c}}=Bg({resolver:zg(HL)}),d=async f=>{a(!0);try{await t(f.email,f.password,f.username,f.fullName),e("/auth/signin")}catch(h){fe.error(h.message||"Failed to create account")}finally{a(!1)}};return w.jsxs("form",{onSubmit:u(d),className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),w.jsx("input",{...l("email"),type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"you@example.com"}),c.email&&w.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.email.message})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),w.jsx("input",{...l("username"),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"johndoe"}),c.username&&w.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.username.message})]}),w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",w.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),w.jsx("input",{...l("fullName"),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"John Doe"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{...l("password"),type:n?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"••••••••"}),w.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?w.jsx(xc,{className:"h-4 w-4"}):w.jsx(wc,{className:"h-4 w-4"})})]}),c.password&&w.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.password.message})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{...l("confirmPassword"),type:s?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"••••••••"}),w.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?w.jsx(xc,{className:"h-4 w-4"}):w.jsx(wc,{className:"h-4 w-4"})})]}),c.confirmPassword&&w.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.confirmPassword.message})]}),w.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:o?w.jsxs(w.Fragment,{children:[w.jsx(pg,{className:"animate-spin h-4 w-4 mr-2"}),"Creating Account..."]}):"Create Account"}),w.jsx("div",{className:"text-center",children:w.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",w.jsx(nt,{to:"/auth/signin",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})]})})]})},KL=Wg({email:Hr().email("Please enter a valid email address"),password:Hr().min(1,"Password is required")}),JL=()=>{const{signIn:t}=Yn(),e=ki(),[n,r]=b.useState(!1),[s,i]=b.useState(!1),{register:o,handleSubmit:a,formState:{errors:l}}=Bg({resolver:zg(KL)}),u=async c=>{i(!0);try{await t(c.email,c.password),e("/dashboard")}catch(d){fe.error(d.message||"Failed to sign in")}finally{i(!1)}};return w.jsxs("form",{onSubmit:a(u),className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),w.jsx("input",{...o("email"),type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"you@example.com"}),l.email&&w.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.email.message})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{...o("password"),type:n?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"••••••••"}),w.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?w.jsx(xc,{className:"h-4 w-4"}):w.jsx(wc,{className:"h-4 w-4"})})]}),l.password&&w.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.password.message})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),w.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),w.jsx(nt,{to:"/auth/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot password?"})]}),w.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:s?w.jsxs(w.Fragment,{children:[w.jsx(pg,{className:"animate-spin h-4 w-4 mr-2"}),"Signing In..."]}):"Sign In"}),w.jsx("div",{className:"text-center",children:w.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",w.jsx(nt,{to:"/auth/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up"})]})})]})},GL=Wg({email:Hr().email("Please enter a valid email address")}),ZL=()=>{const{resetPassword:t}=Yn(),[e,n]=b.useState(!1),[r,s]=b.useState(!1),{register:i,handleSubmit:o,formState:{errors:a},getValues:l}=Bg({resolver:zg(GL)}),u=async c=>{n(!0);try{await t(c.email),s(!0)}catch(d){fe.error(d.message||"Failed to send reset email")}finally{n(!1)}};return r?w.jsxs("div",{className:"text-center space-y-4",children:[w.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:w.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),w.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Check your email"}),w.jsxs("p",{className:"text-sm text-gray-600",children:["We've sent a password reset link to ",w.jsx("span",{className:"font-medium",children:l("email")})]}),w.jsxs(nt,{to:"/auth/signin",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium",children:[w.jsx(vc,{className:"h-4 w-4"}),w.jsx("span",{children:"Back to sign in"})]})]}):w.jsxs("form",{onSubmit:o(u),className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),w.jsx("input",{...i("email"),type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"you@example.com"}),a.email&&w.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email.message})]}),w.jsx("button",{type:"submit",disabled:e,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:e?w.jsxs(w.Fragment,{children:[w.jsx(pg,{className:"animate-spin h-4 w-4 mr-2"}),"Sending Reset Link..."]}):"Send Reset Link"}),w.jsx("div",{className:"text-center",children:w.jsxs(nt,{to:"/auth/signin",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium",children:[w.jsx(vc,{className:"h-4 w-4"}),w.jsx("span",{children:"Back to sign in"})]})})]})},qf=({children:t})=>{const{user:e,loading:n}=Yn();return n?w.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),w.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e?w.jsx(w.Fragment,{children:t}):w.jsx(ji,{to:"/auth/signin",replace:!0})},YL=()=>{const t=[{icon:qn,title:"Rich Document Editor",description:"Create beautiful documents with our powerful WYSIWYG editor featuring real-time collaboration."},{icon:Zb,title:"Team Collaboration",description:"Mention team members, share documents, and collaborate in real-time with advanced permission controls."},{icon:OD,title:"Privacy & Security",description:"Keep your documents private or make them public. Full control over who can view and edit your content."},{icon:Gb,title:"Version History",description:"Never lose your work. Track all changes with complete version history and restore previous versions."},{icon:bd,title:"Powerful Search",description:"Find any document instantly with full-text search across titles and content."},{icon:DD,title:"Auto-Save",description:"Focus on writing while we automatically save your work. Never worry about losing changes again."}];return w.jsxs("div",{className:"min-h-screen bg-white",children:[w.jsx("header",{className:"bg-white border-b border-gray-200",children:w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"flex justify-between items-center h-16",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx(qn,{className:"h-8 w-8 text-blue-600"}),w.jsx("span",{className:"text-xl font-bold text-gray-900",children:"DocCollab"})]}),w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsx(nt,{to:"/auth/signin",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Sign In"}),w.jsx(nt,{to:"/auth/signup",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Get Started"})]})]})})}),w.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[w.jsxs("h1",{className:"text-5xl font-bold text-gray-900 mb-6",children:["Collaborate on documents"," ",w.jsx("span",{className:"text-blue-600",children:"like never before"})]}),w.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Create, edit, and share documents with your team. Real-time collaboration, powerful editing tools, and secure sharing all in one platform."}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[w.jsx(nt,{to:"/auth/signup",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Start Writing for Free"}),w.jsx(nt,{to:"/auth/signin",className:"border border-gray-300 text-gray-700 px-8 py-3 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Sign In"})]})]})}),w.jsx("section",{className:"py-20 bg-gray-50",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[w.jsxs("div",{className:"text-center mb-16",children:[w.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Everything you need to collaborate"}),w.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"DocCollab provides all the tools your team needs to create, share, and collaborate on documents effectively."})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((e,n)=>w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[w.jsx(e.icon,{className:"h-8 w-8 text-blue-600 mb-4"}),w.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),w.jsx("p",{className:"text-gray-600",children:e.description})]},n))})]})}),w.jsx("section",{className:"py-20 bg-blue-600",children:w.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[w.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to start collaborating?"}),w.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Join thousands of teams already using DocCollab to create amazing documents together."}),w.jsx(nt,{to:"/auth/signup",className:"bg-white text-blue-600 px-8 py-3 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Get Started Free"})]})}),w.jsx("footer",{className:"bg-gray-900 text-white py-12",children:w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx(qn,{className:"h-6 w-6"}),w.jsx("span",{className:"text-lg font-bold",children:"DocCollab"})]}),w.jsx("p",{className:"text-gray-400 text-sm",children:"© 2024 DocCollab. All rights reserved."})]})})})]})};function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}function In(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function bt(t){In(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Up(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var QL={};function XL(){return QL}function Dx(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function $u(t,e){In(2,arguments);var n=bt(t),r=bt(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function e$(t,e){In(2,arguments);var n=bt(t),r=bt(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function t$(t,e){return In(2,arguments),bt(t).getTime()-bt(e).getTime()}var Rx={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},n$="trunc";function r$(t){return t?Rx[t]:Rx[n$]}function s$(t){In(1,arguments);var e=bt(t);return e.setHours(23,59,59,999),e}function i$(t){In(1,arguments);var e=bt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function o$(t){In(1,arguments);var e=bt(t);return s$(e).getTime()===i$(e).getTime()}function a$(t,e){In(2,arguments);var n=bt(t),r=bt(e),s=$u(n,r),i=Math.abs(e$(n,r)),o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);var a=$u(n,r)===-s;o$(bt(t))&&i===1&&$u(t,r)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function l$(t,e,n){In(2,arguments);var r=t$(t,e)/1e3;return r$(void 0)(r)}var u$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},c$=function(e,n,r){var s,i=u$[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Kf(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var d$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},f$={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},h$={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},p$={date:Kf({formats:d$,defaultWidth:"full"}),time:Kf({formats:f$,defaultWidth:"full"}),dateTime:Kf({formats:h$,defaultWidth:"full"})},m$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},g$=function(e,n,r,s){return m$[e]};function ra(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[a]}var u=t.argumentCallback?t.argumentCallback(e):e;return s[u]}}var y$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},v$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},x$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},w$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},k$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},b$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},S$=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},_$={ordinalNumber:S$,era:ra({values:y$,defaultWidth:"wide"}),quarter:ra({values:v$,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ra({values:x$,defaultWidth:"wide"}),day:ra({values:w$,defaultWidth:"wide"}),dayPeriod:ra({values:k$,defaultWidth:"wide",formattingValues:b$,defaultFormattingWidth:"wide"})};function sa(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?T$(a,function(d){return d.test(o)}):C$(a,function(d){return d.test(o)}),u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var c=e.slice(o.length);return{value:u,rest:c}}}function C$(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function T$(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function E$(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}var M$=/^(\d+)(th|st|nd|rd)?/i,P$=/\d+/i,O$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},A$={any:[/^b/i,/^(a|c)/i]},N$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},D$={any:[/1/i,/2/i,/3/i,/4/i]},R$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},j$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},I$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},L$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},V$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},F$={ordinalNumber:E$({matchPattern:M$,parsePattern:P$,valueCallback:function(e){return parseInt(e,10)}}),era:sa({matchPatterns:O$,defaultMatchWidth:"wide",parsePatterns:A$,defaultParseWidth:"any"}),quarter:sa({matchPatterns:N$,defaultMatchWidth:"wide",parsePatterns:D$,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:sa({matchPatterns:R$,defaultMatchWidth:"wide",parsePatterns:j$,defaultParseWidth:"any"}),day:sa({matchPatterns:I$,defaultMatchWidth:"wide",parsePatterns:L$,defaultParseWidth:"any"}),dayPeriod:sa({matchPatterns:$$,defaultMatchWidth:"any",parsePatterns:V$,defaultParseWidth:"any"})},B$={code:"en-US",formatDistance:c$,formatLong:p$,formatRelative:g$,localize:_$,match:F$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function N_(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function z$(t){return N_({},t)}var jx=1440,U$=2520,Jf=43200,W$=86400;function H$(t,e,n){var r,s;In(2,arguments);var i=XL(),o=(r=(s=void 0)!==null&&s!==void 0?s:i.locale)!==null&&r!==void 0?r:B$;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=$u(t,e);if(isNaN(a))throw new RangeError("Invalid time value");var l=N_(z$(n),{addSuffix:!1,comparison:a}),u,c;a>0?(u=bt(e),c=bt(t)):(u=bt(t),c=bt(e));var d=l$(c,u),f=(Dx(c)-Dx(u))/1e3,h=Math.round((d-f)/60),p;if(h<2)return h===0?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",h,l);if(h<45)return o.formatDistance("xMinutes",h,l);if(h<90)return o.formatDistance("aboutXHours",1,l);if(h<jx){var m=Math.round(h/60);return o.formatDistance("aboutXHours",m,l)}else{if(h<U$)return o.formatDistance("xDays",1,l);if(h<Jf){var y=Math.round(h/jx);return o.formatDistance("xDays",y,l)}else if(h<W$)return p=Math.round(h/Jf),o.formatDistance("aboutXMonths",p,l)}if(p=a$(c,u),p<12){var g=Math.round(h/Jf);return o.formatDistance("xMonths",g,l)}else{var v=p%12,x=Math.floor(p/12);return v<3?o.formatDistance("aboutXYears",x,l):v<9?o.formatDistance("overXYears",x,l):o.formatDistance("almostXYears",x+1,l)}}function q$(t,e){return In(1,arguments),H$(t,Date.now(),e)}const D_=({document:t,onDelete:e,onDuplicate:n,onShare:r})=>{var l,u;const[s,i]=b.useState(!1),o=b.useRef(null);b.useEffect(()=>{const c=d=>{o.current&&!o.current.contains(d.target)&&i(!1)};return t.addEventListener("mousedown",c),()=>t.removeEventListener("mousedown",c)},[]);const a=c=>{try{const d=JSON.parse(c),f=h=>h.type==="text"?h.text||"":h.content?h.content.map(f).join(""):"";return f(d).slice(0,150)+"..."}catch{return c.slice(0,150)+"..."}};return w.jsxs(_o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},className:"bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden group",children:[w.jsxs(nt,{to:`/editor/${t.id}`,className:"block p-6",children:[w.jsxs("div",{className:"flex items-start justify-between mb-4",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx(qn,{className:"h-5 w-5 text-blue-600"}),w.jsx("h3",{className:"font-medium text-gray-900 truncate max-w-xs",children:t.title})]}),w.jsx("div",{className:"flex items-center space-x-2 text-gray-400",children:t.visibility==="private"?w.jsx(SD,{className:"h-4 w-4"}):w.jsx(gD,{className:"h-4 w-4"})})]}),w.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3",children:a(t.content)}),w.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[w.jsx("div",{className:"flex items-center space-x-2",children:w.jsxs("span",{children:["By ",((l=t.users)==null?void 0:l.full_name)||((u=t.users)==null?void 0:u.username)]})}),w.jsxs("span",{children:["Updated ",q$(new Date(t.last_modified_at))," ago"]})]})]}),w.jsxs("div",{className:"relative",ref:o,children:[w.jsx("button",{onClick:c=>{c.preventDefault(),i(!s)},className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 opacity-0 group-hover:opacity-100 transition-opacity",children:w.jsx(CD,{className:"h-4 w-4 text-gray-500"})}),w.jsx(x_,{children:s&&w.jsxs(_o.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:"absolute top-12 right-4 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[140px] z-10",children:[r&&w.jsxs("button",{onClick:()=>{r(t.id),i(!1)},className:"flex items-center space-x-2 w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[w.jsx(Zb,{className:"h-4 w-4"}),w.jsx("span",{children:"Share"})]}),n&&w.jsxs("button",{onClick:()=>{n(t.id),i(!1)},className:"flex items-center space-x-2 w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[w.jsx(qn,{className:"h-4 w-4"}),w.jsx("span",{children:"Duplicate"})]}),e&&w.jsxs("button",{onClick:()=>{e(t.id),i(!1)},className:"flex items-center space-x-2 w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[w.jsx(qn,{className:"h-4 w-4"}),w.jsx("span",{children:"Delete"})]})]})})]})]})},K$=()=>{const{user:t}=Yn(),[e,n]=b.useState([]),[r,s]=b.useState([]),[i,o]=b.useState(!0),[a,l]=b.useState(""),[u,c]=b.useState("all");b.useEffect(()=>{d()},[t]),b.useEffect(()=>{h()},[e,a,u]);const d=async()=>{if(t)try{const{data:y,error:g}=await De.from("documents").select(`
          *,
          users:author_id (
            username,
            full_name
          )
        `).or(`author_id.eq.${t.id},id.in.(${await f()})`).order("last_modified_at",{ascending:!1});if(g)throw g;n(y)}catch(y){console.error("Error fetching documents:",y),fe.error("Failed to load documents")}finally{o(!1)}},f=async()=>{if(!t)return"";const{data:y}=await De.from("document_shares").select("document_id").eq("user_id",t.id);return(y==null?void 0:y.map(g=>g.document_id).join(","))||"none"},h=()=>{let y=e;a&&(y=y.filter(g=>g.title.toLowerCase().includes(a.toLowerCase())||g.content.toLowerCase().includes(a.toLowerCase()))),u==="my"?y=y.filter(g=>g.author_id===(t==null?void 0:t.id)):u==="shared"&&(y=y.filter(g=>g.author_id!==(t==null?void 0:t.id))),s(y)},p=async y=>{if(confirm("Are you sure you want to delete this document? This action cannot be undone."))try{const{error:g}=await De.from("documents").delete().eq("id",y);if(g)throw g;n(v=>v.filter(x=>x.id!==y)),fe.success("Document deleted successfully")}catch(g){console.error("Error deleting document:",g),fe.error("Failed to delete document")}},m=async y=>{try{const g=e.find(k=>k.id===y);if(!g||!t)return;const{data:v,error:x}=await De.from("documents").insert({title:`${g.title} (Copy)`,content:g.content,author_id:t.id,visibility:"private"}).select().single();if(x)throw x;fe.success("Document duplicated successfully"),d()}catch(g){console.error("Error duplicating document:",g),fe.error("Failed to duplicate document")}};return i?w.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),w.jsx("p",{className:"text-gray-600",children:"Loading your documents..."})]})}):w.jsx("div",{className:"min-h-screen bg-gray-50",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[w.jsxs("div",{className:"mb-8",children:[w.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Your Documents"}),w.jsx("p",{className:"text-gray-600",children:"Create, edit, and collaborate on documents with your team."})]}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[w.jsxs("div",{className:"flex-1 relative",children:[w.jsx(bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),w.jsx("input",{type:"text",placeholder:"Search documents...",value:a,onChange:y=>l(y.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx(mD,{className:"h-5 w-5 text-gray-400"}),w.jsxs("select",{value:u,onChange:y=>c(y.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[w.jsx("option",{value:"all",children:"All Documents"}),w.jsx("option",{value:"my",children:"My Documents"}),w.jsx("option",{value:"shared",children:"Shared with Me"})]})]}),w.jsxs(nt,{to:"/editor/new",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[w.jsx(Sp,{className:"h-5 w-5"}),w.jsx("span",{children:"New Document"})]})]})]}),r.length===0?w.jsxs("div",{className:"text-center py-16",children:[w.jsx(qn,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a?"No documents found":"No documents yet"}),w.jsx("p",{className:"text-gray-600 mb-6",children:a?"Try adjusting your search query or filters":"Get started by creating your first document"}),!a&&w.jsxs(nt,{to:"/editor/new",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center space-x-2",children:[w.jsx(Sp,{className:"h-5 w-5"}),w.jsx("span",{children:"Create Document"})]})]}):w.jsx(_o.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(y=>w.jsx(D_,{document:y,onDelete:y.author_id===(t==null?void 0:t.id)?p:void 0,onDuplicate:m,onShare:g=>console.log("Share document:",g)},y.id))})]})})};function ut(t){this.content=t}ut.prototype={constructor:ut,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),i=r.content.slice();return s==-1?i.push(n||t,e):(i[s+1]=e,n&&(i[s]=n)),new ut(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ut(n)},addToStart:function(t,e){return new ut([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ut(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),i=r.find(t);return s.splice(i==-1?s.length:i,0,e,n),new ut(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ut.from(t),t.size?new ut(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ut.from(t),t.size?new ut(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ut.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ut.from=function(t){if(t instanceof ut)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ut(e)};function R_(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),i=e.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)n++;return n}if(s.content.size||i.content.size){let o=R_(s.content,i.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function j_(t,e,n,r){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let o=t.child(--s),a=e.child(--i),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let u=0,c=Math.min(o.text.length,a.text.length);for(;u<c&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let u=j_(o.content,a.content,n-1,r-1);if(u)return u}n-=l,r-=l}}class N{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,i){for(let o=0,a=0;a<n;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&r(l,s+a,i||null,o)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,n-c),r,s+c)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let i="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(o?o=!1:i+=r),i+=u},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new N(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let i=0,o=0;o<n;i++){let a=this.content[i],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),s+=a.nodeSize),o=l}return new N(r,s)}cutByIndex(e,n){return e==n?N.empty:e==0&&n==this.content.length?this:new N(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new N(s,i)}addToStart(e){return new N([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new N(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return R_(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return j_(this,e,n,r)}findIndex(e,n=-1){if(e==0)return pu(0,e);if(e==this.size)return pu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,s=0;;r++){let i=this.child(r),o=s+i.nodeSize;if(o>=e)return o==e||n>0?pu(r+1,o):pu(r,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return N.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new N(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return N.empty;let n,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(n||(n=e.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new N(n||e,r)}static from(e){if(!e)return N.empty;if(e instanceof N)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new N([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}N.empty=new N([],0);const Gf={index:0,offset:0};function pu(t,e){return Gf.index=t,Gf.offset=e,Gf}function $c(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!$c(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!$c(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let _e=class Wp{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&$c(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Wp.none;if(e instanceof Wp)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};_e.none=[];class Vc extends Error{}class ${constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=L_(this.content,e+this.openStart,n);return r&&new $(r,this.openStart,this.openEnd)}removeBetween(e,n){return new $(I_(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return $.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new $(N.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new $(e,r,s)}}$.empty=new $(N.empty,0,0);function I_(t,e,n){let{index:r,offset:s}=t.findIndex(e),i=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(s==e||i.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(I_(i.content,e-s-1,n-s-1)))}function L_(t,e,n,r){let{index:s,offset:i}=t.findIndex(e),o=t.maybeChild(s);if(i==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=L_(o.content,e-i-1,n);return a&&t.replaceChild(s,o.copy(a))}function J$(t,e,n){if(n.openStart>t.depth)throw new Vc("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Vc("Inconsistent open depths");return $_(t,e,n,0)}function $_(t,e,n,r){let s=t.index(r),i=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let o=$_(t,e,n,r+1);return i.copy(i.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return ii(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=G$(n,t);return ii(i,F_(t,o,a,e,r))}else return ii(i,Fc(t,e,r))}function V_(t,e){if(!e.type.compatibleContent(t.type))throw new Vc("Cannot join "+e.type.name+" onto "+t.type.name)}function Hp(t,e,n){let r=t.node(n);return V_(r,e.node(n)),r}function si(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ia(t,e,n,r){let s=(e||t).node(n),i=0,o=e?e.index(n):s.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(si(t.nodeAfter,r),i++));for(let a=i;a<o;a++)si(s.child(a),r);e&&e.depth==n&&e.textOffset&&si(e.nodeBefore,r)}function ii(t,e){return t.type.checkContent(e),t.copy(e)}function F_(t,e,n,r,s){let i=t.depth>s&&Hp(t,e,s+1),o=r.depth>s&&Hp(n,r,s+1),a=[];return Ia(null,t,s,a),i&&o&&e.index(s)==n.index(s)?(V_(i,o),si(ii(i,F_(t,e,n,r,s+1)),a)):(i&&si(ii(i,Fc(t,e,s+1)),a),Ia(e,n,s,a),o&&si(ii(o,Fc(n,r,s+1)),a)),Ia(r,null,s,a),new N(a)}function Fc(t,e,n){let r=[];if(Ia(null,t,n,r),t.depth>n){let s=Hp(t,e,n+1);si(ii(s,Fc(t,e,n+1)),r)}return Ia(e,null,n,r),new N(r)}function G$(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)s=e.node(i).copy(N.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class fl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return _e.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let a=r;r=s,s=a}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Bc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(i),u=i-l;if(r.push(o,a,s+l),!u||(o=o.child(a),o.isText))break;i=u-1,s+=l+1}return new fl(n,r,i)}static resolveCached(e,n){let r=Ix.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==n)return o}else Ix.set(e,r=new Z$);let s=r.elts[r.i]=fl.resolve(e,n);return r.i=(r.i+1)%Y$,s}}class Z${constructor(){this.elts=[],this.i=0}}const Y$=12,Ix=new WeakMap;class Bc{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Q$=Object.create(null);let gr=class qp{constructor(e,n,r,s=_e.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||N.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&$c(this.attrs,n||e.defaultAttrs||Q$)&&_e.sameSet(this.marks,r||_e.none)}copy(e=null){return e==this.content?this:new qp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new qp(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return $.empty;let s=this.resolve(e),i=this.resolve(n),o=r?0:s.sharedDepth(n),a=s.start(o),u=s.node(o).content.cut(s.pos-a,i.pos-a);return new $(u,s.depth-o,i.depth-o)}replace(e,n,r){return J$(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return fl.resolveCached(this,e)}resolveNoCache(e){return fl.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),B_(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=N.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=s;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=_e.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!_e.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=N.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};gr.prototype.text=void 0;class zc extends gr{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):B_(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new zc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new zc(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function B_(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class mi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new X$(e,n);if(r.next==null)return mi.empty;let s=z_(r);r.next&&r.err("Unexpected trailing text");let i=oV(iV(s));return aV(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function i(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return N.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:c,next:d}=o.next[u];if(!(c.isText||c.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let f=i(d,a.concat(c));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:l}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}mi.empty=new mi(!0);class X${constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function z_(t){let e=[];do e.push(eV(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function eV(t){let e=[];do e.push(tV(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function tV(t){let e=sV(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=nV(t,e);else break;return e}function Lx(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function nV(t,e){let n=Lx(t),r=n;return t.eat(",")&&(t.next!="}"?r=Lx(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function rV(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let i in n){let o=n[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function sV(t){if(t.eat("(")){let e=z_(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=rV(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function iV(t){let e=[[]];return s(i(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function s(o,a){o.forEach(l=>l.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(i(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=i(o.exprs[l],a);if(l==o.exprs.length-1)return u;s(u,a=n())}else if(o.type=="star"){let l=n();return r(a,l),s(i(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return s(i(o.expr,a),l),s(i(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(i(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let c=n();s(i(o.expr,l),c),l=c}if(o.max==-1)s(i(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let c=n();r(l,c),s(i(o.expr,l),c),l=c}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function U_(t,e){return e-t}function $x(t,e){let n=[];return r(e),n.sort(U_);function r(s){let i=t[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let o=0;o<i.length;o++){let{term:a,to:l}=i[o];!a&&n.indexOf(l)==-1&&r(l)}}}function oV(t){let e=Object.create(null);return n($x(t,0));function n(r){let s=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<s.length;c++)s[c][0]==a&&(u=s[c][1]);$x(t,l).forEach(c=>{u||s.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let i=e[r.join(",")]=new mi(r.indexOf(t.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(U_);i.next.push({type:s[o][0],next:e[a.join(",")]||n(a)})}return i}}function aV(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:u}=s.next[a];o.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(u)==-1&&r.push(u)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function W_(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function H_(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let i=t[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function q_(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function K_(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new uV(t,r,e[r]);return n}let Vx=class J_{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=K_(e,r.attrs),this.defaultAttrs=W_(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==mi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:H_(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new gr(this,this.computeAttrs(e),N.from(n),_e.setFrom(r))}createChecked(e=null,n,r){return n=N.from(n),this.checkContent(n),new gr(this,this.computeAttrs(e),n,_e.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=N.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(N.empty,!0);return i?new gr(this,e,n.append(i),_e.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){q_(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:_e.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,o)=>r[i]=new J_(i,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function lV(t,e,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class uV{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?lV(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Nd{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=K_(e,s.attrs),this.excluded=null;let i=W_(this.attrs);this.instance=i?new _e(this,i):null}create(e=null){return!e&&this.instance?this.instance:new _e(this,H_(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new Nd(i,s++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){q_(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class G_{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=ut.from(e.nodes),n.marks=ut.from(e.marks||{}),this.nodes=Vx.compile(this.spec.nodes,this),this.marks=Nd.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=mi.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?Fx(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:Fx(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Vx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new zc(r,r.defaultAttrs,e,_e.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return gr.fromJSON(this,e)}markFromJSON(e){return _e.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Fx(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],i=t.marks[s],o=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function cV(t){return t.tag!=null}function dV(t){return t.style!=null}class fs{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(cV(s))this.tags.push(s);else if(dV(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new zx(this,n,!1);return r.addAll(e,_e.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new zx(this,n,!0);return r.addAll(e,_e.none,n.from,n.to),$.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(pV(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<i)break}n.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=Ux(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=Ux(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new fs(e,fs.schemaRules(e)))}}const Z_={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},fV={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Y_={ol:!0,ul:!0},hl=1,Kp=2,La=4;function Bx(t,e,n){return e!=null?(e?hl:0)|(e==="full"?Kp:0):t&&t.whitespace=="pre"?hl|Kp:n&~La}class mu{constructor(e,n,r,s,i,o){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=_e.none,this.match=i||(o&La?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(N.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&hl)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=N.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(N.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Z_.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class zx{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,i,o=Bx(null,n.preserveWhitespace,0)|(r?La:0);s?i=new mu(s.type,s.attrs,_e.none,!0,n.topMatch||s.type.contentMatch,o):r?i=new mu(null,null,_e.none,!0,null,o):i=new mu(e.schema.topNodeType,null,_e.none,!0,null,o),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,i=s.options&Kp?"full":this.localPreserveWS||(s.options&hl)>0;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=s.content[s.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;Y_.hasOwnProperty(o)&&this.parser.normalizeLists&&hV(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:fV.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,c=this.needsBlock;if(Z_.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),u=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),u&&this.sync(i),this.needsBlock=c}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(i,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(u=>!l.clearMark(u)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,s){let i,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,s){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,n);this.findAtPoint(e,i)}findPlace(e,n,r){let s,i;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(e);if(u&&(!s||s.length>u.length+a)&&(s=u,i=l,!u.length))break;if(l.solid){if(r)break;a+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)n=this.enterInner(s[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=_e.none;for(let a of s.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):Wx(a.type,e.type))&&(o=a.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,s){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,s)),i}enterInner(e,n,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=Bx(e,i,o.options);o.options&La&&o.content.length==0&&(a|=La);let l=_e.none;return r=r.filter(u=>(o.type?o.type.allowsMarkType(u.type):Wx(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new mu(e,n,l,s,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=hl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let u=n[a];if(u==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(o(a-1,l))return!0;return!1}else{let c=l>0||l==0&&s?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function hV(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Y_.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function pV(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Ux(t){let e={};for(let n in t)e[n]=t[n];return e}function Wx(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let i=[],o=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==e||i.indexOf(c)<0&&o(c))return!0}};if(o(s.contentMatch))return!0}}class Ti{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Zf(n).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let a=0,l=0;for(;a<i.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(i[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)s=i.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],c=this.serializeMark(u,o.isInline,n);c&&(i.push([u,s]),s.appendChild(c.dom),s=c.contentDOM||c.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=Vu(Zf(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&Vu(Zf(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return Vu(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ti(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Hx(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Hx(e.marks)}}function Hx(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Zf(t){return t.document||window.document}const qx=new WeakMap;function mV(t){let e=qx.get(t);return e===void 0&&qx.set(t,e=gV(t)),e}function gV(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function Vu(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=mV(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let a,l=n?t.createElementNS(n,s):t.createElement(s),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let d in u)if(u[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),u[d]):l.setAttribute(d,u[d])}}for(let d=c;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=Vu(t,f,n,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const Q_=65535,X_=Math.pow(2,16);function yV(t,e){return t+e*X_}function Kx(t){return t&Q_}function vV(t){return(t-(t&Q_))/X_}const eC=1,tC=2,Fu=4,nC=8;class Jp{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&nC)>0}get deletedBefore(){return(this.delInfo&(eC|Fu))>0}get deletedAfter(){return(this.delInfo&(tC|Fu))>0}get deletedAcross(){return(this.delInfo&Fu)>0}}class Yt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Yt.empty)return Yt.empty}recover(e){let n=0,r=Kx(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+vV(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let u=this.ranges[a+i],c=this.ranges[a+o],d=l+u;if(e<=d){let f=u?e==l?-1:e==d?1:n:n,h=l+s+(f<0?0:c);if(r)return h;let p=e==(n<0?l:d)?null:yV(a/3,e-l),m=e==l?tC:e==d?eC:Fu;return(n<0?e!=l:e!=d)&&(m|=nC),new Jp(h,m,p)}s+=c-u}return r?e+s:new Jp(e+s,0,null)}touches(e,n){let r=0,s=Kx(n),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+i],c=l+u;if(e<=c&&a==s*3)return!0;r+=this.ranges[a+o]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),l=o+(this.inverted?0:i),u=this.ranges[s+n],c=this.ranges[s+r];e(a,a+u,l,l+c),i+=c-u}}invert(){return new Yt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Yt.empty:new Yt(e<0?[0,-e,0]:[0,0,e])}}Yt.empty=new Yt([]);class pl{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new pl(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new pl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new Jp(e,s,null)}}const Yf=Object.create(null);class Ct{getMap(){return Yt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Yf[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Yf)throw new RangeError("Duplicate use of step JSON ID "+e);return Yf[e]=n,n.prototype.jsonID=e,n}}class Ge{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Ge(e,null)}static fail(e){return new Ge(null,e)}static fromReplace(e,n,r,s){try{return Ge.ok(e.replace(n,r,s))}catch(i){if(i instanceof Vc)return Ge.fail(i.message);throw i}}}function Hg(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(Hg(i.content,e,i))),i.isInline&&(i=e(i,n,s)),r.push(i)}return N.fromArray(r)}class Yr extends Ct{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new $(Hg(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return Ge.fromReplace(e,this.from,this.to,i)}invert(){return new Un(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Yr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Yr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Yr(n.from,n.to,e.markFromJSON(n.mark))}}Ct.jsonID("addMark",Yr);class Un extends Ct{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new $(Hg(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Ge.fromReplace(e,this.from,this.to,r)}invert(){return new Yr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Un(n.pos,r.pos,this.mark)}merge(e){return e instanceof Un&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Un(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Un(n.from,n.to,e.markFromJSON(n.mark))}}Ct.jsonID("removeMark",Un);class Qr extends Ct{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ge.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ge.fromReplace(e,this.pos,this.pos+1,new $(N.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new Qr(this.pos,n.marks[s]);return new Qr(this.pos,this.mark)}}return new gi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Qr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Qr(n.pos,e.markFromJSON(n.mark))}}Ct.jsonID("addNodeMark",Qr);class gi extends Ct{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ge.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ge.fromReplace(e,this.pos,this.pos+1,new $(N.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Qr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new gi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new gi(n.pos,e.markFromJSON(n.mark))}}Ct.jsonID("removeNodeMark",gi);class tt extends Ct{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&Gp(e,this.from,this.to)?Ge.fail("Structure replace would overwrite content"):Ge.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Yt([this.from,this.to-this.from,this.slice.size])}invert(e){return new tt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new tt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof tt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?$.empty:new $(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new tt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?$.empty:new $(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new tt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new tt(n.from,n.to,$.fromJSON(e,n.slice),!!n.structure)}}Ct.jsonID("replace",tt);class st extends Ct{constructor(e,n,r,s,i,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Gp(e,this.from,this.gapFrom)||Gp(e,this.gapTo,this.to)))return Ge.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ge.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ge.fromReplace(e,this.from,this.to,r):Ge.fail("Content does not fit in gap")}getMap(){return new Yt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new st(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new st(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new st(n.from,n.to,n.gapFrom,n.gapTo,$.fromJSON(e,n.slice),n.insert,!!n.structure)}}Ct.jsonID("replaceAround",st);function Gp(t,e,n){let r=t.resolve(e),s=n-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function xV(t,e,n,r){let s=[],i=[],o,a;t.doc.nodesBetween(e,n,(l,u,c)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let f=Math.max(u,e),h=Math.min(u+l.nodeSize,n),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(d[m])?o.to=h:s.push(o=new Un(f,h,d[m])));a&&a.to==f?a.to=h:i.push(a=new Yr(f,h,r))}}),s.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function wV(t,e,n,r){let s=[],i=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;i++;let l=null;if(r instanceof Nd){let u=o.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,n);for(let c=0;c<l.length;c++){let d=l[c],f;for(let h=0;h<s.length;h++){let p=s[h];p.step==i-1&&d.eq(s[h].style)&&(f=p)}f?(f.to=u,f.step=i):s.push({style:d,from:Math.max(a,e),to:u,step:i})}}}),s.forEach(o=>t.step(new Un(o.from,o.to,o.style)))}function qg(t,e,n,r=n.contentMatch,s=!0){let i=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<i.childCount;l++){let u=i.child(l),c=a+u.nodeSize,d=r.matchType(u.type);if(!d)o.push(new tt(a,c,$.empty));else{r=d;for(let f=0;f<u.marks.length;f++)n.allowsMarkType(u.marks[f].type)||t.step(new Un(a,c,u.marks[f]));if(s&&u.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(u.text);)p||(p=new $(N.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),o.push(new tt(a+f.index,a+f.index+f[0].length,p))}}a=c}if(!r.validEnd){let l=r.fillBefore(N.empty,!0);t.replace(a,a,new $(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function kV(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Uo(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let s=t.$from.node(r),i=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&s.canReplace(i,o,n))return r;if(r==0||s.type.spec.isolating||!kV(s,i,o))break}return null}function bV(t,e,n){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),a=s.after(i+1),l=o,u=a,c=N.empty,d=0;for(let p=i,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,c=N.from(r.node(p).copy(c)),d++):l--;let f=N.empty,h=0;for(let p=i,m=!1;p>n;p--)m||s.after(p+1)<s.end(p)?(m=!0,f=N.from(s.node(p).copy(f)),h++):u++;t.step(new st(l,u,o,a,new $(c.append(f),d,h),c.size-d,!0))}function Kg(t,e,n=null,r=t){let s=SV(t,e),i=s&&_V(r,e);return i?s.map(Jx).concat({type:e,attrs:n}).concat(i.map(Jx)):null}function Jx(t){return{type:t,attrs:null}}function SV(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return n.canReplaceWith(r,s,o)?i:null}function _V(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;l&&u<s;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:o}function CV(t,e,n){let r=N.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=N.from(n[o].type.create(n[o].attrs,r))}let s=e.start,i=e.end;t.step(new st(s,i,s,i,new $(r,0,0),n.length,!0))}function TV(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,l)&&EV(t.doc,t.mapping.slice(i).map(a),r)){let u=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?u=!1:!h&&p&&(u=!0)}u===!1&&sC(t,o,a,i),qg(t,t.mapping.slice(i).map(a,1),r,void 0,u===null);let c=t.mapping.slice(i),d=c.map(a,1),f=c.map(a+o.nodeSize,1);return t.step(new st(d,f,d+1,f-1,new $(N.from(r.create(l,null,o.marks)),0,0),1,!0)),u===!0&&rC(t,o,a,i),!1}})}function rC(t,e,n,r){e.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=t.mapping.slice(r).map(n+1+i+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function sC(t,e,n,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function EV(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function MV(t,e,n,r,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new st(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new $(N.from(o),0,0),1,!0))}function co(t,e,n=1,r){let s=t.resolve(e),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let u=s.depth-1,c=n-2;u>i;u--,c--){let d=s.node(u),f=s.index(u);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[c]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let a=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function PV(t,e,n=1,r){let s=t.doc.resolve(e),i=N.empty,o=N.empty;for(let a=s.depth,l=s.depth-n,u=n-1;a>l;a--,u--){i=N.from(s.node(a).copy(i));let c=r&&r[u];o=N.from(c?c.type.create(c.attrs,o):s.node(a).copy(o))}t.step(new tt(e,e,new $(i.append(o),n,n),!0))}function As(t,e){let n=t.resolve(e),r=n.index();return iC(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function OV(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function iC(t,e){return!!(t&&e&&!t.isLeaf&&OV(t,e))}function Dd(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let i,o,a=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(s+1),a++,o=r.node(s).maybeChild(a)):(i=r.node(s).maybeChild(a-1),o=r.node(s+1)),i&&!i.isTextblock&&iC(i,o)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function AV(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-n),o=i.node().type;if(s&&o.inlineContent){let c=o.whitespace=="pre",d=!!o.contentMatch.matchType(s);c&&!d?r=!1:!c&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);sC(t,c.node(),c.before(),a)}o.inlineContent&&qg(t,e+n-1,o,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(a),u=l.map(e-n);if(t.step(new tt(u,l.map(e+n,-1),$.empty,!0)),r===!0){let c=t.doc.resolve(u);rC(t,c.node(),c.before(),t.steps.length)}return t}function NV(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function oC(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),u=r.node(o),c=!1;if(i==1)c=u.canReplace(l,l,s);else{let d=u.contentMatchAt(l).findWrapping(s.firstChild.type);c=d&&u.canReplaceWith(l,l,d[0])}if(c)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Rd(t,e,n=e,r=$.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),i=t.resolve(n);return aC(s,i,r)?new tt(e,n,r):new DV(s,i,r).fit()}function aC(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class DV{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=N.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=N.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let l=new $(i,o,a);return e>-1?new st(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new tt(r.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=Qf(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,d=null;if(n==1&&(o?u.matchType(o.type)||(d=u.fillBefore(N.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(n==2&&o&&(c=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:c};if(i&&u.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=Qf(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new $(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=Qf(e,n);if(s.childCount<=1&&n>0){let i=e.size-n<=n+s.size;this.unplaced=new $(ha(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new $(ha(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let m=0;m<i.length;m++)this.openFrontierNode(i[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,u=0,c=[],{match:d,type:f}=this.frontier[n];if(s){for(let m=0;m<s.childCount;m++)c.push(s.child(m));d=d.matchFragment(s)}let h=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let m=a.child(u),y=d.matchType(m.type);if(!y)break;u++,(u>1||l==0||m.content.size)&&(d=y,c.push(lC(m.mark(f.allowedMarks(m.marks)),u==1?l:0,u==a.childCount?h:-1)))}let p=u==a.childCount;p||(h=-1),this.placed=pa(this.placed,n,N.from(c)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,y=a;m<h;m++){let g=y.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),y=g.content}this.unplaced=p?e==0?$.empty:new $(ha(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new $(ha(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Xf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Xf(e,n,s,r,i);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=Xf(e,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:o,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=pa(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=pa(this.placed,this.depth,N.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(N.empty,!0);n.childCount&&(this.placed=pa(this.placed,this.frontier.length,n))}}function ha(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ha(t.firstChild.content,e-1,n)))}function pa(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(pa(t.lastChild.content,e-1,n)))}function Qf(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function lC(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,lC(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(N.empty,!0)))),t.copy(r)}function Xf(t,e,n,r,s){let i=t.node(e),o=s?t.indexAfter(e):t.index(e);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!RV(n,i.content,o)?a:null}function RV(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function jV(t){return t.spec.defining||t.spec.definingForContent}function IV(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),i=t.doc.resolve(n);if(aC(s,i,r))return t.step(new tt(e,n,r));let o=cC(s,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let f=s.depth,h=s.pos-1;f>0;f--,h--){let p=s.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:s.before(f)==h&&o.splice(1,0,-f)}let l=o.indexOf(a),u=[],c=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(u.push(p),h==r.openStart)break;f=p.content}for(let f=c-1;f>=0;f--){let h=u[f],p=jV(h.type);if(p&&!h.sameMarkup(s.node(Math.abs(a)-1)))c=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+c+1)%(r.openStart+1),p=u[h];if(p)for(let m=0;m<o.length;m++){let y=o[(m+l)%o.length],g=!0;y<0&&(g=!1,y=-y);let v=s.node(y-1),x=s.index(y-1);if(v.canReplaceWith(x,x,p.type,p.marks))return t.replace(s.before(y),g?i.after(y):n,new $(uC(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=o[f];h<0||(e=s.before(h),n=i.after(h))}}function uC(t,e,n,r,s){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(uC(i.content,e+1,n,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(N.empty,!0))}return t}function LV(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=NV(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new $(N.from(r),0,0))}function $V(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),i=cC(r,s);for(let o=0;o<i.length;o++){let a=i[o],l=o==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return t.delete(r.before(a),s.after(a))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function cC(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&n.push(s)}return n}class fo extends Ct{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ge.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Ge.fromReplace(e,this.pos,this.pos+1,new $(N.from(s),0,n.isLeaf?0:1))}getMap(){return Yt.empty}invert(e){return new fo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new fo(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new fo(n.pos,n.attr,n.value)}}Ct.jsonID("attr",fo);class ml extends Ct{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Ge.ok(r)}getMap(){return Yt.empty}invert(e){return new ml(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ml(n.attr,n.value)}}Ct.jsonID("docAttr",ml);let Po=class extends Error{};Po=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Po.prototype=Object.create(Error.prototype);Po.prototype.constructor=Po;Po.prototype.name="TransformError";class VV{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new pl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Po(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=$.empty){let s=Rd(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new $(N.from(r),0,0))}delete(e,n){return this.replace(e,n,$.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return IV(this,e,n,r),this}replaceRangeWith(e,n,r){return LV(this,e,n,r),this}deleteRange(e,n){return $V(this,e,n),this}lift(e,n){return bV(this,e,n),this}join(e,n=1){return AV(this,e,n),this}wrap(e,n){return CV(this,e,n),this}setBlockType(e,n=e,r,s=null){return TV(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return MV(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new fo(e,n,r)),this}setDocAttribute(e,n){return this.step(new ml(e,n)),this}addNodeMark(e,n){return this.step(new Qr(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof _e)n.isInSet(r.marks)&&this.step(new gi(e,n));else{let s=r.marks,i,o=[];for(;i=n.isInSet(s);)o.push(new gi(e,i)),s=i.removeFromSet(s);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return PV(this,e,n,r),this}addMark(e,n,r){return xV(this,e,n,r),this}removeMark(e,n,r){return wV(this,e,n,r),this}clearIncompatible(e,n,r){return qg(this,e,n,r),this}}const eh=Object.create(null);class ae{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new FV(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=$.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],c=e.mapping.slice(i);e.replaceRange(c.map(l.pos),c.map(u.pos),a?$.empty:n),a==0&&Yx(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],l=e.mapping.slice(r),u=l.map(o.pos),c=l.map(a.pos);i?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),Yx(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new re(e):$i(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=n<0?$i(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):$i(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new gn(e.node(0))}static atStart(e){return $i(e,e,0,0,1)||new gn(e)}static atEnd(e){return $i(e,e,e.content.size,e.childCount,-1)||new gn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=eh[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in eh)throw new RangeError("Duplicate use of selection JSON ID "+e);return eh[e]=n,n.prototype.jsonID=e,n}getBookmark(){return re.between(this.$anchor,this.$head).getBookmark()}}ae.prototype.visible=!0;class FV{constructor(e,n){this.$from=e,this.$to=n}}let Gx=!1;function Zx(t){!Gx&&!t.parent.inlineContent&&(Gx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class re extends ae{constructor(e,n=e){Zx(e),Zx(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ae.near(r);let s=e.resolve(n.map(this.anchor));return new re(s.parent.inlineContent?s:r,r)}replace(e,n=$.empty){if(super.replace(e,n),n==$.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof re&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new jd(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new re(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=ae.findFrom(n,r,!0)||ae.findFrom(n,-r,!0);if(i)n=i.$head;else return ae.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(ae.findFrom(e,-r,!0)||ae.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new re(e,n)}}ae.jsonID("text",re);class jd{constructor(e,n){this.anchor=e,this.head=n}map(e){return new jd(e.map(this.anchor),e.map(this.head))}resolve(e){return re.between(e.resolve(this.anchor),e.resolve(this.head))}}class Z extends ae{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=e.resolve(s);return r?ae.near(i):new Z(i)}content(){return new $(N.from(this.node),0,0)}eq(e){return e instanceof Z&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Jg(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Z(e.resolve(n.anchor))}static create(e,n){return new Z(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Z.prototype.visible=!1;ae.jsonID("node",Z);class Jg{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new jd(r,r):new Jg(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Z.isSelectable(r)?new Z(n):ae.near(n)}}class gn extends ae{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=$.empty){if(n==$.empty){e.delete(0,e.doc.content.size);let r=ae.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new gn(e)}map(e){return new gn(e)}eq(e){return e instanceof gn}getBookmark(){return BV}}ae.jsonID("all",gn);const BV={map(){return this},resolve(t){return new gn(t)}};function $i(t,e,n,r,s,i=!1){if(e.inlineContent)return re.create(t,n);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!i&&Z.isSelectable(a))return Z.create(t,n-(s<0?a.nodeSize:0))}else{let l=$i(t,a,n+s,s<0?a.childCount:0,s,i);if(l)return l}n+=a.nodeSize*s}return null}function Yx(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof tt||s instanceof st))return;let i=t.mapping.maps[r],o;i.forEach((a,l,u,c)=>{o==null&&(o=c)}),t.setSelection(ae.near(t.doc.resolve(o),n))}const Qx=1,gu=2,Xx=4;class zV extends VV{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Qx)&~gu,this.storedMarks=null,this}get selectionSet(){return(this.updated&Qx)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=gu,this}ensureMarks(e){return _e.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&gu)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~gu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||_e.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(n);i=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,i)),this.selection.empty||this.setSelection(ae.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Xx,this}get scrolledIntoView(){return(this.updated&Xx)>0}}function ew(t,e){return!e||!t?t:t.bind(e)}class ma{constructor(e,n,r){this.name=e,this.init=ew(n.init,r),this.apply=ew(n.apply,r)}}const UV=[new ma("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new ma("selection",{init(t,e){return t.selection||ae.atStart(e.doc)},apply(t){return t.selection}}),new ma("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new ma("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class th{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=UV.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ma(r.key,r.spec.state,r))})}}class no{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,u=s?s[o].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,u,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),i=!0}s&&(s[o]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new no(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new zV(this)}static create(e){let n=new th(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new no(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new th(this.schema,e.plugins),r=n.fields,s=new no(n);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new th(e.schema,e.plugins),i=new no(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=gr.fromJSON(e.schema,n.doc);else if(o.name=="selection")i.selection=ae.fromJSON(i.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[o.name]=u.fromJSON.call(l,e,n[a],i);return}}i[o.name]=o.init(e,i)}}),i}}function dC(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=dC(s,e,{})),n[r]=s}return n}class mt{constructor(e){this.spec=e,this.props={},e.props&&dC(e.props,this,this.props),this.key=e.key?e.key.key:fC("plugin")}getState(e){return e[this.key]}}const nh=Object.create(null);function fC(t){return t in nh?t+"$"+ ++nh[t]:(nh[t]=0,t+"$")}class Gt{constructor(e="key"){this.key=fC(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ct=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Oo=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Zp=null;const ar=function(t,e,n){let r=Zp||(Zp=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},WV=function(){Zp=null},yi=function(t,e,n,r){return n&&(tw(t,e,n,r,-1)||tw(t,e,n,r,1))},HV=/^(img|br|input|textarea|hr)$/i;function tw(t,e,n,r,s){for(var i;;){if(t==n&&e==r)return!0;if(e==(s<0?0:hn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Il(t)||HV.test(t.nodeName)||t.contentEditable=="false")return!1;e=ct(t)+(s<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else t=o,e=s<0?hn(t):0}else return!1}}function hn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function qV(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=hn(t)}else if(t.parentNode&&!Il(t))e=ct(t),t=t.parentNode;else return null}}function KV(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Il(t))e=ct(t)+1,t=t.parentNode;else return null}}function JV(t,e,n){for(let r=e==0,s=e==hn(t);r||s;){if(t==n)return!0;let i=ct(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,s=s&&i==hn(t)}}function Il(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Id=function(t){return t.focusNode&&yi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Ws(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function GV(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function ZV(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(hn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(hn(r.startContainer),r.startOffset)}}}const Gn=typeof navigator<"u"?navigator:null,nw=typeof document<"u"?document:null,Ns=Gn&&Gn.userAgent||"",Yp=/Edge\/(\d+)/.exec(Ns),hC=/MSIE \d/.exec(Ns),Qp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ns),Kt=!!(hC||Qp||Yp),hs=hC?document.documentMode:Qp?+Qp[1]:Yp?+Yp[1]:0,jn=!Kt&&/gecko\/(\d+)/i.test(Ns);jn&&+(/Firefox\/(\d+)/.exec(Ns)||[0,0])[1];const Xp=!Kt&&/Chrome\/(\d+)/.exec(Ns),St=!!Xp,pC=Xp?+Xp[1]:0,At=!Kt&&!!Gn&&/Apple Computer/.test(Gn.vendor),Ao=At&&(/Mobile\/\w+/.test(Ns)||!!Gn&&Gn.maxTouchPoints>2),cn=Ao||(Gn?/Mac/.test(Gn.platform):!1),YV=Gn?/Win/.test(Gn.platform):!1,fr=/Android \d/.test(Ns),Ll=!!nw&&"webkitFontSmoothing"in nw.documentElement.style,QV=Ll?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function XV(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function nr(t,e){return typeof t=="number"?t:t[e]}function eF(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function rw(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Oo(o);continue}let a=o,l=a==i.body,u=l?XV(i):eF(a),c=0,d=0;if(e.top<u.top+nr(r,"top")?d=-(u.top-e.top+nr(s,"top")):e.bottom>u.bottom-nr(r,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+nr(s,"top")-u.top:e.bottom-u.bottom+nr(s,"bottom")),e.left<u.left+nr(r,"left")?c=-(u.left-e.left+nr(s,"left")):e.right>u.right-nr(r,"right")&&(c=e.right-u.right+nr(s,"right")),c||d)if(l)i.defaultView.scrollBy(c,d);else{let h=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),c&&(a.scrollLeft+=c);let m=a.scrollLeft-h,y=a.scrollTop-p;e={left:e.left-m,top:e.top-y,right:e.right-m,bottom:e.bottom-y}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Oo(o)}}function tF(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(i,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:mC(t.dom)}}function mC(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Oo(r));return e}function nF({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;gC(n,r==0?0:r-e)}function gC(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:i}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Di=null;function rF(t){if(t.setActive)return t.setActive();if(Di)return t.focus(Di);let e=mC(t);t.focus(Di==null?{get preventScroll(){return Di={preventScroll:!0},!0}}:void 0),Di||(Di=!1,gC(e,0))}function yC(t,e){let n,r=2e8,s,i=0,o=e.top,a=e.top,l,u;for(let c=t.firstChild,d=0;c;c=c.nextSibling,d++){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=ar(c).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=c,r=m,s=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&m&&(i=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=c,u={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=d+1)}}return!n&&l&&(n=l,s=u,r=0),n&&n.nodeType==3?sF(n,s):!n||r&&n.nodeType==1?{node:t,offset:i}:yC(n,s)}function sF(t,e){let n=t.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let i=Nr(r,1);if(i.top!=i.bottom&&Gg(e,i))return{node:t,offset:s+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function Gg(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function iF(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function oF(t,e,n){let{node:r,offset:s}=yC(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,s,i)}function aF(t,e,n,r){let s=-1;for(let i=e,o=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!o&&l.left>r.left||l.top>r.top?s=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function vC(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let o=t.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(Gg(e,u))return vC(o,e,u)}}if((i=(i+1)%r)==s)break}return t}function lF(t,e){let n=t.dom.ownerDocument,r,s=0,i=ZV(n,e.left,e.top);i&&({node:r,offset:s}=i);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!Gg(e,u)||(o=vC(t.dom,e,u),!o))return null}if(At)for(let u=o;r&&u;u=Oo(u))u.draggable&&(r=void 0);if(o=iF(o,e),r){if(jn&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let c=r.childNodes[s],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let u;Ll&&s&&r.nodeType==1&&(u=r.childNodes[s-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=aF(t,r,s,e))}a==null&&(a=oF(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function sw(t){return t.top<t.bottom||t.left<t.right}function Nr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(sw(r))return r}return Array.prototype.find.call(n,sw)||t.getBoundingClientRect()}const uF=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function xC(t,e,n){let{node:r,offset:s,atom:i}=t.docView.domFromPos(e,n<0?-1:1),o=Ll||jn;if(r.nodeType==3)if(o&&(uF.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let l=Nr(ar(r,s,s),n);if(jn&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let u=Nr(ar(r,s-1,s-1),-1);if(u.top==l.top){let c=Nr(ar(r,s,s+1),-1);if(c.top!=l.top)return ia(c,c.left<u.left)}}return l}else{let l=s,u=s,c=n<0?1:-1;return n<0&&!s?(u++,c=-1):n>=0&&s==r.nodeValue.length?(l--,c=1):n<0?l--:u++,ia(Nr(ar(r,l,u),c),c<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==hn(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return rh(l.getBoundingClientRect(),!1)}if(i==null&&s<hn(r)){let l=r.childNodes[s];if(l.nodeType==1)return rh(l.getBoundingClientRect(),!0)}return rh(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==hn(r))){let l=r.childNodes[s-1],u=l.nodeType==3?ar(l,hn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return ia(Nr(u,1),!1)}if(i==null&&s<hn(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?ar(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return ia(Nr(u,-1),!0)}return ia(Nr(r.nodeType==3?ar(r):r,-n),n>=0)}function ia(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function rh(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function wC(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function cF(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return wC(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=xC(t,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=ar(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(n=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const dF=/[\u0590-\u08ac]/;function fF(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,a=t.domSelection();return a?!dF.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:o:wC(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),y=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&u==m;try{a.collapse(c,d),l&&(l!=c||u!=d)&&a.extend&&a.extend(l,u)}catch{}return f!=null&&(a.caretBidiLevel=f),y}):r.pos==r.start()||r.pos==r.end()}let iw=null,ow=null,aw=!1;function hF(t,e,n){return iw==e&&ow==n?aw:(iw=e,ow=n,aw=n=="up"||n=="down"?cF(t,e,n):fF(t,e,n))}const yn=0,lw=1,Qs=2,Zn=3;class $l{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=yn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>ct(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!n||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let a=s.children[o];if(a.size){s=a;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],a=i+o.size;if(a>e||o instanceof bC){s=e-i;break}i=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof kC&&i.side>=0;r--);if(n<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&n&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?ct(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?ct(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,a=0;;a++){let l=this.children[a],u=o+l.size;if(s==-1&&e<=u){let c=o+l.border;if(e>=c&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,c);e=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=ct(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(u>n||a==this.children.length-1)){n=u;for(let c=a+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=ct(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let i=Math.min(e,n),o=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let m=this.children[h],y=p+m.size;if(i>p&&o<y)return m.setSelection(e-p-m.border,n-p-m.border,r,s);p=y}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((jn||At)&&e==n){let{node:h,offset:p}=a;if(h.nodeType==3){if(d=!!(p&&h.nodeValue[p-1]==`
`),d&&p==h.nodeValue.length)for(let m=h,y;m;m=m.parentNode){if(y=m.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:ct(y)+1});break}let g=m.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let m=h.childNodes[p-1];d=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(jn&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(s=!0)}if(!(s||d&&At)&&yi(a.node,a.offset,c.anchorNode,c.anchorOffset)&&yi(l.node,l.offset,c.focusNode,c.focusOffset))return;let f=!1;if((u.extend||e==n)&&!d){u.collapse(a.node,a.offset);try{e!=n&&u.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+i.border,l=o-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Qs:lw,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Zn:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Qs:Zn}r=o}this.dirty=Qs}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Qs:lw;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class kC extends $l{constructor(e,n,r,s){let i,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==yn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class pF extends $l{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class vi extends $l{constructor(e,n,r,s,i){super(e,[],r,s),this.mark=n,this.spec=i}static create(e,n,r,s){let i=s.nodeViews[n.type.name],o=i&&i(n,s,r);return(!o||!o.dom)&&(o=Ti.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new vi(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Zn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Zn&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=yn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=yn}}slice(e,n,r){let s=vi.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;n<o&&(i=tm(i,n,o,r)),e>0&&(i=tm(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ps extends $l{constructor(e,n,r,s,i,o,a,l,u){super(e,[],i,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,n,r,s,i,o){let a=i.nodeViews[n.type.name],l,u=a&&a(n,i,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,s),c=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=Ti.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let f=c;return c=CC(c,r,n),u?l=new mF(e,n,r,s,c,d||null,f,u,i,o+1):n.isText?new Ld(e,n,r,s,c,f,i):new ps(e,n,r,s,c,d||null,f,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>N.empty)}return e}matchesNode(e,n,r){return this.dirty==yn&&e.eq(this.node)&&Uc(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,i=e.composing?this.localCompositionInfo(e,n):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new yF(this,o&&o.node,e);wF(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!d&&l.syncToMarks(c==this.node.childCount?_e.none:this.node.child(c).marks,r,e),l.placeWidget(u,e,s)},(u,c,d,f)=>{l.syncToMarks(u.marks,r,e);let h;l.findNodeMatch(u,c,d,f)||a&&e.state.selection.from>s&&e.state.selection.to<s+u.nodeSize&&(h=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(u,c,d,h,e)||l.updateNextNode(u,c,d,e,f,s)||l.addNode(u,c,d,e,s),s+=u.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Qs)&&(o&&this.protectLocalComposition(e,o),SC(this.contentDOM,this.children,e),Ao&&kF(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof re)||r<n||s>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,a=bF(this.node.content,o,r-n,s-n);return a<0?null:{node:i,pos:a,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new pF(this,i,n,s);e.input.compositionNodes.push(o),this.children=tm(this.children,r,r+s.length,e,o)}update(e,n,r,s){return this.dirty==Zn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=yn}updateOuterDeco(e){if(Uc(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=_C(this.dom,this.nodeDOM,em(this.outerDeco,this.node,n),em(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function uw(t,e,n,r,s){CC(r,e,t);let i=new ps(void 0,t,e,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class Ld extends ps{constructor(e,n,r,s,i,o,a){super(e,n,r,s,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==Zn||this.dirty!=yn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=yn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=yn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),i=document.createTextNode(s.text);return new Ld(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Zn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class bC extends $l{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==yn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class mF extends ps{constructor(e,n,r,s,i,o,a,l,u,c){super(e,n,r,s,i,o,a,u,c),this.spec=l}update(e,n,r,s){if(this.dirty==Zn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function SC(t,e,n){let r=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=cw(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(a,r);if(o instanceof vi){let l=r?r.previousSibling:t.lastChild;SC(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=cw(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const $a=function(t){t&&(this.nodeName=t)};$a.prototype=Object.create(null);const Xs=[new $a];function em(t,e,n){if(t.length==0)return Xs;let r=n?Xs[0]:new $a,s=[r];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&s.push(r=new $a(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&s.length==1&&s.push(r=new $a(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function _C(t,e,n,r){if(n==Xs&&r==Xs)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],a=n[i];if(i){let l;a&&a.nodeName==o.nodeName&&s!=t&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=Xs[0]),s=l}gF(s,a||Xs[0],o)}return s}function gF(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function CC(t,e,n){return _C(t,t,Xs,em(e,n,t.nodeType!=1))}function Uc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function cw(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class yF{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=vF(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;s<o&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=yn,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[i])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=vi.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,s,i){let o=this.top.children[s];return o.dirty==Zn&&o.dom==o.contentDOM&&(o.dirty=Qs),o.update(e,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof ps){let u=this.preMatch.matched.get(l);if(u!=null&&u!=i)return!1;let c=l.dom,d,f=this.isLocked(c)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Zn&&Uc(n,l.outerDeco));if(!f&&l.update(e,n,r,s))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Qs,d.updateChildren(s,o+1),d.dirty=yn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,i,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Uc(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=ps.create(this.top,n,r,s,i,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,s,i){let o=ps.create(this.top,e,n,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new kC(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof vi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Ld)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((At||St)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new bC(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function vF(t,e){let n=e,r=n.children.length,s=t.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(r){let u=n.children[r-1];if(u instanceof vi)n=u,r=u.children.length;else{a=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function xF(t,e){return t.type.side-e.type.side}function wF(t,e,n,r){let s=e.locals(t),i=0;if(s.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,s,e.forChild(i,c),u),i+=c.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){let c,d;for(;o<s.length&&s[o].to==i;){let y=s[o++];y.widget&&(c?(d||(d=[c])).push(y):c=y)}if(c)if(d){d.sort(xF);for(let y=0;y<d.length;y++)n(d[y],u,!!l)}else n(c,u,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(u<t.childCount)h=u,f=t.child(u++);else break;for(let y=0;y<a.length;y++)a[y].to<=i&&a.splice(y--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let p=i+f.nodeSize;if(f.isText){let y=p;o<s.length&&s[o].from<y&&(y=s[o].from);for(let g=0;g<a.length;g++)a[g].to<y&&(y=a[g].to);y<p&&(l=f.cut(y-i),f=f.cut(0,y-i),p=y,h=-1)}else for(;o<s.length&&s[o].to<p;)o++;let m=f.isInline&&!f.isLeaf?a.filter(y=>!y.inline):a.slice();r(f,m,e.forChild(i,f),h),i=p}}function kF(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function bF(t,e,n,r){for(let s=0,i=0;s<t.childCount&&i<=r;){let o=t.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<t.childCount;){let u=t.child(s++);if(i+=u.nodeSize,!u.isText)break;l+=u.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let u=a<r?l.lastIndexOf(e,r-a-1):-1;if(u>=0&&u+e.length+a>=n)return a+u;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function tm(t,e,n,r,s){let i=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],u=a,c=a+=l.size;u>=n||c<=e?i.push(l):(u<e&&i.push(l.slice(0,e-u,r)),s&&(i.push(s),s=void 0),c>n&&i.push(l.slice(n-u,l.size,r)))}return i}function Zg(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),i=s&&s.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,u;if(Id(n)){for(l=o;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&Z.isSelectable(d)&&s.parent&&!(d.isInline&&JV(n.focusNode,n.focusOffset,s.dom))){let f=s.posBefore;u=new Z(o==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,o]=f==t.state.selection.anchor?[f,d]:[d,f],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!u){let d=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;u=Yg(t,c,a,d)}return u}function TC(t){return t.editable?t.hasFocus():MC(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function yr(t,e=!1){let n=t.state.selection;if(EC(t,n),!!TC(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&St){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&yi(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)_F(t);else{let{anchor:r,head:s}=n,i,o;dw&&!(n instanceof re)&&(n.$from.parent.inlineContent||(i=fw(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=fw(t,n.to))),t.docView.setSelection(r,s,t,e),dw&&(i&&hw(i),o&&hw(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&SF(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const dw=At||St&&pC<63;function fw(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(At&&s&&s.contentEditable=="false")return sh(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return sh(s);if(i)return sh(i)}}function sh(t){return t.contentEditable="true",At&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function hw(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function SF(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!TC(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function _F(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,s=r.nodeName=="IMG";s?n.setStart(r.parentNode,ct(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!s&&!t.state.selection.visible&&Kt&&hs<=11&&(r.disabled=!0,r.disabled=!1)}function EC(t,e){if(e instanceof Z){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(pw(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else pw(t)}function pw(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Yg(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||re.between(e,n,r)}function mw(t){return t.editable&&!t.hasFocus()?!1:MC(t)}function MC(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function CF(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return yi(e.node,e.offset,n.anchorNode,n.anchorOffset)}function nm(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&ae.findFrom(i,e)}function $r(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function gw(t,e,n){let r=t.state.selection;if(r instanceof re)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return $r(t,new re(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=nm(t.state,e);return s&&s instanceof Z?$r(t,s):!1}else if(!(cn&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Z.isSelectable(i)?$r(t,new Z(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):Ll?$r(t,new re(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Z&&r.node.isInline)return $r(t,new re(e>0?r.$to:r.$from));{let s=nm(t.state,e);return s?$r(t,s):!1}}}function Wc(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Va(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ri(t,e){return e<0?TF(t):EF(t)}function TF(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,i,o=!1;for(jn&&n.nodeType==1&&r<Wc(n)&&Va(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Va(a,-1))s=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(PC(n))break;{let a=n.previousSibling;for(;a&&Va(a,-1);)s=n.parentNode,i=ct(a),a=a.previousSibling;if(a)n=a,r=Wc(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?rm(t,n,r):s&&rm(t,s,i)}function EF(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=Wc(n),i,o;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Va(a,1))i=n,o=++r;else break}else{if(PC(n))break;{let a=n.nextSibling;for(;a&&Va(a,1);)i=a.parentNode,o=ct(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=Wc(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}i&&rm(t,i,o)}function PC(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function MF(t,e){for(;t&&e==t.childNodes.length&&!Il(t);)e=ct(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function PF(t,e){for(;t&&!e&&!Il(t);)e=ct(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function rm(t,e,n){if(e.nodeType!=3){let i,o;(o=MF(e,n))?(e=o,n=0):(i=PF(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Id(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&yr(t)},50)}function yw(t,e){let n=t.state.doc.resolve(e);if(!(St||YV)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function vw(t,e,n){let r=t.state.selection;if(r instanceof re&&!r.empty||n.indexOf("s")>-1||cn&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=nm(t.state,e);if(o&&o instanceof Z)return $r(t,o)}if(!s.parent.inlineContent){let o=e<0?s:i,a=r instanceof gn?ae.near(o,e):ae.findFrom(o,e);return a?$r(t,a):!1}return!1}function xw(t,e){if(!(t.state.selection instanceof re))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),t.dispatch(o),!0}return!1}function ww(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function OF(t){if(!At||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;ww(t,r,"true"),setTimeout(()=>ww(t,r,"false"),20)}return!1}function AF(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function NF(t,e){let n=e.keyCode,r=AF(e);if(n==8||cn&&n==72&&r=="c")return xw(t,-1)||Ri(t,-1);if(n==46&&!e.shiftKey||cn&&n==68&&r=="c")return xw(t,1)||Ri(t,1);if(n==13||n==27)return!0;if(n==37||cn&&n==66&&r=="c"){let s=n==37?yw(t,t.state.selection.from)=="ltr"?-1:1:-1;return gw(t,s,r)||Ri(t,s)}else if(n==39||cn&&n==70&&r=="c"){let s=n==39?yw(t,t.state.selection.from)=="ltr"?1:-1:1;return gw(t,s,r)||Ri(t,s)}else{if(n==38||cn&&n==80&&r=="c")return vw(t,-1,r)||Ri(t,-1);if(n==40||cn&&n==78&&r=="c")return OF(t)||vw(t,1,r)||Ri(t,1);if(r==(cn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Qg(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||Ti.fromSchema(t.state.schema),a=jC(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let u=l.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=RC[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=a.createElement(c[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function OC(t,e,n,r,s){let i=s.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,i||r,t)}),i)return e?new $(N.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):$.empty;let d=t.someProp("clipboardTextParser",f=>f(e,s,r,t));if(d)a=d;else{let f=s.marks(),{schema:h}=t.state,p=Ti.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let y=o.appendChild(document.createElement("p"));m&&y.appendChild(p.serializeNode(h.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=IF(n),Ll&&LF(o);let u=o&&o.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||fs.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||c),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!DF.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)a=$F(kw(a,+c[1],+c[2]),c[4]);else if(a=$.maxOpen(RF(a.content,s),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=kw(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const DF=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function RF(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),i,o=[];if(t.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&i.length&&NC(l,i,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=DC(o[o.length-1],i.length));let c=AC(a,l);o.push(c),s=s.matchType(c.type),i=l}}),o)return N.from(o)}return t}function AC(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,N.from(t));return t}function NC(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=NC(t,e,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(N.from(AC(n,t,s+1))))}}function DC(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,DC(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(N.empty,!0);return t.copy(n.append(r))}function sm(t,e,n,r,s,i){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(i=0),s<r-1&&(a=sm(a,e,n,r,s+1,i)),s>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(N.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function kw(t,e,n){return e<t.openStart&&(t=new $(sm(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new $(sm(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const RC={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let bw=null;function jC(){return bw||(bw=document.implementation.createHTMLDocument("title"))}let ih=null;function jF(t){let e=window.trustedTypes;return e?(ih||(ih=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),ih.createHTML(t)):t}function IF(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=jC().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&RC[r[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=jF(t),s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function LF(t){let e=t.querySelectorAll(St?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function $F(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:i,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=N.from(l.create(r[a+1],s)),i++,o++}return new $(s,i,o)}const Nt={},Dt={},VF={touchstart:!0,touchmove:!0};class FF{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function BF(t){for(let e in Nt){let n=Nt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{UF(t,r)&&!Xg(t,r)&&(t.editable||!(r.type in Dt))&&n(t,r)},VF[e]?{passive:!0}:void 0)}At&&t.dom.addEventListener("input",()=>null),im(t)}function Xr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function zF(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function im(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Xg(t,r))})}function Xg(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function UF(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function WF(t,e){!Xg(t,e)&&Nt[e.type]&&(t.editable||!(e.type in Dt))&&Nt[e.type](t,e)}Dt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!LC(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(fr&&St&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ao&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,Ws(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||NF(t,n)?n.preventDefault():Xr(t,"key")};Dt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Dt.keypress=(t,e)=>{let n=e;if(LC(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||cn&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof re)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,s,i))&&t.dispatch(i()),n.preventDefault()}};function $d(t){return{left:t.clientX,top:t.clientY}}function HF(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function ey(t,e,n,r,s){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,a=>o>i.depth?a(t,n,i.nodeAfter,i.before(o),s,!0):a(t,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function ho(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function qF(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Z.isSelectable(r)?(ho(t,new Z(n)),!0):!1}function KF(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof Z&&(r=n.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(Z.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(o);break}}return s!=null?(ho(t,Z.create(t.state.doc,s)),!0):!1}function JF(t,e,n,r,s){return ey(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(s?KF(t,n):qF(t,n))}function GF(t,e,n,r){return ey(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function ZF(t,e,n,r){return ey(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||YF(t,n,r)}function YF(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ho(t,re.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)ho(t,re.create(r,a+1,a+1+o.content.size));else if(Z.isSelectable(o))ho(t,Z.create(r,a));else continue;return!0}}function ty(t){return Hc(t)}const IC=cn?"metaKey":"ctrlKey";Nt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=ty(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&HF(n,t.input.lastClick)&&!n[IC]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let o=t.posAtCoords($d(n));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new QF(t,o,n,!!r)):(i=="doubleClick"?GF:ZF)(t,o.pos,o.inside,n)?n.preventDefault():Xr(t,"pointer"))};class QF{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[IC],this.allowDefault=r.shiftKey;let i,o;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),o=n.inside;else{let c=e.state.doc.resolve(n.pos);i=c.parent,o=c.depth?c.before():0}const a=s?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:u}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||u instanceof Z&&u.from<=o&&u.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&jn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>yr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords($d(e))),this.updateAllowDefault(e),this.allowDefault||!n?Xr(this.view,"pointer"):JF(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||At&&this.mightDrag&&!this.mightDrag.node.isAtom||St&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ho(this.view,ae.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Xr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Xr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Nt.touchstart=t=>{t.input.lastTouch=Date.now(),ty(t),Xr(t,"pointer")};Nt.touchmove=t=>{t.input.lastTouch=Date.now(),Xr(t,"pointer")};Nt.contextmenu=t=>ty(t);function LC(t,e){return t.composing?!0:At&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const XF=fr?5e3:-1;Dt.compositionstart=Dt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof re&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Hc(t,!0),t.markCursor=null;else if(Hc(t,!e.selection.empty),jn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}t.input.composing=!0}$C(t,XF)};Dt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,$C(t,20))};function $C(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Hc(t),e))}function VC(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=tB());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function eB(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=qV(e.focusNode,e.focusOffset),r=KV(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function tB(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Hc(t,e=!1){if(!(fr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),VC(t),e||t.docView&&t.docView.dirty){let n=Zg(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function nB(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const gl=Kt&&hs<15||Ao&&QV<604;Nt.copy=Dt.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let i=gl?null:n.clipboardData,o=r.content(),{dom:a,text:l}=Qg(t,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):nB(t,a),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function rB(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function sB(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?yl(t,r.value,null,s,e):yl(t,r.textContent,r.innerHTML,s,e)},50)}function yl(t,e,n,r,s){let i=OC(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,s,i||$.empty)))return!0;if(!i)return!1;let o=rB(i),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function FC(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Dt.paste=(t,e)=>{let n=e;if(t.composing&&!fr)return;let r=gl?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&yl(t,FC(r),r.getData("text/html"),s,n)?n.preventDefault():sB(t,n)};class BC{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const iB=cn?"altKey":"ctrlKey";function zC(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[iB]}Nt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords($d(n)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof Z?s.to-1:s.to))){if(r&&r.mightDrag)o=Z.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=Z.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:u,slice:c}=Qg(t,a);(!n.dataTransfer.files.length||!St||pC>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(gl?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",gl||n.dataTransfer.setData("text/plain",u),t.dragging=new BC(c,zC(t,n),o)};Nt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Dt.dragover=Dt.dragenter=(t,e)=>e.preventDefault();Dt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let s=t.posAtCoords($d(n));if(!s)return;let i=t.state.doc.resolve(s.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=OC(t,FC(n.dataTransfer),gl?null:n.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&zC(t,n));if(t.someProp("handleDrop",p=>p(t,n,o||$.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?oC(t.state.doc,i.pos,o):i.pos;l==null&&(l=i.pos);let u=t.state.tr;if(a){let{node:p}=r;p?p.replace(u):u.deleteSelection()}let c=u.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=u.doc;if(d?u.replaceRangeWith(c,c,o.content.firstChild):u.replaceRange(c,c,o),u.doc.eq(f))return;let h=u.doc.resolve(c);if(d&&Z.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new Z(h));else{let p=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((m,y,g,v)=>p=v),u.setSelection(Yg(t,h,u.doc.resolve(p)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};Nt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&yr(t)},20))};Nt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Nt.beforeinput=(t,e)=>{if(St&&fr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Ws(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Dt)Nt[t]=Dt[t];function vl(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class qc{constructor(e,n){this.toDOM=e,this.spec=n||oi,this.side=this.spec.side||0}map(e,n,r,s){let{pos:i,deleted:o}=e.mapResult(n.from+s,this.side<0?-1:1);return o?null:new Ut(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof qc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&vl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ms{constructor(e,n){this.attrs=e,this.spec=n||oi}map(e,n,r,s){let i=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new Ut(i,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ms&&vl(this.attrs,e.attrs)&&vl(this.spec,e.spec)}static is(e){return e.type instanceof ms}destroy(){}}class ny{constructor(e,n){this.attrs=e,this.spec=n||oi}map(e,n,r,s){let i=e.mapResult(n.from+s,1);if(i.deleted)return null;let o=e.mapResult(n.to+s,-1);return o.deleted||o.pos<=i.pos?null:new Ut(i.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),i;return s==n.from&&!(i=e.child(r)).isText&&s+i.nodeSize==n.to}eq(e){return this==e||e instanceof ny&&vl(this.attrs,e.attrs)&&vl(this.spec,e.spec)}destroy(){}}class Ut{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Ut(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Ut(e,e,new qc(n,r))}static inline(e,n,r,s){return new Ut(e,n,new ms(r,s))}static node(e,n,r,s){return new Ut(e,n,new ny(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof ms}get widget(){return this.type instanceof qc}}const Vi=[],oi={};class Be{constructor(e,n){this.local=e.length?e:Vi,this.children=n.length?n:Vi}static create(e,n){return n.length?Kc(n,e,0,oi):wt}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,s+a,i)}}map(e,n,r){return this==wt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||oi)}mapInner(e,n,r,s,i){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,s);l&&l.type.valid(n,l)?(o||(o=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?oB(this.children,o||[],e,n,r,s,i):o?new Be(o.sort(ai),Vi):wt}add(e,n){return n.length?this==wt?Be.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,i=0;e.forEach((a,l)=>{let u=l+r,c;if(c=WC(n,a,u)){for(s||(s=this.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(a,c,u+1):s.splice(i,0,l,l+a.nodeSize,Kc(c,a,u+1,oi)),i+=3}});let o=UC(i?HC(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Be(o.length?this.local.concat(o).sort(ai):this.local,s||this.children)}remove(e){return e.length==0||this==wt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,a=r[i]+n,l=r[i+1]+n;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>a&&d.to<l&&(e[c]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[i+2].removeInner(o,a+1);u!=wt?r[i+2]=u:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let a=0;a<s.length;a++)s[a].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Be(s,r):wt}forChild(e,n){if(this==wt)return this;if(n.isLeaf)return Be.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,o=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>i&&l.type instanceof ms){let u=Math.max(i,l.from)-i,c=Math.min(o,l.to)-i;u<c&&(s||(s=[])).push(l.copy(u,c))}}if(s){let a=new Be(s.sort(ai),Vi);return r?new qr([a,r]):a}return r||wt}eq(e){if(this==e)return!0;if(!(e instanceof Be)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return ry(this.localsInner(e))}localsInner(e){if(this==wt)return Vi;if(e.inlineContent||!this.local.some(ms.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ms||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Be.empty=new Be([],[]);Be.removeOverlap=ry;const wt=Be.empty;class qr{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,oi));return qr.from(r)}forChild(e,n){if(n.isLeaf)return Be.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,n);i!=wt&&(i instanceof qr?r=r.concat(i.members):r.push(i))}return qr.from(r)}eq(e){if(!(e instanceof qr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let o=0;o<i.length;o++)n.push(i[o])}}return n?ry(r?n:n.sort(ai)):Vi}static from(e){switch(e.length){case 0:return wt;case 1:return e[0];default:return new qr(e.every(n=>n instanceof Be)?e:e.reduce((n,r)=>n.concat(r instanceof Be?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function oB(t,e,n,r,s,i,o){let a=t.slice();for(let u=0,c=i;u<n.maps.length;u++){let d=0;n.maps[u].forEach((f,h,p,m)=>{let y=m-p-(h-f);for(let g=0;g<a.length;g+=3){let v=a[g+1];if(v<0||f>v+c-d)continue;let x=a[g]+c-d;h>=x?a[g+1]=f<=x?-2:-1:f>=c&&y&&(a[g]+=y,a[g+1]+=y)}d+=y}),c=n.maps[u].map(c,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let c=n.map(t[u]+i),d=c-s;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[u+1]+i,-1),h=f-s,{index:p,offset:m}=r.content.findIndex(d),y=r.maybeChild(p);if(y&&m==d&&m+y.nodeSize==h){let g=a[u+2].mapInner(n,y,c+1,t[u]+i+1,o);g!=wt?(a[u]=d,a[u+1]=h,a[u+2]=g):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=aB(a,t,e,n,s,i,o),c=Kc(u,r,0,o);e=c.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<c.children.length;d+=3){let h=c.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,c.children[d],c.children[d+1],c.children[d+2])}}return new Be(e.sort(ai),a)}function UC(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new Ut(s.from+e,s.to+e,s.type))}return n}function aB(t,e,n,r,s,i,o){function a(l,u){for(let c=0;c<l.local.length;c++){let d=l.local[c].map(r,s,u);d?n.push(d):o.onRemove&&o.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function WC(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),t[i]=null);return s}function HC(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Kc(t,e,n,r){let s=[],i=!1;e.forEach((a,l)=>{let u=WC(t,a,l+n);if(u){i=!0;let c=Kc(u,a,n+l+1,r);c!=wt&&s.push(l,l+a.nodeSize,c)}});let o=UC(i?HC(t):t,-n).sort(ai);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new Be(o,s):wt}function ai(t,e){return t.from-e.from||t.to-e.to}function ry(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,r.to),Sw(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Sw(e,s,r.copy(i.from,r.to)));break}}}return e}function Sw(t,e,n){for(;e<t.length&&ai(n,t[e])>0;)e++;t.splice(e,0,n)}function oh(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=wt&&e.push(r)}),t.cursorWrapper&&e.push(Be.create(t.state.doc,[t.cursorWrapper.deco])),qr.from(e)}const lB={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},uB=Kt&&hs<=11;class cB{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class dB{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new cB,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Kt&&hs<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),uB&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,lB)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(mw(this.view)){if(this.suppressingSelectionUpdates)return yr(this.view);if(Kt&&hs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&yi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=Oo(i))n.add(i);for(let i=e.anchorNode;i;i=Oo(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&mw(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,a=!1,l=[];if(e.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],l);d&&(i=i<0?d.from:Math.min(d.from,i),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(jn&&l.length){let c=l.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,f]=c;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of c){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||pB(e,d)!=h)&&f.remove()}}}let u=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Id(r)&&(u=Zg(e))&&u.eq(ae.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,yr(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),fB(e)),this.handleDOMChange(i,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||yr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let d=e.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(Kt&&hs<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:d,nextSibling:f}=e.addedNodes[c];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let o=s&&s.parentNode==e.target?ct(s)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=i&&i.parentNode==e.target?ct(i):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let _w=new WeakMap,Cw=!1;function fB(t){if(!_w.has(t)&&(_w.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=jn,Cw)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Cw=!0}}function Tw(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return yi(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function hB(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return Tw(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Tw(t,n):null}function pB(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function mB(t,e,n){let{node:r,fromOffset:s,toOffset:i,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),u,c=l.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],Id(l)||u.push({node:l.focusNode,offset:l.focusOffset})),St&&t.input.lastKeyCode===8)for(let y=i;y>s;y--){let g=r.childNodes[y-1],v=g.pmViewDesc;if(g.nodeName=="BR"&&!v){i=y;break}if(!v||v.size)break}let d=t.state.doc,f=t.someProp("domParser")||fs.fromSchema(t.state.schema),h=d.resolve(o),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:s,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:gB,context:h});if(u&&u[0].pos!=null){let y=u[0].pos,g=u[1]&&u[1].pos;g==null&&(g=y),p={anchor:y+o,head:g+o}}return{doc:m,sel:p,from:o,to:a}}function gB(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(At&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||At&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const yB=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function vB(t,e,n,r,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,P=Zg(t,C);if(P&&!t.state.selection.eq(P)){if(St&&fr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",ee=>ee(t,Ws(13,"Enter"))))return;let A=t.state.tr.setSelection(P);C=="pointer"?A.setMeta("pointer",!0):C=="key"&&A.scrollIntoView(),i&&A.setMeta("composition",i),t.dispatch(A)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,u=mB(t,e,n),c=t.state.doc,d=c.slice(u.from,u.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=kB(d.content,u.doc.content,u.from,f,h);if(p&&t.input.domChangeCount++,(Ao&&t.input.lastIOSEnter>Date.now()-225||fr)&&s.some(C=>C.nodeType==1&&!yB.test(C.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",C=>C(t,Ws(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof re&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let C=Ew(t,t.state.doc,u.sel);if(C&&!C.eq(t.state.selection)){let P=t.state.tr.setSelection(C);i&&P.setMeta("composition",i),t.dispatch(P)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof re&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Kt&&hs<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>u.from&&u.doc.textBetween(p.start-u.from-1,p.start-u.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let m=u.doc.resolveNoCache(p.start-u.from),y=u.doc.resolveNoCache(p.endB-u.from),g=c.resolve(p.start),v=m.sameParent(y)&&m.parent.inlineContent&&g.end()>=p.endA,x;if((Ao&&t.input.lastIOSEnter>Date.now()-225&&(!v||s.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!v&&m.pos<u.doc.content.size&&(!m.sameParent(y)||!m.parent.inlineContent)&&!/\S/.test(u.doc.textBetween(m.pos,y.pos,"",""))&&(x=ae.findFrom(u.doc.resolve(m.pos+1),1,!0))&&x.head>m.pos)&&t.someProp("handleKeyDown",C=>C(t,Ws(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&wB(c,p.start,p.endA,m,y)&&t.someProp("handleKeyDown",C=>C(t,Ws(8,"Backspace")))){fr&&St&&t.domObserver.suppressSelectionUpdates();return}St&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),fr&&!v&&m.start()!=y.start()&&y.parentOffset==0&&m.depth==y.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==p.endA&&(p.endB-=2,y=u.doc.resolveNoCache(p.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,Ws(13,"Enter"))})},20));let k=p.start,_=p.endA,T=C=>{let P=C||t.state.tr.replace(k,_,u.doc.slice(p.start-u.from,p.endB-u.from));if(u.sel){let A=Ew(t,P.doc,u.sel);A&&!(St&&t.composing&&A.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(A.head==k||A.head==P.mapping.map(_)-1)||Kt&&A.empty&&A.head==k)&&P.setSelection(A)}return i&&P.setMeta("composition",i),P.scrollIntoView()},M;if(v){if(m.pos==y.pos){Kt&&hs<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>yr(t),20));let C=T(t.state.tr.delete(k,_)),P=c.resolve(p.start).marksAcross(c.resolve(p.endA));P&&C.ensureMarks(P),t.dispatch(C)}else if(p.endA==p.endB&&(M=xB(m.parent.content.cut(m.parentOffset,y.parentOffset),g.parent.content.cut(g.parentOffset,p.endA-g.start())))){let C=T(t.state.tr);M.type=="add"?C.addMark(k,_,M.mark):C.removeMark(k,_,M.mark),t.dispatch(C)}else if(m.parent.child(m.index()).isText&&m.index()==y.index()-(y.textOffset?0:1)){let C=m.parent.textBetween(m.parentOffset,y.parentOffset),P=()=>T(t.state.tr.insertText(C,k,_));t.someProp("handleTextInput",A=>A(t,k,_,C,P))||t.dispatch(P())}}else t.dispatch(T())}function Ew(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Yg(t,e.resolve(n.anchor),e.resolve(n.head))}function xB(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,i=r,o,a,l;for(let c=0;c<r.length;c++)s=r[c].removeFromSet(s);for(let c=0;c<n.length;c++)i=n[c].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",l=c=>c.mark(a.addToSet(c.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(l(e.child(c)));if(N.from(u).eq(t))return{mark:a,type:o}}function wB(t,e,n,r,s){if(n-e<=s.pos-r.pos||ah(r,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(ah(i,!0,!0));return!o.parent.isTextblock||o.pos>n||ah(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function ah(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function kB(t,e,n,r,s){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let l=Math.max(0,i-Math.min(o,a));r-=o+l-i}if(o<i&&t.size<e.size){let l=r<=i&&r>=o?i-r:0;i-=l,i&&i<e.size&&Mw(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-o),o=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<t.size&&Mw(t.textBetween(i-1,i+1))&&(i+=l?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function Mw(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class qC{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new FF,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Dw),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Aw(this),Ow(this),this.nodeViews=Nw(this),this.docView=uw(this.state.doc,Pw(this),oh(this),this.dom,this),this.domObserver=new dB(this,(r,s,i,o)=>vB(this,r,s,i,o)),this.domObserver.start(),BF(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&im(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Dw),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(VC(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Nw(this);SB(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&im(this),this.editable=Aw(this),Ow(this);let l=oh(this),u=Pw(this),c=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,u,l);(d||!e.selection.eq(s.selection))&&(o=!0);let f=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&tF(this);if(o){this.domObserver.stop();let h=d&&(Kt||St)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&bB(s.selection,e.selection);if(d){let p=St?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=eB(this)),(i||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=uw(e.doc,u,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&CF(this))?yr(this,h):(EC(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&nF(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Z){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&rw(this,n.getBoundingClientRect(),e)}else rw(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new BC(e.slice,e.move,s<0?void 0:Z.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=n?n(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[e];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(Kt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&rF(this.dom),yr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return lF(this,e)}coordsAtPos(e,n=1){return xC(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return hF(this,n||this.state,e)}pasteHTML(e,n){return yl(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return yl(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Qg(this,e)}destroy(){this.docView&&(zF(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],oh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,WV())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return WF(this,e)}domSelectionRange(){let e=this.domSelection();return e?At&&this.root.nodeType===11&&GV(this.dom.ownerDocument)==this.dom&&hB(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}qC.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Pw(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Ut.node(0,t.state.doc.content.size,e)]}function Ow(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Ut.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Aw(t){return!t.someProp("editable",e=>e(t.state)===!1)}function bB(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Nw(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function SB(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function Dw(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var bs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Jc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},_B=typeof navigator<"u"&&/Mac/.test(navigator.platform),CB=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var dt=0;dt<10;dt++)bs[48+dt]=bs[96+dt]=String(dt);for(var dt=1;dt<=24;dt++)bs[dt+111]="F"+dt;for(var dt=65;dt<=90;dt++)bs[dt]=String.fromCharCode(dt+32),Jc[dt]=String.fromCharCode(dt);for(var lh in bs)Jc.hasOwnProperty(lh)||(Jc[lh]=bs[lh]);function TB(t){var e=_B&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||CB&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Jc:bs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const EB=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),MB=typeof navigator<"u"&&/Win/.test(navigator.platform);function PB(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))EB?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function OB(t){let e=Object.create(null);for(let n in t)e[PB(n)]=t[n];return e}function uh(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function AB(t){return new mt({props:{handleKeyDown:KC(t)}})}function KC(t){let e=OB(t);return function(n,r){let s=TB(r),i,o=e[uh(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[uh(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(MB&&r.ctrlKey&&r.altKey)&&(i=bs[r.keyCode])&&i!=s){let a=e[uh(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const NB=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function JC(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const DB=(t,e,n)=>{let r=JC(t,n);if(!r)return!1;let s=sy(r);if(!s){let o=r.blockRange(),a=o&&Uo(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(QC(t,s,e,-1))return!0;if(r.parent.content.size==0&&(No(i,"end")||Z.isSelectable(i)))for(let o=r.depth;;o--){let a=Rd(t.doc,r.before(o),r.after(o),$.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(No(i,"end")?ae.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):Z.create(l.doc,s.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},RB=(t,e,n)=>{let r=JC(t,n);if(!r)return!1;let s=sy(r);return s?GC(t,s,e):!1},jB=(t,e,n)=>{let r=ZC(t,n);if(!r)return!1;let s=iy(r);return s?GC(t,s,e):!1};function GC(t,e,n){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let c=s.lastChild;if(!c)return!1;s=c}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let u=Rd(t.doc,i,l,$.empty);if(!u||u.from!=i||u instanceof tt&&u.slice.size>=l-i)return!1;if(n){let c=t.tr.step(u);c.setSelection(re.create(c.doc,i)),n(c.scrollIntoView())}return!0}function No(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const IB=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=sy(r)}let o=i&&i.nodeBefore;return!o||!Z.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Z.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function sy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function ZC(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const LB=(t,e,n)=>{let r=ZC(t,n);if(!r)return!1;let s=iy(r);if(!s)return!1;let i=s.nodeAfter;if(QC(t,s,e,1))return!0;if(r.parent.content.size==0&&(No(i,"start")||Z.isSelectable(i))){let o=Rd(t.doc,r.before(),r.after(),$.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(No(i,"start")?ae.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):Z.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},$B=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=iy(r)}let o=i&&i.nodeAfter;return!o||!Z.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Z.create(t.doc,i.pos)).scrollIntoView()),!0)};function iy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const VB=(t,e)=>{let n=t.selection,r=n instanceof Z,s;if(r){if(n.node.isTextblock||!As(t.doc,n.from))return!1;s=n.from}else if(s=Dd(t.doc,n.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);r&&i.setSelection(Z.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},FB=(t,e)=>{let n=t.selection,r;if(n instanceof Z){if(n.node.isTextblock||!As(t.doc,n.to))return!1;r=n.to}else if(r=Dd(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},BB=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),i=s&&Uo(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},zB=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function YC(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const UB=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=YC(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(ae.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},WB=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof gn||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=YC(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=t.tr.insert(o,i.createAndFill());a.setSelection(re.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},HB=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(co(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&Uo(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)},qB=(t,e)=>{let{$from:n,to:r}=t.selection,s,i=n.sharedDepth(r);return i==0?!1:(s=n.before(i),e&&e(t.tr.setSelection(Z.create(t.doc,s))),!0)};function KB(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||As(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function QC(t,e,n,r){let s=e.nodeBefore,i=e.nodeAfter,o,a,l=s.type.spec.isolating||i.type.spec.isolating;if(!l&&KB(t,e,n))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,p=N.empty;for(let g=o.length-1;g>=0;g--)p=N.from(o[g].create(null,p));p=N.from(s.copy(p));let m=t.tr.step(new st(e.pos-1,h,e.pos,h,new $(p,1,0),o.length,!0)),y=m.doc.resolve(h+2*o.length);y.nodeAfter&&y.nodeAfter.type==s.type&&As(m.doc,y.pos)&&m.join(y.pos),n(m.scrollIntoView())}return!0}let c=i.type.spec.isolating||r>0&&l?null:ae.findFrom(e,1),d=c&&c.$from.blockRange(c.$to),f=d&&Uo(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(u&&No(i,"start",!0)&&No(s,"end")){let h=s,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let m=i,y=1;for(;!m.isTextblock;m=m.firstChild)y++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(n){let g=N.empty;for(let x=p.length-1;x>=0;x--)g=N.from(p[x].copy(g));let v=t.tr.step(new st(e.pos-p.length,e.pos+i.nodeSize,e.pos+y,e.pos+i.nodeSize-y,new $(g,p.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function XC(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(e.tr.setSelection(re.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const JB=XC(-1),GB=XC(1);function ZB(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),a=o&&Kg(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Rw(t,e=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(o,a,(l,u)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)s=!0;else{let c=n.doc.resolve(u),d=c.index();s=c.parent.canReplaceWith(d,d+1,t)}})}if(!s)return!1;if(r){let i=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function YB(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i);if(!o)return!1;let a=r?n.tr:null;return QB(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function QB(t,e,n,r=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);i=new Bc(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Bc(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=Kg(i,n,r,e);return a?(t&&XB(t,e,a,s,n),!0):!1}function XB(t,e,n,r,s){let i=N.empty;for(let c=n.length-1;c>=0;c--)i=N.from(n[c].type.create(n[c].attrs,i));t.step(new st(e.start-(r?2:0),e.end,e.start,e.end,new $(i,0,0),n.length,!0));let o=0;for(let c=0;c<n.length;c++)n[c].type==s&&(o=c+1);let a=n.length-o,l=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,f=!0;c<d;c++,f=!1)!f&&co(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return t}function ez(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?tz(e,n,t,i):nz(e,n,i):!0:!1}}function tz(t,e,n,r){let s=t.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new st(i-1,o,i,o,new $(N.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Bc(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const a=Uo(r);if(a==null)return!1;s.lift(r,a);let l=s.doc.resolve(s.mapping.map(i,-1)-1);return As(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),e(s.scrollIntoView()),!0}function nz(t,e,n){let r=t.tr,s=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=s.child(p).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(n.start),o=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==s.childCount,u=i.node(-1),c=i.index(-1);if(!u.canReplace(c+(a?0:1),c+1,o.content.append(l?N.empty:N.from(s))))return!1;let d=i.pos,f=d+o.nodeSize;return r.step(new st(d-(a?1:0),f+(l?1:0),d+1,f-1,new $((a?N.empty:N.from(s.copy(N.empty))).append(l?N.empty:N.from(s.copy(N.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function rz(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,u=>u.childCount>0&&u.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let a=i.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let u=l.lastChild&&l.lastChild.type==a.type,c=N.from(u?t.create():null),d=new $(N.from(t.create(null,N.from(a.type.create(null,c)))),u?3:1,0),f=i.start,h=i.end;n(e.tr.step(new st(f-(u?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function Vd(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}class Fd{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:s}=n,{tr:i}=r,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>{const d=l(...c)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:s,state:i}=this,{view:o}=s,a=[],l=!!e,u=e||i.tr,c=()=>(!l&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(u),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const y=this.buildProps(u,n),g=h(...m)(y);return a.push(g),d}])),run:c};return d}createCan(e){const{rawCommands:n,state:r}=this,s=!1,i=e||r.tr,o=this.buildProps(i,s);return{...Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...c)=>u(...c)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,s)}}buildProps(e,n=!0){const{rawCommands:r,editor:s,state:i}=this,{view:o}=s,a={tr:e,editor:s,view:o,state:Vd({state:i,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...c)=>u(...c)(a)]))}};return a}}class sz{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(s=>s!==n):delete this.callbacks[e]),this}once(e,n){const r=(...s)=>{this.off(e,r),n.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function U(t,e,n){return t.config[e]===void 0&&t.parent?U(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?U(t.parent,e,n):null}):t.config[e]}function Bd(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function eT(t){const e=[],{nodeExtensions:n,markExtensions:r}=Bd(t),s=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:s},l=U(o,"addGlobalAttributes",a);if(!l)return;l().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...i,...h}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=U(o,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([c,d])=>{const f={...i,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:c,attribute:f})})}),e}function ot(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Qe(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const a=i?String(i).split(" "):[],l=r[s]?r[s].split(" "):[],u=a.filter(c=>!l.includes(c));r[s]=[...l,...u].join(" ")}else if(s==="style"){const a=i?i.split(";").map(c=>c.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;l.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),a.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),r[s]=Array.from(u.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[s]=i}),r},{})}function om(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Qe(n,r),{})}function tT(t){return typeof t=="function"}function le(t,e=void 0,...n){return tT(t)?e?t.bind(e)(...n):t(...n):t}function iz(t={}){return Object.keys(t).length===0&&t.constructor===Object}function oz(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function jw(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):oz(n.getAttribute(o.name));return a==null?i:{...i,[o.name]:a}},{});return{...r,...s}}}}function Iw(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&iz(n)?!1:n!=null))}function az(t,e){var n;const r=eT(t),{nodeExtensions:s,markExtensions:i}=Bd(t),o=(n=s.find(u=>U(u,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(s.map(u=>{const c=r.filter(g=>g.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((g,v)=>{const x=U(v,"extendNodeSchema",d);return{...g,...x?x(u):{}}},{}),h=Iw({...f,content:le(U(u,"content",d)),marks:le(U(u,"marks",d)),group:le(U(u,"group",d)),inline:le(U(u,"inline",d)),atom:le(U(u,"atom",d)),selectable:le(U(u,"selectable",d)),draggable:le(U(u,"draggable",d)),code:le(U(u,"code",d)),whitespace:le(U(u,"whitespace",d)),linebreakReplacement:le(U(u,"linebreakReplacement",d)),defining:le(U(u,"defining",d)),isolating:le(U(u,"isolating",d)),attrs:Object.fromEntries(c.map(g=>{var v;return[g.name,{default:(v=g==null?void 0:g.attribute)===null||v===void 0?void 0:v.default}]}))}),p=le(U(u,"parseHTML",d));p&&(h.parseDOM=p.map(g=>jw(g,c)));const m=U(u,"renderHTML",d);m&&(h.toDOM=g=>m({node:g,HTMLAttributes:om(g,c)}));const y=U(u,"renderText",d);return y&&(h.toText=y),[u.name,h]})),l=Object.fromEntries(i.map(u=>{const c=r.filter(y=>y.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((y,g)=>{const v=U(g,"extendMarkSchema",d);return{...y,...v?v(u):{}}},{}),h=Iw({...f,inclusive:le(U(u,"inclusive",d)),excludes:le(U(u,"excludes",d)),group:le(U(u,"group",d)),spanning:le(U(u,"spanning",d)),code:le(U(u,"code",d)),attrs:Object.fromEntries(c.map(y=>{var g;return[y.name,{default:(g=y==null?void 0:y.attribute)===null||g===void 0?void 0:g.default}]}))}),p=le(U(u,"parseHTML",d));p&&(h.parseDOM=p.map(y=>jw(y,c)));const m=U(u,"renderHTML",d);return m&&(h.toDOM=y=>m({mark:y,HTMLAttributes:om(y,c)})),[u.name,h]}));return new G_({topNode:o,nodes:a,marks:l})}function ch(t,e){return e.nodes[t]||e.marks[t]||null}function Lw(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function oy(t,e){const n=Ti.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}const lz=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,a)=>{var l,u;const c=((u=(l=s.type.spec).toText)===null||u===void 0?void 0:u.call(l,{node:s,pos:i,parent:o,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?c:c.slice(0,Math.max(0,r-i))}),n};function ay(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class zd{constructor(e){this.find=e.find,this.handler=e.handler}}const uz=(t,e)=>{if(ay(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function yu(t){var e;const{editor:n,from:r,to:s,text:i,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let c=!1;const d=lz(u)+i;return o.forEach(f=>{if(c)return;const h=uz(d,f.find);if(!h)return;const p=l.state.tr,m=Vd({state:l.state,transaction:p}),y={from:r-(h[0].length-i.length),to:s},{commands:g,chain:v,can:x}=new Fd({editor:n,state:m});f.handler({state:m,range:y,match:h,commands:g,chain:v,can:x})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:s,text:i}),l.dispatch(p),c=!0)}),c}function cz(t){const{editor:e,rules:n}=t,r=new mt({state:{init(){return null},apply(s,i,o){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=oy(N.from(c),o.schema);const{from:d}=l,f=d+c.length;yu({editor:e,from:d,to:f,text:c,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,a){return yu({editor:e,from:i,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&yu({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?yu({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function dz(t){return Object.prototype.toString.call(t).slice(8,-1)}function vu(t){return dz(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Ud(t,e){const n={...t};return vu(t)&&vu(e)&&Object.keys(e).forEach(r=>{vu(e[r])&&vu(t[r])?n[r]=Ud(t[r],e[r]):n[r]=e[r]}),n}class Ss{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=le(U(this,"addOptions",{name:this.name}))),this.storage=le(U(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ss(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ud(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ss(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=le(U(n,"addOptions",{name:n.name})),n.storage=le(U(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const l=o.find(u=>(u==null?void 0:u.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function fz(t){return typeof t=="number"}class hz{constructor(e){this.find=e.find,this.handler=e.handler}}const pz=(t,e,n)=>{if(ay(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function mz(t){const{editor:e,state:n,from:r,to:s,rule:i,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:u,can:c}=new Fd({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,s,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(r,p),y=Math.min(s,p+h.content.size),g=h.textBetween(m-p,y-p,void 0,"￼");pz(g,i.find,o).forEach(x=>{if(x.index===void 0)return;const k=m+x.index+1,_=k+x[0].length,T={from:n.tr.mapping.map(k),to:n.tr.mapping.map(_)},M=i.handler({state:n,range:T,match:x,commands:l,chain:u,can:c,pasteEvent:o,dropEvent:a});d.push(M)})}),d.every(h=>h!==null)}let xu=null;const gz=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function yz(t){const{editor:e,rules:n}=t;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:c,from:d,to:f,rule:h,pasteEvt:p})=>{const m=c.tr,y=Vd({state:c,transaction:m});if(!(!mz({editor:e,state:y,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:a})||!m.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(c=>new mt({view(d){const f=p=>{var m;r=!((m=d.dom.parentElement)===null||m===void 0)&&m.contains(p.target)?d.dom.parentElement:null,r&&(xu=e)},h=()=>{xu&&(xu=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(i=r===d.dom.parentElement,a=f,!i){const h=xu;h!=null&&h.isEditable&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,f)=>{var h;const p=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return o=f,s=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],m=p.getMeta("uiEvent")==="paste"&&!s,y=p.getMeta("uiEvent")==="drop"&&!i,g=p.getMeta("applyPasteRules"),v=!!g;if(!m&&!y&&!v)return;if(v){let{text:_}=g;typeof _=="string"?_=_:_=oy(N.from(_),h.schema);const{from:T}=g,M=T+_.length,C=gz(_);return l({rule:c,state:h,from:T,to:{b:M},pasteEvt:C})}const x=f.doc.content.findDiffStart(h.doc.content),k=f.doc.content.findDiffEnd(h.doc.content);if(!(!fz(x)||!k||x===k.b))return l({rule:c,state:h,from:x,to:k,pasteEvt:o})}}))}function vz(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class ro{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=ro.resolve(e),this.schema=az(this.extensions,n),this.setupExtensions()}static resolve(e){const n=ro.sort(ro.flatten(e)),r=vz(n.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},s=U(n,"addExtensions",r);return s?[n,...this.flatten(s())]:n}).flat(10)}static sort(e){return e.sort((r,s)=>{const i=U(r,"priority")||100,o=U(s,"priority")||100;return i>o?-1:i<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ch(n.name,this.schema)},s=U(n,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,n=ro.sort([...this.extensions].reverse()),r=[],s=[],i=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:ch(o.name,this.schema)},l=[],u=U(o,"addKeyboardShortcuts",a);let c={};if(o.type==="mark"&&U(o,"exitable",a)&&(c.ArrowRight=()=>Ss.handleExit({editor:e,mark:o})),u){const m=Object.fromEntries(Object.entries(u()).map(([y,g])=>[y,()=>g({editor:e})]));c={...c,...m}}const d=AB(c);l.push(d);const f=U(o,"addInputRules",a);Lw(o,e.options.enableInputRules)&&f&&r.push(...f());const h=U(o,"addPasteRules",a);Lw(o,e.options.enablePasteRules)&&h&&s.push(...h());const p=U(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[cz({editor:e,rules:r}),...yz({editor:e,rules:s}),...i]}get attributes(){return eT(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Bd(this.extensions);return Object.fromEntries(n.filter(r=>!!U(r,"addNodeView")).map(r=>{const s=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:ot(r.name,this.schema)},o=U(r,"addNodeView",i);if(!o)return[];const a=(l,u,c,d,f)=>{const h=om(l,s);return o()({node:l,view:u,getPos:c,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:h})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ch(e.name,this.schema)};e.type==="mark"&&(!((n=le(U(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const s=U(e,"onBeforeCreate",r),i=U(e,"onCreate",r),o=U(e,"onUpdate",r),a=U(e,"onSelectionUpdate",r),l=U(e,"onTransaction",r),u=U(e,"onFocus",r),c=U(e,"onBlur",r),d=U(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}}class pt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=le(U(this,"addOptions",{name:this.name}))),this.storage=le(U(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new pt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ud(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new pt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=le(U(n,"addOptions",{name:n.name})),n.storage=le(U(n,"addStorage",{name:n.name,options:n.options})),n}}function nT(t,e,n){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,s,(l,u,c,d)=>{var f;l.isBlock&&u>r&&(a+=i);const h=o==null?void 0:o[l.type.name];if(h)return c&&(a+=h({node:l,pos:u,parent:c,index:d,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,s-u))}),a}function rT(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const xz=pt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new mt({key:new Gt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(c=>c.$from.pos)),a=Math.max(...i.map(c=>c.$to.pos)),l=rT(n);return nT(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),wz=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),kz=(t=!1)=>({commands:e})=>e.setContent("",t),bz=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(l)),f=u.resolve(c.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=Uo(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Sz=t=>e=>t(e),_z=()=>({state:t,dispatch:e})=>WB(t,e),Cz=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new re(r.doc.resolve(o-1))),!0},Tz=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const a=s.before(i),l=s.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1},Ez=t=>({tr:e,state:n,dispatch:r})=>{const s=ot(t,n.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const l=i.before(o),u=i.after(o);e.delete(l,u).scrollIntoView()}return!0}return!1},Mz=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},Pz=()=>({state:t,dispatch:e})=>NB(t,e),Oz=()=>({commands:t})=>t.keyboardShortcut("Enter"),Az=()=>({state:t,dispatch:e})=>UB(t,e);function Gc(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:ay(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function sT(t,e,n={}){return t.find(r=>r.type===e&&Gc(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function $w(t,e,n={}){return!!sT(t,e,n)}function ly(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(c=>c.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(c=>c.type===e)||(n=n||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!sT([...s.node.marks],e,n)))return;let o=s.index,a=t.start()+s.offset,l=o+1,u=a+s.node.nodeSize;for(;o>0&&$w([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&$w([...t.parent.child(l).marks],e,n);)u+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function Ds(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const Nz=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const i=Ds(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:u,to:c}=a;if(s){const d=ly(l,i,e);if(d&&d.from<=u&&d.to>=c){const f=re.create(o,d.from,d.to);n.setSelection(f)}}return!0},Dz=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function iT(t){return t instanceof re}function ei(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function oT(t,e=null){if(!e)return null;const n=ae.atStart(t),r=ae.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,i=r.to;return e==="all"?re.create(t,ei(0,s,i),ei(t.content.size,s,i)):re.create(t,ei(e,s,i),ei(e,s,i))}function Rz(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function uy(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const jz=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(uy()||Rz())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!iT(n.state.selection))return o(),!0;const a=oT(s.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},Iz=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),Lz=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),aT=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&aT(r)}return t};function wu(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return aT(n)}function xl(t,e,n){if(t instanceof gr||t instanceof N)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return N.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),xl("",e,n)}if(s){if(n.errorOnInvalidContent){let o=!1,a="";const l=new G_({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?fs.fromSchema(l).parseSlice(wu(t),n.parseOptions):fs.fromSchema(l).parse(wu(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=fs.fromSchema(e);return n.slice?i.parseSlice(wu(t),n.parseOptions).content:i.parse(wu(t),n.parseOptions)}return xl("",e,n)}function $z(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof tt||s instanceof st))return;const i=t.mapping.maps[r];let o=0;i.forEach((a,l,u,c)=>{o===0&&(o=c)}),t.setSelection(ae.near(t.doc.resolve(o),n))}const Vz=t=>!("type"in t),Fz=(t,e,n)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=y=>{i.emit("contentError",{editor:i,error:y,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{xl(e,i.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(y){l(y)}try{a=xl(e,i.schema,{parseOptions:u,errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:i.options.enableContentCheck})}catch(y){return l(y),!1}let{from:c,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,h=!0;if((Vz(a)?a:[a]).forEach(y=>{y.check(),f=f?y.isText&&y.marks.length===0:!1,h=h?y.isBlock:!1}),c===d&&h){const{parent:y}=r.doc.resolve(c);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(c-=1,d+=1)}let m;if(f){if(Array.isArray(e))m=e.map(y=>y.text||"").join("");else if(e instanceof N){let y="";e.forEach(g=>{g.text&&(y+=g.text)}),m=y}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,c,d)}else m=a,r.replaceWith(c,d,m);n.updateSelection&&$z(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:m})}return!0},Bz=()=>({state:t,dispatch:e})=>VB(t,e),zz=()=>({state:t,dispatch:e})=>FB(t,e),Uz=()=>({state:t,dispatch:e})=>DB(t,e),Wz=()=>({state:t,dispatch:e})=>LB(t,e),Hz=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Dd(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},qz=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Dd(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Kz=()=>({state:t,dispatch:e})=>RB(t,e),Jz=()=>({state:t,dispatch:e})=>jB(t,e);function lT(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Gz(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))uy()||lT()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const Zz=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const i=Gz(t).split(/-(?!$)/),o=i.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&s&&r.maybeStep(c)}),!0};function wl(t,e,n={}){const{from:r,to:s,empty:i}=t.selection,o=e?ot(e,t.schema):null,a=[];t.doc.nodesBetween(r,s,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(s,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=s-r,u=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Gc(d.node.attrs,n,{strict:!1}));return i?!!u.length:u.reduce((d,f)=>d+f.to-f.from,0)>=l}const Yz=(t,e={})=>({state:n,dispatch:r})=>{const s=ot(t,n.schema);return wl(n,s,e)?BB(n,r):!1},Qz=()=>({state:t,dispatch:e})=>HB(t,e),Xz=t=>({state:e,dispatch:n})=>{const r=ot(t,e.schema);return ez(r)(e,n)},e4=()=>({state:t,dispatch:e})=>zB(t,e);function Wd(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Vw(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}const t4=(t,e)=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=Wd(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=ot(t,r.schema)),a==="mark"&&(o=Ds(t,r.schema)),s&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,c)=>{i&&i===u.type&&n.setNodeMarkup(c,void 0,Vw(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(d=>{o===d.type&&n.addMark(c,c+u.nodeSize,o.create(Vw(d.attrs,e)))})})}),!0):!1},n4=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),r4=()=>({tr:t,dispatch:e})=>{if(e){const n=new gn(t.doc);t.setSelection(n)}return!0},s4=()=>({state:t,dispatch:e})=>IB(t,e),i4=()=>({state:t,dispatch:e})=>$B(t,e),o4=()=>({state:t,dispatch:e})=>qB(t,e),a4=()=>({state:t,dispatch:e})=>GB(t,e),l4=()=>({state:t,dispatch:e})=>JB(t,e);function am(t,e,n={},r={}){return xl(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const u4=(t,e=!1,n={},r={})=>({editor:s,tr:i,dispatch:o,commands:a})=>{var l,u;const{doc:c}=i;if(n.preserveWhitespace!=="full"){const d=am(t,s.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck});return o&&i.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!e),!0}return o&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:s.options.enableContentCheck})};function uT(t,e){const n=Ds(e,t.schema),{from:r,to:s,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function c4(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function d4(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function cy(t){return e=>d4(e.$from,t)}function f4(t,e){const n={from:0,to:t.content.size};return nT(t,n,e)}function h4(t,e){const n=ot(e,t.schema),{from:r,to:s}=t.selection,i=[];t.doc.nodesBetween(r,s,a=>{i.push(a)});const o=i.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function p4(t,e){const n=Wd(typeof e=="string"?e:e.name,t.schema);return n==="node"?h4(t,e):n==="mark"?uT(t,e):{}}function cT(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const i=n.resolve(t),o=ly(i,s.type);o&&r.push({mark:s,...o})}):n.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}function Bu(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}function lm(t,e,n={}){const{empty:r,ranges:s}=t.selection,i=e?Ds(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>Gc(d.attrs,n,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(m,y)=>{if(!m.isText&&!m.marks.length)return;const g=Math.max(h,y),v=Math.min(p,y+m.nodeSize),x=v-g;o+=x,a.push(...m.marks.map(k=>({mark:k,from:g,to:v})))})}),o===0)return!1;const l=a.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>Gc(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),u=a.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+u:l)>=o}function m4(t,e,n={}){if(!e)return wl(t,null,n)||lm(t,null,n);const r=Wd(e,t.schema);return r==="node"?wl(t,e,n):r==="mark"?lm(t,e,n):!1}function Fw(t,e){const{nodeExtensions:n}=Bd(e),r=n.find(o=>o.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=le(U(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function Hd(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(Hd(i,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function g4(t){return t instanceof Z}function y4(t,e,n){var r;const{selection:s}=e;let i=null;if(iT(s)&&(i=s.$cursor),i){const a=(r=t.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(c,d,f)=>{if(u)return!1;if(c.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(n));u=h&&p}return!u}),u})}const v4=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:o,ranges:a}=i,l=Ds(t,r.schema);if(s)if(o){const u=uT(r,l);n.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(f,h)=>{const p=Math.max(h,c),m=Math.min(h+f.nodeSize,d);f.marks.find(g=>g.type===l)?f.marks.forEach(g=>{l===g.type&&n.addMark(p,m,l.create({...g.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return y4(r,n,l)},x4=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),w4=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const i=ot(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:a})=>Rw(i,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>Rw(i,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},k4=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=ei(t,0,r.content.size),i=Z.create(r,s);e.setSelection(i)}return!0},b4=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,o=re.atStart(r).from,a=re.atEnd(r).to,l=ei(s,o,a),u=ei(i,o,a),c=re.create(r,l,u);e.setSelection(c)}return!0},S4=t=>({state:e,dispatch:n})=>{const r=ot(t,e.schema);return rz(r)(e,n)};function Bw(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}const _4=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:a,$to:l}=i,u=s.extensionManager.attributes,c=Bu(u,a.node().type.name,a.node().attrs);if(i instanceof Z&&i.node.isBlock)return!a.parentOffset||!co(o,a.pos)?!1:(r&&(t&&Bw(n,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:c4(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:c}]:void 0,p=co(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&co(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:c}]:void 0),r){if(p&&(i instanceof re&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),y=e.doc.resolve(m);a.node(-1).canReplaceWith(y.index(),y.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&Bw(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return p},C4=(t,e={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var o;const a=ot(t,r.schema),{$from:l,$to:u}=r.selection,c=r.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(u))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let g=N.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let C=l.depth-v;C>=l.depth-3;C-=1)g=N.from(l.node(C).copy(g));const x=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k={...Bu(f,l.node().type.name,l.node().attrs),...e},_=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(k))||void 0;g=g.append(N.from(a.createAndFill(null,_)||void 0));const T=l.before(l.depth-(v-1));n.replace(T,l.after(-x),new $(g,4-v,0));let M=-1;n.doc.nodesBetween(T,n.doc.content.size,(C,P)=>{if(M>-1)return!1;C.isTextblock&&C.content.size===0&&(M=P+1)}),M>-1&&n.setSelection(re.near(n.doc.resolve(M))),n.scrollIntoView()}return!0}const h=u.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...Bu(f,d.type.name,d.attrs),...e},m={...Bu(f,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,u.pos);const y=h?[{type:a,attrs:p},{type:h,attrs:m}]:[{type:a,attrs:p}];if(!co(n.doc,l.pos,2))return!1;if(s){const{selection:g,storedMarks:v}=r,{splittableMarks:x}=i.extensionManager,k=v||g.$to.parentOffset&&g.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!k||!s)return!0;const _=k.filter(T=>x.includes(T.type.name));n.ensureMarks(_)}return!0},dh=(t,e)=>{const n=cy(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&As(t.doc,n.pos)&&t.join(n.pos),!0},fh=(t,e)=>{const n=cy(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&As(t.doc,r)&&t.join(r),!0},T4=(t,e,n,r={})=>({editor:s,tr:i,state:o,dispatch:a,chain:l,commands:u,can:c})=>{const{extensions:d,splittableMarks:f}=s.extensionManager,h=ot(t,o.schema),p=ot(e,o.schema),{selection:m,storedMarks:y}=o,{$from:g,$to:v}=m,x=g.blockRange(v),k=y||m.$to.parentOffset&&m.$from.marks();if(!x)return!1;const _=cy(T=>Fw(T.type.name,d))(m);if(x.depth>=1&&_&&x.depth-_.depth<=1){if(_.node.type===h)return u.liftListItem(p);if(Fw(_.node.type.name,d)&&h.validContent(_.node.content)&&a)return l().command(()=>(i.setNodeMarkup(_.pos,h),!0)).command(()=>dh(i,h)).command(()=>fh(i,h)).run()}return!n||!k||!a?l().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>dh(i,h)).command(()=>fh(i,h)).run():l().command(()=>{const T=c().wrapInList(h,r),M=k.filter(C=>f.includes(C.type.name));return i.ensureMarks(M),T?!0:u.clearNodes()}).wrapInList(h,r).command(()=>dh(i,h)).command(()=>fh(i,h)).run()},E4=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,o=Ds(t,r.schema);return lm(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},M4=(t,e,n={})=>({state:r,commands:s})=>{const i=ot(t,r.schema),o=ot(e,r.schema),a=wl(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(o,l):s.setNode(i,{...l,...n})},P4=(t,e={})=>({state:n,commands:r})=>{const s=ot(t,n.schema);return wl(n,s,e)?r.lift(s):r.wrapIn(s,e)},O4=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const o=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else o.delete(i.from,i.to)}return!0}}return!1},A4=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},N4=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=Ds(t,r.schema),{$from:u,empty:c,ranges:d}=a;if(!s)return!0;if(c&&o){let{from:f,to:h}=a;const p=(i=u.marks().find(y=>y.type===l))===null||i===void 0?void 0:i.attrs,m=ly(u,l,p);m&&(f=m.from,h=m.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},D4=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=Wd(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=ot(t,r.schema)),a==="mark"&&(o=Ds(t,r.schema)),s&&n.selection.ranges.forEach(l=>{const u=l.$from.pos,c=l.$to.pos;let d,f,h,p;n.selection.empty?r.doc.nodesBetween(u,c,(m,y)=>{i&&i===m.type&&(h=Math.max(y,u),p=Math.min(y+m.nodeSize,c),d=y,f=m)}):r.doc.nodesBetween(u,c,(m,y)=>{y<u&&i&&i===m.type&&(h=Math.max(y,u),p=Math.min(y+m.nodeSize,c),d=y,f=m),y>=u&&y<=c&&(i&&i===m.type&&n.setNodeMarkup(y,void 0,{...m.attrs,...e}),o&&m.marks.length&&m.marks.forEach(g=>{if(o===g.type){const v=Math.max(y,u),x=Math.min(y+m.nodeSize,c);n.addMark(v,x,o.create({...g.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(m=>{o===m.type&&n.addMark(h,p,o.create({...m.attrs,...e}))}))}),!0):!1},R4=(t,e={})=>({state:n,dispatch:r})=>{const s=ot(t,n.schema);return ZB(s,e)(n,r)},j4=(t,e={})=>({state:n,dispatch:r})=>{const s=ot(t,n.schema);return YB(s,e)(n,r)};var I4=Object.freeze({__proto__:null,blur:wz,clearContent:kz,clearNodes:bz,command:Sz,createParagraphNear:_z,cut:Cz,deleteCurrentNode:Tz,deleteNode:Ez,deleteRange:Mz,deleteSelection:Pz,enter:Oz,exitCode:Az,extendMarkRange:Nz,first:Dz,focus:jz,forEach:Iz,insertContent:Lz,insertContentAt:Fz,joinBackward:Uz,joinDown:zz,joinForward:Wz,joinItemBackward:Hz,joinItemForward:qz,joinTextblockBackward:Kz,joinTextblockForward:Jz,joinUp:Bz,keyboardShortcut:Zz,lift:Yz,liftEmptyBlock:Qz,liftListItem:Xz,newlineInCode:e4,resetAttributes:t4,scrollIntoView:n4,selectAll:r4,selectNodeBackward:s4,selectNodeForward:i4,selectParentNode:o4,selectTextblockEnd:a4,selectTextblockStart:l4,setContent:u4,setMark:v4,setMeta:x4,setNode:w4,setNodeSelection:k4,setTextSelection:b4,sinkListItem:S4,splitBlock:_4,splitListItem:C4,toggleList:T4,toggleMark:E4,toggleNode:M4,toggleWrap:P4,undoInputRule:O4,unsetAllMarks:A4,unsetMark:N4,updateAttributes:D4,wrapIn:R4,wrapInList:j4});const L4=pt.create({name:"commands",addCommands(){return{...I4}}}),$4=pt.create({name:"drop",addProseMirrorPlugins(){return[new mt({key:new Gt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),V4=pt.create({name:"editable",addProseMirrorPlugins(){return[new mt({key:new Gt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),F4=new Gt("focusEvents"),B4=pt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new mt({key:F4,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),z4=pt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:c,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,y=d.pos-d.parentOffset,g=m&&p.parent.childCount===1?y===d.pos:ae.atStart(u).from===f;return!c||!h.type.isTextblock||h.textContent.length||!g||g&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return uy()||lT()?i:s},addProseMirrorPlugins(){return[new mt({key:new Gt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(m=>m.getMeta("composition")))return;const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),s=t.some(m=>m.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:a}=e.selection,l=ae.atStart(e.doc).from,u=ae.atEnd(e.doc).to;if(i||!(o===l&&a===u)||!Hd(n.doc))return;const f=n.tr,h=Vd({state:n,transaction:f}),{commands:p}=new Fd({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),U4=pt.create({name:"paste",addProseMirrorPlugins(){return[new mt({key:new Gt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),W4=pt.create({name:"tabindex",addProseMirrorPlugins(){return[new mt({key:new Gt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Hs{get name(){return this.node.type.name}constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Hs(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Hs(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Hs(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,o=this.pos+r+(i?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!s&&a.depth<=this.depth)return;const l=new Hs(a,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),e.push(new Hs(a,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const i=s.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(i[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(n);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===e&&i.every(l=>n[l]===o.node.attrs[l])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const H4=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function q4(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}let K4=class extends sz{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:s})=>this.options.onDrop(n,r,s)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=q4(H4,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=tT(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;r=r.filter(a=>!a.key.startsWith(o))}),n.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,n;const s=[...this.options.enableCoreExtensions?[V4,xz.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),L4,B4,z4,W4,$4,U4].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new ro(s,this)}createCommandManager(){this.commandManager=new Fd({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=am(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=am(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=oT(n,this.options.autofocus);this.view=new qC(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:no.create({doc:n,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return p4(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,s=typeof e=="string"?n:e;return m4(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return oy(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return f4(this.state.doc,{blockSeparator:n,textSerializers:{...rT(this.schema),...r}})}get isEmpty(){return Hd(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Hs(n,this)}get $doc(){return this.$pos(0)}};function Do(t){return new zd({find:t.find,handler:({state:e,range:n,match:r})=>{const s=le(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),u=n.from+a.indexOf(o),c=u+o.length;if(cT(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;c<n.to&&i.delete(c,n.to),u>n.from&&i.delete(n.from+l,u);const f=n.from+l+o.length;i.addMark(n.from+l,f,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}function J4(t){return new zd({find:t.find,handler:({state:e,range:n,match:r})=>{const s=le(t.getAttributes,void 0,r)||{},{tr:i}=e,o=n.from;let a=n.to;const l=t.type.create(s);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=o+u;c>a?c=a:a=c+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,o+r[0].length-1),i.replaceWith(c,a,l)}else if(r[0]){const u=t.type.isInline?o:o-1;i.insert(u,t.type.create(s)).delete(i.mapping.map(o),i.mapping.map(a))}i.scrollIntoView()}})}function um(t){return new zd({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),i=le(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)}})}function kl(t){return new zd({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const i=le(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),u=l&&Kg(l,t.type,i);if(!u)return null;if(o.wrap(l,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(y=>h.includes(y.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,i).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&As(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&o.join(n.from-1)}})}class Rt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=le(U(this,"addOptions",{name:this.name}))),this.storage=le(U(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Rt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ud(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Rt(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=le(U(n,"addOptions",{name:n.name})),n.storage=le(U(n,"addStorage",{name:n.name,options:n.options})),n}}function Ro(t){return new hz({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const i=le(t.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let u=n.to;if(a){const c=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(cT(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+c,d),u=n.from+c+a.length,o.addMark(n.from+c,u,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function G4(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Z){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let s=r.depth;for(;s>=0;){const i=r.index(s);if(r.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}function Z4(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dT={exports:{}},hh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function Q4(){if(zw)return hh;zw=1;var t=ve;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function a(d,f){var h=f(),p=r({inst:{value:h,getSnapshot:f}}),m=p[0].inst,y=p[1];return i(function(){m.value=h,m.getSnapshot=f,l(m)&&y({inst:m})},[d,h,f]),s(function(){return l(m)&&y({inst:m}),d(function(){l(m)&&y({inst:m})})},[d]),o(h),h}function l(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function u(d,f){return f()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return hh.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:c,hh}dT.exports=Q4();var dy=dT.exports;const X4=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},e3=({contentComponent:t})=>{const e=dy.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return ve.createElement(ve.Fragment,null,Object.values(e))};function t3(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:QM.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}class n3 extends ve.Component{constructor(e){var n;super(e),this.editorContentRef=ve.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=t3(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return ve.createElement(ve.Fragment,null,ve.createElement("div",{ref:X4(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&ve.createElement(e3,{contentComponent:e.contentComponent}))}}const r3=b.forwardRef((t,e)=>{const n=ve.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ve.createElement(n3,{key:n,innerRef:e,...t})}),s3=ve.memo(r3);var i3=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;for(s of e.entries())if(!t(s[1],n.get(s[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(e[s]!==n[s])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},o3=Y4(i3),fT={exports:{}},ph={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function a3(){if(Uw)return ph;Uw=1;var t=ve,e=dy;function n(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,i=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return ph.useSyncExternalStoreWithSelector=function(u,c,d,f,h){var p=i(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=a(function(){function g(T){if(!v){if(v=!0,x=T,T=f(T),h!==void 0&&m.hasValue){var M=m.value;if(h(M,T))return k=M}return k=T}if(M=k,r(x,T))return M;var C=f(T);return h!==void 0&&h(M,C)?M:(x=T,k=C)}var v=!1,x,k,_=d===void 0?null:d;return[function(){return g(c())},_===null?void 0:function(){return g(_())}]},[c,d,f,h]);var y=s(u,p[0],p[1]);return o(function(){m.hasValue=!0,m.value=y},[y]),l(y),y},ph}fT.exports=a3();var l3=fT.exports;const u3=typeof window<"u"?b.useLayoutEffect:b.useEffect;class c3{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function d3(t){var e;const[n]=b.useState(()=>new c3(t.editor)),r=l3.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:o3);return u3(()=>n.watch(t.editor),[t.editor,n]),b.useDebugValue(r),r}const f3=!1,cm=typeof window>"u",h3=cm||!!(typeof window<"u"&&window.next);class fy{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return cm||h3?null:this.createEditor();if(this.options.current.immediatelyRender&&cm&&f3)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)===null||i===void 0?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)===null||i===void 0?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)===null||i===void 0?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)===null||i===void 0?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)===null||i===void 0?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)===null||i===void 0?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)===null||i===void 0?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)===null||i===void 0?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)===null||i===void 0?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)===null||i===void 0?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)===null||i===void 0?void 0:i.call(s,...r)}};return new K4(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,i)=>{var o;return s===((o=n.extensions)===null||o===void 0?void 0:o[i])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?fy.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function p3(t={},e=[]){const n=b.useRef(t);n.current=t;const[r]=b.useState(()=>new fy(n)),s=dy.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return b.useDebugValue(s),b.useEffect(r.onRender(e)),d3({editor:s,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&i===0?0:i+1}),s}const m3=b.createContext({editor:null});m3.Consumer;const g3=b.createContext({onDragStart:void 0}),y3=()=>b.useContext(g3);ve.forwardRef((t,e)=>{const{onDragStart:n}=y3(),r=t.as||"div";return ve.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const v3=/^\s*>\s$/,x3=Rt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[kl({find:v3,type:this.type})]}}),w3=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,k3=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,b3=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,S3=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,_3=Ss.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Do({find:w3,type:this.type}),Do({find:b3,type:this.type})]},addPasteRules(){return[Ro({find:k3,type:this.type}),Ro({find:S3,type:this.type})]}}),C3="listItem",Ww="textStyle",Hw=/^\s*([-+*])\s$/,T3=Rt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Qe(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(C3,this.editor.getAttributes(Ww)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=kl({find:Hw,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=kl({find:Hw,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Ww),editor:this.editor})),[t]}}),E3=/(^|[^`])`([^`]+)`(?!`)/,M3=/(^|[^`])`([^`]+)`(?!`)/g,P3=Ss.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Do({find:E3,type:this.type})]},addPasteRules(){return[Ro({find:M3,type:this.type})]}}),O3=/^```([a-z]+)?[\s\n]$/,A3=/^~~~([a-z]+)?[\s\n]$/,N3=Rt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,i=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Qe(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:u})=>(u.setSelection(ae.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[um({find:O3,type:this.type,getAttributes:t=>({language:t[1]})}),um({find:A3,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new mt({key:new Gt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(re.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),D3=Rt.create({name:"doc",topNode:!0,content:"block+"});function R3(t={}){return new mt({view(e){return new j3(e,t)}})}class j3{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,a=i.height/s.offsetHeight;if(n){let d=e.nodeBefore,f=e.nodeAfter;if(d||f){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let p=h.getBoundingClientRect(),m=d?p.bottom:p.top;d&&f&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*a;r={left:p.left,right:p.right,top:m-y,bottom:m+y}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,c=-pageYOffset;else{let d=l.getBoundingClientRect(),f=d.width/l.offsetWidth,h=d.height/l.offsetHeight;u=d.left-l.scrollLeft*f,c=d.top-l.scrollTop*h}this.element.style.left=(r.left-u)/o+"px",this.element.style.top=(r.top-c)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=oC(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const I3=pt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[R3(this.options)]}});class Ve extends ae{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ve.valid(r)?new Ve(r):ae.near(r)}content(){return $.empty}eq(e){return e instanceof Ve&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ve(e.resolve(n.pos))}getBookmark(){return new hy(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!L3(e)||!$3(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ve.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=n;let l=e.doc.resolve(s);if(Ve.valid(l))return l}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!Z.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let a=e.doc.resolve(s);if(Ve.valid(a))return a}return null}}}Ve.prototype.visible=!1;Ve.findFrom=Ve.findGapCursorFrom;ae.jsonID("gapcursor",Ve);class hy{constructor(e){this.pos=e}map(e){return new hy(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ve.valid(n)?new Ve(n):ae.near(n)}}function L3(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function $3(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function V3(){return new mt({props:{decorations:U3,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ve.valid(n)?new Ve(n):null},handleClick:B3,handleKeyDown:F3,handleDOMEvents:{beforeinput:z3}}})}const F3=KC({ArrowLeft:ku("horiz",-1),ArrowRight:ku("horiz",1),ArrowUp:ku("vert",-1),ArrowDown:ku("vert",1)});function ku(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof re){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let u=Ve.findGapCursorFrom(a,e,l);return u?(s&&s(r.tr.setSelection(new Ve(u))),!0):!1}}function B3(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ve.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Z.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ve(r))),!0)}function z3(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ve))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=N.empty;for(let o=r.length-1;o>=0;o--)s=N.from(r[o].createAndFill(null,s));let i=t.state.tr.replace(n.pos,n.pos,new $(s,0,0));return i.setSelection(re.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function U3(t){if(!(t.selection instanceof Ve))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Be.create(t.doc,[Ut.widget(t.selection.head,e,{key:"gapcursor"})])}const W3=pt.create({name:"gapCursor",addProseMirrorPlugins(){return[V3()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=le(U(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),H3=Rt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Qe(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&o){const d=l.filter(f=>a.includes(f.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),q3=Rt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Qe(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>um({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Zc=200,it=function(){};it.prototype.append=function(e){return e.length?(e=it.from(e),!this.length&&e||e.length<Zc&&this.leafAppend(e)||this.length<Zc&&e.leafPrepend(this)||this.appendInner(e)):this};it.prototype.prepend=function(e){return e.length?it.from(e).append(this):this};it.prototype.appendInner=function(e){return new K3(this,e)};it.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?it.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};it.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};it.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};it.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},n,r),s};it.from=function(e){return e instanceof it?e:e&&e.length?new hT(e):it.empty};var hT=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var l=i;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var l=i-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Zc)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Zc)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(it);it.empty=new hT([]);var K3=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(it);const J3=500;class An{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,a,l,u=[],c=[];return this.items.forEach((d,f)=>{if(!d.step){s||(s=this.remapping(r,f+1),i=s.maps.length),i--,c.push(d);return}if(s){c.push(new Vn(d.map));let h=d.step.map(s.slice(i)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],u.push(new Vn(p,void 0,void 0,u.length+c.length))),i--,p&&s.appendMap(p,i)}else o.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(i)):d.selection,l=new An(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,s){let i=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),f=new Vn(e.mapping.maps[c],d,n),h;(h=l&&l.merge(f))&&(f=h,c?i.pop():a=a.slice(0,a.length-1)),i.push(f),n&&(o++,n=void 0),s||(l=f)}let u=o-r.depth;return u>Z3&&(a=G3(a,u),o-=u),new An(a.append(i),o)}remapping(e,n){let r=new pl;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new An(this.items.append(e.map(n=>new Vn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},s);let l=n;this.items.forEach(f=>{let h=i.getMirror(--l);if(h==null)return;o=Math.min(o,h);let p=i.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),y=f.selection&&f.selection.map(i.slice(l+1,h));y&&a++,r.push(new Vn(p,m,y))}else r.push(new Vn(p))},s);let u=[];for(let f=n;f<o;f++)u.push(new Vn(i.maps[f]));let c=this.items.slice(0,s).append(u).append(r),d=new An(c,a);return d.emptyItemCount()>J3&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let l=o.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){let c=o.selection&&o.selection.map(n.slice(r));c&&i++;let d=new Vn(u.invert(),l,c),f,h=s.length-1;(f=s.length&&s[h].merge(d))?s[h]=f:s.push(d)}}else o.map&&r--},this.items.length,0),new An(it.from(s.reverse()),i)}}An.empty=new An(it.empty,0);function G3(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class Vn{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Vn(n.getMap().invert(),n,this.selection)}}}class Vr{constructor(e,n,r,s,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const Z3=20;function Y3(t,e,n,r){let s=n.getMeta(li),i;if(s)return s.historyState;n.getMeta(eU)&&(t=new Vr(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(li))return o.getMeta(li).redo?new Vr(t.done.addTransform(n,void 0,r,zu(e)),t.undone,qw(n.mapping.maps),t.prevTime,t.prevComposition):new Vr(t.done,t.undone.addTransform(n,void 0,r,zu(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Q3(n,t.prevRanges)),u=o?mh(t.prevRanges,n.mapping):qw(n.mapping.maps);return new Vr(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,zu(e)),An.empty,u,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new Vr(t.done.rebased(n,i),t.undone.rebased(n,i),mh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Vr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),mh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Q3(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(n=!0)}),n}function qw(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,i,o)=>e.push(i,o));return e}function mh(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),i=e.map(t[r+1],-1);s<=i&&n.push(s,i)}return n}function X3(t,e,n){let r=zu(e),s=li.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),l=new Vr(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(li,{redo:n,historyState:l})}let gh=!1,Kw=null;function zu(t){let e=t.plugins;if(Kw!=e){gh=!1,Kw=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){gh=!0;break}}return gh}const li=new Gt("history"),eU=new Gt("closeHistory");function tU(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new mt({key:li,state:{init(){return new Vr(An.empty,An.empty,null,0,-1)},apply(e,n,r){return Y3(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?mT:r=="historyRedo"?gT:null;return s?(n.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function pT(t,e){return(n,r)=>{let s=li.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let i=X3(s,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const mT=pT(!1,!0),gT=pT(!0,!0),nU=pt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>mT(t,e),redo:()=>({state:t,dispatch:e})=>gT(t,e)}},addProseMirrorPlugins(){return[tU(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),rU=Rt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Qe(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!G4(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:s}=n,i=t();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):g4(n)?i.insertContentAt(s.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:u}=o.selection,c=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?o.setSelection(re.create(o.doc,u.pos+1)):u.nodeAfter.isBlock?o.setSelection(Z.create(o.doc,u.pos)):o.setSelection(re.create(o.doc,u.pos));else{const d=(l=u.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(c,d),o.setSelection(re.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[J4({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),sU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,iU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,oU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,aU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,lU=Ss.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Do({find:sU,type:this.type}),Do({find:oU,type:this.type})]},addPasteRules(){return[Ro({find:iU,type:this.type}),Ro({find:aU,type:this.type})]}}),uU=Rt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Qe(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),cU="listItem",Jw="textStyle",Gw=/^(\d+)\.\s$/,dU=Rt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Qe(this.options.HTMLAttributes,n),0]:["ol",Qe(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(cU,this.editor.getAttributes(Jw)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=kl({find:Gw,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=kl({find:Gw,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Jw)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),fU=Rt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),hU=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pU=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,mU=Ss.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Do({find:hU,type:this.type})]},addPasteRules(){return[Ro({find:pU,type:this.type})]}}),gU=Rt.create({name:"text",group:"inline"}),yU=pt.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(_3.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(x3.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(T3.configure(this.options.bulletList)),this.options.code!==!1&&t.push(P3.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(N3.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(D3.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(I3.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(W3.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(H3.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(q3.configure(this.options.heading)),this.options.history!==!1&&t.push(nU.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(rU.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(lU.configure(this.options.italic)),this.options.listItem!==!1&&t.push(uU.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(dU.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(fU.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(mU.configure(this.options.strike)),this.options.text!==!1&&t.push(gU.configure(this.options.text)),t}}),vU=pt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new mt({key:new Gt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!n)return null;const i=this.editor.isEmpty;return t.descendants((o,a)=>{const l=r>=a&&r<=a+o.nodeSize,u=!o.isLeaf&&Hd(o);if((l||!this.options.showOnlyCurrent)&&u){const c=[this.options.emptyNodeClass];i&&c.push(this.options.emptyEditorClass);const d=Ut.node(a,a+o.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});s.push(d)}return this.options.includeChildren}),Be.create(t,s)}}})]}}),xU=pt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new mt({key:new Gt("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const i=this.storage.characters({node:r.doc});if(i>s){const o=i-s,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(a,l);return t=!0,u}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),i=this.storage.characters({node:e.doc});if(i<=r||s>r&&i>r&&i<=s)return!0;if(s>r&&i>r&&i>s||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=i-r,u=a-l,c=a;return e.deleteRange(u,c),!(this.storage.characters({node:e.doc})>r)}})]}});function wU(t){var e;const{char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:i,startOfLine:o,$position:a}=t,l=r&&!s,u=Z4(n),c=new RegExp(`\\s${u}$`),d=o?"^":"",f=s?"":u,h=l?new RegExp(`${d}${u}.*?(?=\\s${f}|$)`,"gm"):new RegExp(`${d}(?:^)?${u}[^\\s${f}]*`,"gm"),p=((e=a.nodeBefore)===null||e===void 0?void 0:e.isText)&&a.nodeBefore.text;if(!p)return null;const m=a.pos-p.length,y=Array.from(p.matchAll(h)).pop();if(!y||y.input===void 0||y.index===void 0)return null;const g=y.input.slice(Math.max(0,y.index-1),y.index),v=new RegExp(`^[${i==null?void 0:i.join("")}\0]?$`).test(g);if(i!==null&&!v)return null;const x=m+y.index;let k=x+y[0].length;return l&&c.test(p.slice(k-1,k+1))&&(y[0]+=" ",k+=1),x<a.pos&&k>=a.pos?{range:{from:x,to:k},query:y[0].slice(n.length),text:y[0]}:null}const kU=new Gt("suggestion");function bU({pluginKey:t=kU,editor:e,char:n="@",allowSpaces:r=!1,allowToIncludeChar:s=!1,allowedPrefixes:i=[" "],startOfLine:o=!1,decorationTag:a="span",decorationClass:l="suggestion",command:u=()=>null,items:c=()=>[],render:d=()=>({}),allow:f=()=>!0,findSuggestionMatch:h=wU}){let p;const m=d==null?void 0:d(),y=new mt({key:t,view(){return{update:async(g,v)=>{var x,k,_,T,M,C,P;const A=(x=this.key)===null||x===void 0?void 0:x.getState(v),ee=(k=this.key)===null||k===void 0?void 0:k.getState(g.state),J=A.active&&ee.active&&A.range.from!==ee.range.from,X=!A.active&&ee.active,se=A.active&&!ee.active,we=!X&&!se&&A.query!==ee.query,ie=X||J&&we,ke=we||J,I=se||J&&we;if(!ie&&!ke&&!I)return;const W=I&&!ie?A:ee,Y=g.dom.querySelector(`[data-decoration-id="${W.decorationId}"]`);p={editor:e,range:W.range,query:W.query,text:W.text,items:[],command:G=>u({editor:e,range:W.range,props:G}),decorationNode:Y,clientRect:Y?()=>{var G;const{decorationId:be}=(G=this.key)===null||G===void 0?void 0:G.getState(e.state),Lt=g.dom.querySelector(`[data-decoration-id="${be}"]`);return(Lt==null?void 0:Lt.getBoundingClientRect())||null}:null},ie&&((_=m==null?void 0:m.onBeforeStart)===null||_===void 0||_.call(m,p)),ke&&((T=m==null?void 0:m.onBeforeUpdate)===null||T===void 0||T.call(m,p)),(ke||ie)&&(p.items=await c({editor:e,query:W.query})),I&&((M=m==null?void 0:m.onExit)===null||M===void 0||M.call(m,p)),ke&&((C=m==null?void 0:m.onUpdate)===null||C===void 0||C.call(m,p)),ie&&((P=m==null?void 0:m.onStart)===null||P===void 0||P.call(m,p))},destroy:()=>{var g;p&&((g=m==null?void 0:m.onExit)===null||g===void 0||g.call(m,p))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(g,v,x,k){const{isEditable:_}=e,{composing:T}=e.view,{selection:M}=g,{empty:C,from:P}=M,A={...v};if(A.composing=T,_&&(C||e.view.composing)){(P<v.range.from||P>v.range.to)&&!T&&!v.composing&&(A.active=!1);const ee=h({char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:i,startOfLine:o,$position:M.$from}),J=`id_${Math.floor(Math.random()*4294967295)}`;ee&&f({editor:e,state:k,range:ee.range,isActive:v.active})?(A.active=!0,A.decorationId=v.decorationId?v.decorationId:J,A.range=ee.range,A.query=ee.query,A.text=ee.text):A.active=!1}else A.active=!1;return A.active||(A.decorationId=null,A.range={from:0,to:0},A.query=null,A.text=null),A}},props:{handleKeyDown(g,v){var x;const{active:k,range:_}=y.getState(g.state);return k&&((x=m==null?void 0:m.onKeyDown)===null||x===void 0?void 0:x.call(m,{view:g,event:v,range:_}))||!1},decorations(g){const{active:v,range:x,decorationId:k}=y.getState(g);return v?Be.create(g.doc,[Ut.inline(x.from,x.to,{nodeName:a,class:l,"data-decoration-id":k})]):null}}});return y}function SU({editor:t,overrideSuggestionOptions:e,extensionName:n,char:r="@"}){const s=new Gt;return{editor:t,char:r,pluginKey:s,command:({editor:i,range:o,props:a})=>{var l,u,c;const d=i.view.state.selection.$to.nodeAfter;((l=d==null?void 0:d.text)===null||l===void 0?void 0:l.startsWith(" "))&&(o.to+=1),i.chain().focus().insertContentAt(o,[{type:n,attrs:{...a,mentionSuggestionChar:r}},{type:"text",text:" "}]).run(),(c=(u=i.view.dom.ownerDocument.defaultView)===null||u===void 0?void 0:u.getSelection())===null||c===void 0||c.collapseToEnd()},allow:({state:i,range:o})=>{const a=i.doc.resolve(o.from),l=i.schema.nodes[n];return!!a.parent.type.contentMatch.matchType(l)},...e}}const _U=Rt.create({name:"mention",priority:101,addStorage(){return{suggestions:[],getSuggestionFromChar:()=>null}},addOptions(){return{HTMLAttributes:{},renderText({node:t,suggestion:e}){var n;return`${e==null?void 0:e.char}${(n=t.attrs.label)!==null&&n!==void 0?n:t.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML({options:t,node:e,suggestion:n}){var r;return["span",Qe(this.HTMLAttributes,t.HTMLAttributes),`${n==null?void 0:n.char}${(r=e.attrs.label)!==null&&r!==void 0?r:e.attrs.id}`]},suggestions:[],suggestion:{}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:t=>t.getAttribute("data-id"),renderHTML:t=>t.id?{"data-id":t.id}:{}},label:{default:null,parseHTML:t=>t.getAttribute("data-label"),renderHTML:t=>t.label?{"data-label":t.label}:{}},mentionSuggestionChar:{default:"@",parseHTML:t=>t.getAttribute("data-mention-suggestion-char"),renderHTML:t=>({"data-mention-suggestion-char":t.mentionSuggestionChar})}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:t,HTMLAttributes:e}){var n,r,s;const i=(s=(r=(n=this.editor)===null||n===void 0?void 0:n.extensionStorage)===null||r===void 0?void 0:r[this.name])===null||s===void 0?void 0:s.getSuggestionFromChar(t.attrs.mentionSuggestionChar);if(this.options.renderLabel!==void 0)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",Qe({"data-type":this.name},this.options.HTMLAttributes,e),this.options.renderLabel({options:this.options,node:t,suggestion:i})];const o={...this.options};o.HTMLAttributes=Qe({"data-type":this.name},this.options.HTMLAttributes,e);const a=this.options.renderHTML({options:o,node:t,suggestion:i});return typeof a=="string"?["span",Qe({"data-type":this.name},this.options.HTMLAttributes,e),a]:a},renderText({node:t}){var e,n,r;const s={options:this.options,node:t,suggestion:(r=(n=(e=this.editor)===null||e===void 0?void 0:e.extensionStorage)===null||n===void 0?void 0:n[this.name])===null||r===void 0?void 0:r.getSuggestionFromChar(t.attrs.mentionSuggestionChar)};return this.options.renderLabel!==void 0?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel(s)):this.options.renderText(s)},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:t,state:e})=>{let n=!1;const{selection:r}=e,{empty:s,anchor:i}=r;if(!s)return!1;e.doc.nodesBetween(i-1,i,(l,u)=>{if(l.type.name===this.name)return n=!0,t.insertText(this.options.deleteTriggerWithBackspace?"":this.options.suggestion.char||"",u,u+l.nodeSize),!1});let o=new gr,a=0;return e.doc.nodesBetween(i-1,i,(l,u)=>{if(l.type.name===this.name)return n=!0,o=l,a=u,!1}),n&&t.insertText(this.options.deleteTriggerWithBackspace?"":o.attrs.mentionSuggestionChar,a,a+o.nodeSize),n})}},addProseMirrorPlugins(){return this.storage.suggestions.map(bU)},onBeforeCreate(){this.storage.suggestions=(this.options.suggestions.length?this.options.suggestions:[this.options.suggestion]).map(t=>SU({editor:this.editor,overrideSuggestionOptions:t,extensionName:this.name,char:t.char})),this.storage.getSuggestionFromChar=t=>{const e=this.storage.suggestions.find(n=>n.char===t);return e||(this.storage.suggestions.length?this.storage.suggestions[0]:null)}}}),CU=({editor:t})=>{const e=[{icon:ND,action:()=>t.chain().focus().undo().run(),isActive:!1,title:"Undo",disabled:!t.can().undo()},{icon:ED,action:()=>t.chain().focus().redo().run(),isActive:!1,title:"Redo",disabled:!t.can().redo()},{type:"separator"},{icon:yD,action:()=>t.chain().focus().toggleHeading({level:1}).run(),isActive:t.isActive("heading",{level:1}),title:"Heading 1"},{icon:vD,action:()=>t.chain().focus().toggleHeading({level:2}).run(),isActive:t.isActive("heading",{level:2}),title:"Heading 2"},{icon:xD,action:()=>t.chain().focus().toggleHeading({level:3}).run(),isActive:t.isActive("heading",{level:3}),title:"Heading 3"},{type:"separator"},{icon:hD,action:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold"},{icon:wD,action:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic"},{icon:AD,action:()=>t.chain().focus().toggleStrike().run(),isActive:t.isActive("strike"),title:"Strikethrough"},{icon:pD,action:()=>t.chain().focus().toggleCode().run(),isActive:t.isActive("code"),title:"Inline Code"},{type:"separator"},{icon:bD,action:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet List"},{icon:kD,action:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Ordered List"},{icon:TD,action:()=>t.chain().focus().toggleBlockquote().run(),isActive:t.isActive("blockquote"),title:"Blockquote"}];return w.jsx("div",{className:"flex items-center space-x-1 p-4 border-b border-gray-200 bg-gray-50 overflow-x-auto",children:e.map((n,r)=>{if(n.type==="separator")return w.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"},r);const s=n.icon;return w.jsx("button",{onClick:n.action,disabled:n.disabled,title:n.title,className:`p-2 rounded-md transition-all hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed ${n.isActive?"bg-blue-100 text-blue-600":"text-gray-600"}`,children:w.jsx(s,{className:"h-4 w-4"})},r)})})},yT=b.forwardRef(({props:t,editor:e},n)=>{const[r,s]=b.useState(0),i=u=>{const c=t.items[u];c&&t.command({id:c.id,username:c.username})},o=()=>{s((r+t.items.length-1)%t.items.length)},a=()=>{s((r+1)%t.items.length)},l=()=>{i(r)};return b.useEffect(()=>s(0),[t.items]),b.useImperativeHandle(n,()=>({onKeyDown:({event:u})=>u.key==="ArrowUp"?(o(),!0):u.key==="ArrowDown"?(a(),!0):u.key==="Enter"?(l(),!0):!1})),w.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-1 max-w-xs",children:t.items.length?t.items.map((u,c)=>w.jsxs("button",{className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${c===r?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,onClick:()=>i(c),children:[w.jsxs("div",{className:"font-medium",children:["@",u.username]}),u.full_name&&w.jsx("div",{className:"text-xs text-gray-500",children:u.full_name})]},u.id)):w.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No users found"})})});yT.displayName="MentionList";const TU=({documentId:t,title:e,content:n,onContentChange:r,onTitleChange:s})=>{const{user:i}=Yn(),[o,a]=b.useState([]);b.useEffect(()=>{(async()=>{const{data:d,error:f}=await De.from("users").select("id, username, full_name").limit(50);if(f){console.error("Error fetching users:",f);return}a(d||[])})()},[]);const l=b.useCallback(({query:c,range:d,command:f})=>({items:o.filter(p=>p.username.toLowerCase().includes(c.toLowerCase())||p.full_name&&p.full_name.toLowerCase().includes(c.toLowerCase())).slice(0,10),command:({id:p,username:m})=>{f({id:p,label:m}),t&&i&&De.from("mentions").insert({document_id:t,mentioned_user_id:p,mentioning_user_id:i.id}).then(({error:y})=>{y&&console.error("Error creating mention:",y)})}}),[o,t,i]),u=p3({extensions:[yU,vU.configure({placeholder:"Start writing your document..."}),xU,_U.configure({HTMLAttributes:{class:"mention"},suggestion:{items:l,render:()=>{let c,d;return{onStart:f=>{c=new yT({props:f,editor:f.editor}),f.clientRect&&(d=document.createElement("div"),d.className="mention-popup",document.body.appendChild(d),c.render(d))},onUpdate(f){if(c.updateProps(f),!f.clientRect)return;const h=f.clientRect();d.style.top=`${h.bottom+8}px`,d.style.left=`${h.left}px`},onKeyDown(f){return f.event.key==="Escape"?(d.remove(),!0):c.onKeyDown(f)},onExit(){d.remove(),c.destroy()}}}}})],content:n,editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-xl mx-auto focus:outline-none min-h-[500px] p-6"}},onUpdate:({editor:c})=>{r(c.getJSON())}});return w.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[w.jsx("div",{className:"p-6 border-b border-gray-200",children:w.jsx("input",{type:"text",value:e,onChange:c=>s(c.target.value),className:"w-full text-3xl font-bold text-gray-900 border-none outline-none placeholder-gray-400",placeholder:"Untitled Document"})}),u&&w.jsx(CU,{editor:u}),w.jsx("div",{className:"relative",children:w.jsx(s3,{editor:u})}),u&&w.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200 text-sm text-gray-500 flex justify-between items-center",children:[w.jsxs("span",{children:[u.storage.characterCount.characters()," characters, ",u.storage.characterCount.words()," words"]}),w.jsx("span",{className:"text-xs text-gray-400",children:"Use @ to mention users"})]})]})},EU=()=>{const{id:t}=EP(),{user:e}=Yn(),n=ki(),[r,s]=b.useState(null),[i,o]=b.useState("Untitled Document"),[a,l]=b.useState('{"type":"doc","content":[{"type":"paragraph"}]}'),[u,c]=b.useState(!0),[d,f]=b.useState(!1),[h,p]=b.useState(null),[m,y]=b.useState(!1),g=t==="new";b.useEffect(()=>{if(g){c(!1);return}v()},[t,e]),b.useEffect(()=>{if(!m)return;const P=setTimeout(async()=>{await k()},2e3);return()=>clearTimeout(P)},[i,a,m]);const v=async()=>{if(!(!e||!t||g))try{const{data:P,error:A}=await De.from("documents").select("*").eq("id",t).single();if(A)throw A;if(!(P.author_id===e.id||P.visibility==="public"||await x(t))){fe.error("You do not have permission to access this document"),n("/dashboard");return}s(P),o(P.title),l(P.content)}catch(P){console.error("Error fetching document:",P),fe.error("Failed to load document"),n("/dashboard")}finally{c(!1)}},x=async P=>{if(!e)return!1;const{data:A}=await De.from("document_shares").select("*").eq("document_id",P).eq("user_id",e.id).single();return!!A},k=b.useCallback(async()=>{if(e){f(!0);try{if(g||!r){const{data:P,error:A}=await De.from("documents").insert({title:i,content:a,author_id:e.id,visibility:"private"}).select().single();if(A)throw A;s(P),n(`/editor/${P.id}`,{replace:!0}),await _(P.id)}else{const{error:P}=await De.from("documents").update({title:i,content:a,last_modified_at:new Date().toISOString()}).eq("id",r.id);if(P)throw P;await _(r.id)}p(new Date),y(!1)}catch(P){console.error("Error saving document:",P),fe.error("Failed to save document")}finally{f(!1)}}},[e,i,a,r,g,n]),_=async P=>{if(e)try{await De.from("document_versions").insert({document_id:P,user_id:e.id,title:i,content:a})}catch(A){console.error("Error saving version:",A)}},T=async()=>{if(!(!r||!e||r.author_id!==e.id))try{const P=r.visibility==="private"?"public":"private",{error:A}=await De.from("documents").update({visibility:P}).eq("id",r.id);if(A)throw A;s({...r,visibility:P}),fe.success(`Document is now ${P}`)}catch(P){console.error("Error updating visibility:",P),fe.error("Failed to update document visibility")}},M=P=>{o(P),y(!0)},C=P=>{l(typeof P=="string"?P:JSON.stringify(P)),y(!0)};return u?w.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),w.jsx("p",{className:"text-gray-600",children:"Loading document..."})]})}):w.jsxs("div",{className:"min-h-screen bg-gray-50",children:[w.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-16 z-40",children:w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"flex items-center justify-between h-14",children:[w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsx("button",{onClick:()=>n("/dashboard"),className:"p-2 text-gray-600 hover:text-gray-900 rounded-lg hover:bg-gray-100 transition-colors",children:w.jsx(vc,{className:"h-5 w-5"})}),w.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:d?w.jsxs("span",{className:"flex items-center space-x-1",children:[w.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-blue-600"}),w.jsx("span",{children:"Saving..."})]}):h?w.jsxs("span",{className:"flex items-center space-x-1",children:[w.jsx(MD,{className:"h-3 w-3 text-green-600"}),w.jsxs("span",{children:["Saved ",h.toLocaleTimeString()]})]}):m?w.jsx("span",{className:"text-orange-600",children:"Unsaved changes"}):null})]}),w.jsxs("div",{className:"flex items-center space-x-3",children:[r&&r.author_id===(e==null?void 0:e.id)&&w.jsx("button",{onClick:T,className:"flex items-center space-x-2 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:r.visibility==="private"?w.jsxs(w.Fragment,{children:[w.jsx(xc,{className:"h-4 w-4"}),w.jsx("span",{children:"Private"})]}):w.jsxs(w.Fragment,{children:[w.jsx(wc,{className:"h-4 w-4"}),w.jsx("span",{children:"Public"})]})}),w.jsxs("button",{className:"flex items-center space-x-2 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[w.jsx(Gb,{className:"h-4 w-4"}),w.jsx("span",{children:"History"})]}),w.jsxs("button",{className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-1.5 text-sm rounded-lg hover:bg-blue-700 transition-colors",children:[w.jsx(PD,{className:"h-4 w-4"}),w.jsx("span",{children:"Share"})]})]})]})})}),w.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:w.jsx(_o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:w.jsx(TU,{documentId:(r==null?void 0:r.id)||null,title:i,content:a,onTitleChange:M,onContentChange:C})})})]})},MU=()=>{const{user:t}=Yn(),[e]=eO(),n=e.get("q")||"",[r,s]=b.useState([]),[i,o]=b.useState(!0);b.useEffect(()=>{n&&a()},[n,t]);const a=async()=>{if(t){o(!0);try{const{data:c,error:d}=await De.from("documents").select(`
          *,
          users:author_id (
            username,
            full_name
          )
        `).or(`
          and(search_text.fts.${n.replace(/\s+/g,"&")}, visibility.eq.public),
          and(search_text.fts.${n.replace(/\s+/g,"&")}, author_id.eq.${t.id}),
          search_text.fts.${n.replace(/\s+/g,"&")}
        `).order("last_modified_at",{ascending:!1});if(d)throw d;const f=[];for(const h of c||[])if(h.author_id===t.id||h.visibility==="public")f.push(h);else{const{data:p}=await De.from("document_shares").select("*").eq("document_id",h.id).eq("user_id",t.id).single();p&&f.push(h)}s(f)}catch(c){console.error("Error searching documents:",c),fe.error("Failed to search documents")}finally{o(!1)}}},l=async c=>{if(confirm("Are you sure you want to delete this document? This action cannot be undone."))try{const{error:d}=await De.from("documents").delete().eq("id",c);if(d)throw d;s(f=>f.filter(h=>h.id!==c)),fe.success("Document deleted successfully")}catch(d){console.error("Error deleting document:",d),fe.error("Failed to delete document")}},u=async c=>{try{const d=r.find(p=>p.id===c);if(!d||!t)return;const{data:f,error:h}=await De.from("documents").insert({title:`${d.title} (Copy)`,content:d.content,author_id:t.id,visibility:"private"}).select().single();if(h)throw h;fe.success("Document duplicated successfully"),a()}catch(d){console.error("Error duplicating document:",d),fe.error("Failed to duplicate document")}};return i?w.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),w.jsx("p",{className:"text-gray-600",children:"Searching documents..."})]})}):w.jsx("div",{className:"min-h-screen bg-gray-50",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[w.jsxs("div",{className:"mb-8",children:[w.jsxs(nt,{to:"/dashboard",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 mb-4",children:[w.jsx(vc,{className:"h-4 w-4"}),w.jsx("span",{children:"Back to Dashboard"})]}),w.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[w.jsx(bd,{className:"h-6 w-6 text-gray-400"}),w.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:['Search Results for "',n,'"']})]}),w.jsxs("p",{className:"text-gray-600",children:["Found ",r.length," document",r.length!==1?"s":""]})]}),r.length===0?w.jsxs("div",{className:"text-center py-16",children:[w.jsx(qn,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents found"}),w.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your search query or check the spelling"}),w.jsx(nt,{to:"/dashboard",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Browse all documents"})]}):w.jsx(_o.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(c=>w.jsx(D_,{document:c,onDelete:c.author_id===(t==null?void 0:t.id)?l:void 0,onDuplicate:u,onShare:d=>console.log("Share document:",d)},c.id))})]})})},PU=()=>{const{user:t}=Yn();return w.jsxs("div",{className:"min-h-screen bg-gray-50",children:[w.jsxs(zP,{children:[w.jsx(rr,{path:"/",element:t?w.jsx(ji,{to:"/dashboard",replace:!0}):w.jsx(YL,{})}),w.jsx(rr,{path:"/auth/signup",element:t?w.jsx(ji,{to:"/dashboard",replace:!0}):w.jsx(Uf,{title:"Create your account",subtitle:"Join DocCollab to start collaborating on documents",children:w.jsx(qL,{})})}),w.jsx(rr,{path:"/auth/signin",element:t?w.jsx(ji,{to:"/dashboard",replace:!0}):w.jsx(Uf,{title:"Welcome back",subtitle:"Sign in to your DocCollab account",children:w.jsx(JL,{})})}),w.jsx(rr,{path:"/auth/forgot-password",element:t?w.jsx(ji,{to:"/dashboard",replace:!0}):w.jsx(Uf,{title:"Reset your password",subtitle:"Enter your email to receive a reset link",children:w.jsx(ZL,{})})}),w.jsx(rr,{path:"/dashboard",element:w.jsxs(qf,{children:[w.jsx(zf,{}),w.jsx(K$,{})]})}),w.jsx(rr,{path:"/editor/:id",element:w.jsxs(qf,{children:[w.jsx(zf,{}),w.jsx(EU,{})]})}),w.jsx(rr,{path:"/search",element:w.jsxs(qf,{children:[w.jsx(zf,{}),w.jsx(MU,{})]})}),w.jsx(rr,{path:"*",element:w.jsx(ji,{to:"/",replace:!0})})]}),w.jsx(WO,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})};function OU(){return w.jsx(ZP,{children:w.jsx(uD,{children:w.jsx(PU,{})})})}cb(document.getElementById("root")).render(w.jsx(b.StrictMode,{children:w.jsx(OU,{})}));
